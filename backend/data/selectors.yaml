# KOOK 网页元素选择器配置
# P0-8: 选择器配置化
# 版本：v3.1
# 说明：KOOK 网页改版时，仅需修改此文件，无需改动代码

# 登录页面选择器
login:
  # 邮箱输入框（多个备选）
  email_input:
    - 'input[type="email"]'
    - 'input[name="email"]'
    - '#email'
    - 'input[placeholder*="邮箱"]'
  
  # 密码输入框
  password_input:
    - 'input[type="password"]'
    - 'input[name="password"]'
    - '#password'
    - 'input[placeholder*="密码"]'
  
  # 登录按钮
  submit_button:
    - 'button[type="submit"]'
    - 'button.login-btn'
    - 'button.submit-btn'
    - '.login-button'
    - 'button:has-text("登录")'
  
  # 验证码输入框
  captcha_input:
    - 'input[name="captcha"]'
    - 'input[name="verify_code"]'
    - 'input[placeholder*="验证码"]'
    - '#captcha'
  
  # 验证码图片
  captcha_image:
    - 'img.captcha-image'
    - 'img[alt*="验证码"]'
    - 'img[src*="captcha"]'
    - '.captcha-img'
  
  # 短信验证码输入框
  sms_code_input:
    - 'input[name="sms_code"]'
    - 'input[name="phone_code"]'
    - 'input[placeholder*="短信验证码"]'
    - 'input[placeholder*="手机验证码"]'
  
  # 邮箱验证码输入框
  email_code_input:
    - 'input[name="email_code"]'
    - 'input[placeholder*="邮箱验证码"]'
  
  # 发送验证码按钮
  send_code_button:
    - 'button:has-text("发送验证码")'
    - '.send-code-btn'
    - 'button.send-code'

# 主页面选择器
main_page:
  # 用户信息面板
  user_panel:
    - '.user-panel'
    - '[data-user-info]'
    - '.current-user'
    - '.user-profile'
    - '[class*="user"]'
  
  # 用户头像
  user_avatar:
    - '.user-avatar'
    - 'img.avatar'
    - '[class*="avatar"]'
  
  # 用户名
  username:
    - '.username'
    - '.user-name'
    - '[data-username]'

# 服务器列表选择器
server_container:
  # 服务器列表容器
  container:
    - '.guild-list'
    - '[class*="guild-list"]'
    - '[class*="GuildList"]'
    - '.server-list'
    - '[class*="server-list"]'
  
  # 服务器项
  item:
    - '.guild-item'
    - '[class*="guild-item"]'
    - '[class*="GuildItem"]'
    - '[class*="server-item"]'
    - '[data-guild-id]'
    - '[data-server-id]'
    - 'a[href*="/guild/"]'
  
  # 服务器名称
  name:
    - '.guild-name'
    - '[class*="guild-name"]'
    - '[class*="GuildName"]'
    - '.server-name'
    - '[class*="name"]'
  
  # 服务器图标
  icon:
    - 'img.guild-icon'
    - 'img.server-icon'
    - '.guild-avatar img'
    - 'img'

# 频道列表选择器
channel_container:
  # 频道列表容器
  container:
    - '.channel-list'
    - '[class*="channel-list"]'
    - '[class*="ChannelList"]'
    - 'nav[class*="channel"]'
    - 'div[class*="sidebar"]'
  
  # 频道项
  item:
    - '.channel-item'
    - '[class*="channel-item"]'
    - '[class*="ChannelItem"]'
    - '[data-channel-id]'
    - 'a[href*="/channel/"]'
  
  # 频道名称
  name:
    - '.channel-name'
    - '[class*="channel-name"]'
    - '[class*="ChannelName"]'
    - 'span.name'
    - '[class*="name"]'
  
  # 频道类型图标（区分文本/语音）
  type_icon:
    - 'svg[class*="voice"]'
    - 'i[class*="voice"]'
    - '.channel-type-icon'

# 消息相关选择器
message:
  # 消息列表
  list_container:
    - '.message-list'
    - '[class*="message-list"]'
    - '[class*="MessageList"]'
    - '.messages'
  
  # 消息项
  item:
    - '[class*="message"]'
    - '[data-message-id]'
    - '.msg-item'
  
  # 消息内容
  content:
    - '[class*="content"]'
    - '.message-content'
    - '.msg-content'
  
  # 发送者
  author:
    - '[class*="author"]'
    - '.message-author'
    - '.sender'
  
  # 时间戳
  timestamp:
    - '[class*="time"]'
    - '[data-timestamp]'
    - '.message-time'

# WebSocket URL 提取
websocket:
  # 从页面中提取 WebSocket URL 的方法
  extraction_methods:
    - 'window.__INITIAL_STATE__.websocketUrl'
    - 'window.websocketUrl'
    - 'localStorage.getItem("websocket_url")'

# 特殊功能选择器
special:
  # 加载更多按钮
  load_more:
    - 'button:has-text("加载更多")'
    - '.load-more'
    - '[class*="load-more"]'
  
  # 错误提示
  error_message:
    - '.error-message'
    - '[class*="error"]'
    - '.toast-error'
  
  # 成功提示
  success_message:
    - '.success-message'
    - '[class*="success"]'
    - '.toast-success'

# 配置元数据
metadata:
  version: "3.1.0"
  last_updated: "2025-10-24"
  kook_version_tested: "current"
  notes: |
    此配置文件用于适配 KOOK 网页版的 DOM 结构。
    当 KOOK 改版导致抓取失败时，请更新相应的选择器。
    每个选择器提供多个备选项，按顺序尝试。
