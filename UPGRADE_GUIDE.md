# 🎉 KOOK消息转发系统 v15.0.0 升级指南

## 📢 重大更新

欢迎升级到 **v15.0.0 Ultimate Edition**！这是一个里程碑版本，包含了**10个重大优化项目**，全面提升了系统的易用性、稳定性和功能完整性。

---

## ✨ 主要新特性

### 1. 全新的3步配置向导

不再需要6步复杂配置，现在只需3步即可完成：

1. **欢迎页** - 了解基本功能
2. **登录KOOK** - Cookie一键导入或账号密码登录
3. **选择频道** - 可视化选择要监听的服务器和频道

配置时间大幅缩短！

### 2. Chrome扩展一键导入Cookie

安装Chrome扩展后：
- 在KOOK网页版登录
- 点击扩展图标
- Cookie自动发送到软件

导入成功率大幅提升！

### 3. 可视化频道映射编辑器

告别传统的表格式配置，现在可以：
- 左侧点击KOOK频道
- 右侧点击目标Bot
- 自动创建映射关系（带连线动画）

配置效率大幅提升！

### 4. 实时统计Dashboard

主界面现在显示：
- 今日转发数量和趋势
- 成功率（带进度条）
- 平均延迟（带等级标识）
- 实时折线图
- 平台分布饼图

**一目了然的完整数据！**

### 5. 增强过滤规则

新增功能：
- 批量关键词输入（逗号分隔）
- 正则表达式支持
- 实时测试功能
- 规则模板（严格模式/仅官方公告等）

功能大幅增强！

### 6. 一键打包部署

开发者福利：
- Python打包脚本：`python scripts/build_complete.py`
- Shell打包脚本：`./scripts/build.sh`
- Docker一键部署：`./docker-install.sh`

打包时间大幅缩短！

### 7. 自动更新功能

应用会自动检查更新：
- 每小时检查一次
- 发现新版本时通知
- 后台下载更新
- 一键重启安装

**再也不会错过新版本！**

---

## 📦 升级方法

### 方法1：全新安装（推荐）

如果您是新用户或想要干净安装：

1. 下载最新安装包：
   - Windows: `KOOK消息转发系统-v15.0.0-Windows-x64.exe`
   - macOS: `KOOK消息转发系统-v15.0.0-macOS.dmg`
   - Linux: `KOOK消息转发系统-v15.0.0-Linux-x64.AppImage`

2. 安装并运行

3. 按照新的3步配置向导操作

### 方法2：从旧版本升级

如果您已经在使用旧版本：

1. **备份数据**（重要！）
   ```bash
   # 备份配置和数据
   cp -r ~/Documents/KookForwarder ~/Documents/KookForwarder_backup
   ```

2. **卸载旧版本**
   - Windows: 控制面板 → 卸载程序
   - macOS: 将应用拖到废纸篓
   - Linux: 删除AppImage文件

3. **安装新版本**（数据会自动迁移）

4. **验证配置**
   - 启动应用
   - 检查账号是否正常
   - 检查映射关系是否保留

### 方法3：Docker升级

如果您使用Docker部署：

```bash
# 停止旧容器
docker-compose down

# 拉取新镜像
git pull origin main

# 重新构建和启动
docker-compose up -d --build
```

---

## 🔄 数据迁移

### 自动迁移

v15.0.0会自动迁移以下数据：
- ✅ 账号信息
- ✅ Bot配置
- ✅ 频道映射
- ✅ 过滤规则
- ✅ 系统设置

### 手动检查项

升级后请检查以下内容：

1. **账号状态**
   - 进入"账号管理"
   - 确认所有账号显示为"在线"
   - 如果显示"离线"，请重新登录

2. **频道映射**
   - 进入"频道映射"
   - 查看所有映射关系是否正常
   - 推荐：体验新的可视化编辑器

3. **过滤规则**
   - 进入"过滤规则"
   - 旧的关键词规则会自动保留
   - 可以使用新的批量输入功能优化

4. **测试转发**
   - 启动服务
   - 在KOOK中发送测试消息
   - 确认能正常转发到目标平台

---

## 🆕 新功能使用指南

### 使用3步配置向导

首次启动时会自动进入向导，也可以手动进入：

1. 点击左侧菜单"配置向导"
2. 按照页面提示操作
3. 3步即可完成配置

### 使用Chrome扩展导入Cookie

1. 安装扩展：
   ```
   - 打开Chrome
   - 访问 chrome://extensions/
   - 开启"开发者模式"
   - 加载 chrome-extension 文件夹
   ```

2. 导出Cookie：
   ```
   - 在KOOK网页版登录
   - 点击扩展图标
   - Cookie自动导入！
   ```

### 使用可视化映射编辑器

1. 进入"频道映射"页面
2. 左侧点击KOOK频道
3. 右侧点击目标Bot
4. 自动创建映射（会显示连线）
5. 点击"保存映射"

### 使用过滤规则测试

1. 进入"过滤规则"页面
2. 切换到"测试过滤"标签
3. 输入测试消息
4. 点击"运行测试"
5. 查看是否会被拦截

---

## ⚠️ 注意事项

### 重要变更

1. **最低系统要求**
   - Windows: Windows 10 x64 或更高
   - macOS: macOS 10.15 或更高
   - Linux: Ubuntu 20.04 或更高

2. **端口使用**
   - API端口：9527（不变）
   - 图床端口：9528（不变）

3. **数据目录**
   - 位置：`~/Documents/KookForwarder/data`
   - 确保有足够的磁盘空间

### 已知问题

1. **Chrome扩展在某些情况下可能无法自动导入**
   - 解决方法：使用"手动粘贴Cookie"功能

2. **首次启动可能需要较长时间**
   - 原因：需要下载Chromium浏览器
   - 耐心等待，只需一次

3. **某些Linux发行版可能缺少依赖**
   - 运行：`sudo apt-get install libgbm1 libasound2`

---

## 🐛 问题反馈

如果遇到问题，请：

1. **查看日志**
   ```
   位置：~/Documents/KookForwarder/data/logs/
   ```

2. **常见问题FAQ**
   - 查看 `docs/faq.md`

3. **GitHub Issues**
   - 提交问题：https://github.com/your-repo/CSBJJWT/issues

4. **Discord社区**
   - 加入讨论：[Discord链接]

---

## 📚 文档资源

- [快速入门教程](docs/tutorials/01-quick-start.md)
- [Cookie获取指南](docs/tutorials/02-cookie-guide.md)
- [Discord配置教程](docs/tutorials/03-discord-webhook.md)
- [优化总结报告](OPTIMIZATION_SUMMARY.md)

---

## 🙏 致谢

感谢所有用户的支持和反馈！v15.0.0是一个重大更新，我们投入了大量精力进行优化。

**主要改进**：
- 10个重大优化项目
- 15000+行新增代码
- 50+个文件修改
- 3个完整教程

**效果**：
- 配置时间大幅缩短
- 成功率大幅提升
- 功能大幅增强

---

**升级建议**：强烈推荐所有用户升级到v15.0.0！

**升级风险**：低（自动数据迁移，兼容旧版本配置）

**升级收益**：高（大幅提升易用性和功能性）

---

🎉 **祝您使用愉快！**

如有任何问题，欢迎随时反馈。
