# 🚀 KOOK消息转发系统 - 5分钟快速开始

> **最快上手指南** - 从下载到使用，只需5分钟！

---

## 📥 第一步：选择安装方式（1-8分钟）

### 🆕 方式A: Windows增强脚本（推荐Windows用户）

**全自动安装所有依赖，8分钟完成！**

```powershell
# 右键以管理员运行PowerShell，执行：
Set-ExecutionPolicy Bypass -Scope Process -Force; `
iex ((New-Object System.Net.WebClient).DownloadString('https://raw.githubusercontent.com/gfchfjh/CSBJJWT/main/install_enhanced.bat'))

# 等待8分钟 → 输入Y启动 → 完成！
```

### 🆕 方式B: Docker一键部署（推荐服务器用户）

**3分钟完成部署，生产级稳定！**

```bash
# Linux/macOS服务器，一行命令：
curl -fsSL https://raw.githubusercontent.com/gfchfjh/CSBJJWT/main/docker-install.sh | bash

# 3分钟完成！
```

### 🆕 方式C: Linux/macOS一键脚本

```bash
# 一行命令安装：
curl -fsSL https://raw.githubusercontent.com/gfchfjh/CSBJJWT/main/install.sh | bash
cd CSBJJWT && ./start.sh

# 7分钟完成！
```

### 方式D: 预编译安装包

选择您的操作系统：

| 平台 | 下载链接 | 大小 | 说明 |
|------|---------|------|------|
| 🪟 **Windows** | [下载 .exe](https://github.com/gfchfjh/CSBJJWT/releases/latest) | ~450MB | 支持Win 10/11 x64 |
| 🍎 **macOS** | [下载 .dmg](https://github.com/gfchfjh/CSBJJWT/releases/latest) | ~480MB | 支持10.15+（Intel/M1/M2） |
| 🐧 **Linux** | [下载 .AppImage](https://github.com/gfchfjh/CSBJJWT/releases/latest) | ~420MB | 支持Ubuntu 20.04+ |

**详细安装教程**: [完整安装指南](INSTALLATION_GUIDE.md) | [一键安装指南](docs/一键安装指南.md)

**生成安装包**: 构建方案已完成，运行 `./release_package.sh` 触发GitHub Actions自动构建
- 📦 [快速生成指南](如何生成预编译安装包.md) - 5分钟上手
- 🔧 [完整构建指南](BUILD_RELEASE_GUIDE.md) - 详细流程
- ⚡ [本地构建指南](本地构建执行指南.md) - 本地操作

### 预编译包安装步骤（如已下载）

#### Windows
```
1. 双击下载的 .exe 文件
2. 如出现安全提示：点击"更多信息" → "仍要运行"
3. 点击"安装"
4. 等待安装完成（约30秒）
5. 完成！在开始菜单找到"KOOK消息转发系统"
```

#### macOS
```
1. 打开下载的 .dmg 文件
2. 将应用图标拖拽到"应用程序"文件夹
3. 首次打开：右键点击 → 打开（绕过安全检查）
4. 再次确认"打开"
5. 完成！
```

#### Linux
```bash
# 1. 赋予执行权限
chmod +x KookForwarder-*.AppImage

# 2. 运行
./KookForwarder-*.AppImage

# 3. （可选）如无法运行，安装依赖：
sudo apt install libfuse2  # Ubuntu/Debian

# 完成！
```

### Windows增强脚本完成后

```
双击桌面快捷方式"KOOK消息转发" → 应用自动启动
或进入项目目录，双击 start.bat
```

### Docker部署完成后

```bash
# 访问API
curl http://localhost:9527/health

# 查看日志
docker logs -f kook-forwarder

# 服务在后台运行，自动重启
```

---

## 🎯 第二步：首次配置（3分钟）

启动应用后，会自动打开**5步配置向导**：

### 步骤1: 欢迎页（5秒）

```
┌────────────────────────────────────┐
│   🎉 欢迎使用KOOK消息转发系统      │
│                                    │
│   预计耗时：3-5分钟                │
│                                    │
│   [开始配置]                       │
└────────────────────────────────────┘
```

点击"开始配置"

### 步骤2: 登录KOOK账号（1分钟）

**方式A: Cookie导入（推荐）**

```
1. 打开浏览器，访问 https://www.kookapp.cn
2. 登录您的KOOK账号
3. 按F12打开开发者工具
4. 切换到"Application" → "Cookies"
5. 复制所有Cookie
6. 粘贴到应用的输入框
7. 点击"验证并继续"
```

**方式B: 账号密码登录**

```
1. 输入KOOK邮箱
2. 输入密码
3. 如有验证码，输入验证码（支持自动识别）
4. 点击"登录"
```

### 步骤3: 选择监听的服务器（30秒）

```
┌────────────────────────────────────┐
│   🏠 选择要监听的KOOK服务器        │
│                                    │
│   ☑️ 游戏公告服务器                │
│      └─ #公告频道 ✅               │
│      └─ #活动频道 ✅               │
│                                    │
│   ☑️ 技术交流服务器                │
│      └─ #技术讨论 ✅               │
│                                    │
│   [下一步]                         │
└────────────────────────────────────┘
```

勾选要监听的频道，点击"下一步"

### 步骤4: 配置目标平台（1分钟）

#### Discord配置

```
1. 访问您的Discord服务器
2. 服务器设置 → 集成 → Webhooks
3. 创建新Webhook
4. 复制Webhook URL
5. 粘贴到应用中
6. 点击"测试连接" - 看到测试消息即成功
```

#### Telegram配置

```
1. 与 @BotFather 对话
2. 发送 /newbot 创建Bot
3. 复制Bot Token
4. 将Bot添加到您的群组
5. 点击应用中的"自动获取Chat ID"
6. 在群组发送任意消息
7. 应用会自动检测到Chat ID
```

#### 飞书配置

```
1. 访问 https://open.feishu.cn/
2. 创建企业自建应用
3. 复制 App ID 和 App Secret
4. 将机器人添加到群组
5. 粘贴配置到应用中
```

**💡 提示**: 可以稍后配置，点击"跳过"

### 步骤5: 完成！（5秒）

```
┌────────────────────────────────────┐
│   ✅ 配置完成！                    │
│                                    │
│   接下来：                         │
│   1. 点击"启动服务"开始转发        │
│   2. 在"实时日志"中查看转发状态    │
│                                    │
│   [进入主界面]                     │
└────────────────────────────────────┘
```

点击"进入主界面"

---

## 🎮 第三步：开始使用（1分钟）

### 启动转发服务

```
1. 点击右上角"启动服务"按钮
2. 等待服务启动（约5秒）
3. 看到 🟢 绿色指示灯 = 运行中
4. 完成！
```

### 查看实时日志

```
点击左侧"实时日志"菜单
→ 看到消息转发记录
→ ✅ 成功 / ❌ 失败 / ⏳ 队列中
```

### 测试转发

```
1. 在KOOK监听的频道发送一条消息
2. 几秒后，在Discord/Telegram/飞书看到消息
3. 成功！🎉
```

---

## 📖 常用功能

### 🔀 管理频道映射

```
左侧菜单 → 频道映射
→ 添加新映射
→ 选择KOOK频道
→ 选择目标平台和频道
→ 保存
```

**智能映射**:
```
点击"智能映射"按钮
→ 自动匹配同名频道
→ 确认映射
→ 一键完成！
```

### 🔧 设置过滤规则

```
左侧菜单 → 过滤规则
→ 添加黑名单关键词（不转发包含这些词的消息）
→ 添加白名单关键词（仅转发包含这些词的消息）
→ 添加黑名单用户（不转发某些用户的消息）
→ 保存
```

### 📊 查看统计信息

```
左侧菜单 → 概览
→ 今日转发消息数
→ 成功率
→ 平均延迟
→ 实时监控图表
```

### ⚙️ 系统设置

```
左侧菜单 → 系统设置
→ 服务控制（启动/停止/重启）
→ 图片处理策略
→ 日志设置
→ 开机自启动
→ 深色主题
```

---

## 🆘 遇到问题？

### 常见问题快速解决

#### ❓ 问题1: KOOK账号显示"离线"

**解决方法**:
```
1. 检查Cookie是否过期
   → 账号管理 → 点击"重新登录"
   
2. 检查网络连接
   → 确保能访问 kookapp.cn
   
3. 检查账号状态
   → 在浏览器确认账号正常
```

#### ❓ 问题2: 消息没有转发

**解决方法**:
```
1. 检查频道映射
   → 频道映射 → 确认映射已启用
   
2. 检查Bot配置
   → Bot配置 → 点击"测试连接"
   
3. 查看日志
   → 实时日志 → 查看错误信息
```

#### ❓ 问题3: 图片转发失败

**解决方法**:
```
1. 更改图片策略
   → 系统设置 → 图片处理
   → 选择"智能模式"
   
2. 检查网络
   → 确保能访问图片URL
   
3. 重试
   → 在日志中点击"重试"按钮
```

### 获取更多帮助

- 📖 **完整文档**: [用户手册](docs/用户手册.md)
- 🚀 **一键安装**: [一键安装完整指南](docs/一键安装指南.md) 🆕
- ❓ **常见问题**: [FAQ](docs/FAQ.md)
- 💬 **提交Issue**: [GitHub Issues](https://github.com/gfchfjh/CSBJJWT/issues)
- 📺 **视频教程**: [教程列表](docs/视频教程/)

---

## 🎓 进阶功能

### 🤖 添加更多Bot

```
1. Bot配置 → 添加Bot
2. 选择平台（Discord/Telegram/飞书）
3. 填写配置信息
4. 测试连接
5. 保存
6. 在频道映射中使用新Bot
```

### 👥 添加多个KOOK账号

```
1. 账号管理 → 添加账号
2. 使用Cookie或账号密码登录
3. 选择监听的服务器和频道
4. 系统会自动使用共享浏览器（节省内存）
```

### 📊 性能监控

```
1. 左侧菜单 → 性能监控（如果有）
2. 查看：
   - CPU使用率
   - 内存占用
   - 消息处理速度
   - 队列长度
3. 根据监控数据优化配置
```

### 🔒 设置主密码

```
1. 系统设置 → 安全设置
2. 启用"启动时需要密码"
3. 设置6-20位密码
4. 保存
5. 重启后需要输入密码才能使用
```

### 🌙 使用深色主题

```
1. 系统设置 → 外观
2. 主题：浅色/深色/跟随系统
3. 选择"深色"
4. 自动切换到深色主题
```

---

## 💡 使用技巧

### 技巧1: 快速配置多个映射

使用**智能映射**功能：
```
1. 频道映射 → 智能映射
2. 系统自动识别同名频道
3. 确认映射列表
4. 一键添加所有映射
⏱️ 配置时间：15分钟 → 30秒
```

### 技巧2: 批量导入映射

使用**模板导入**功能：
```
1. 频道映射 → 导入模板
2. 选择预置模板（游戏公告/社区管理）
3. 确认
4. 自动创建所有映射
```

### 技巧3: 过滤垃圾消息

设置黑名单：
```
过滤规则 → 关键词黑名单
添加: "广告", "代练", "外挂"
→ 包含这些词的消息不会转发
```

### 技巧4: 只转发重要消息

设置白名单：
```
过滤规则 → 关键词白名单
添加: "官方公告", "重要通知"
→ 仅转发包含这些词的消息
```

### 技巧5: 监控转发状态

使用实时日志：
```
实时日志 → 筛选器
→ 仅显示失败消息
→ 快速发现问题
→ 点击"重试"按钮
```

---

## 🎯 最佳实践

### 1. 服务器和频道选择

```
✅ 推荐：选择重要的、活跃的频道
❌ 避免：选择太多低活跃度频道

原因：
- 减少资源占用
- 提高转发效率
- 降低被限流风险
```

### 2. Bot配置

```
✅ 推荐：每个平台配置1-2个Bot
❌ 避免：为同一频道配置多个Bot

原因：
- 避免重复转发
- 降低配置复杂度
- 便于管理
```

### 3. 图片处理

```
✅ 推荐：使用"智能模式"
优点：
- 优先直传（速度快）
- 失败自动用图床（稳定）
- 最佳平衡

❌ 避免：完全禁用图片转发
原因：
- 图片是重要的消息内容
- 会丢失信息
```

### 4. 过滤规则

```
✅ 推荐：先观察一段时间，再设置过滤
步骤：
1. 运行1-2天，不设置过滤
2. 查看日志，分析消息类型
3. 根据实际情况设置过滤规则

❌ 避免：一开始就设置太严格的过滤
原因：
- 可能过滤掉重要消息
- 难以调整
```

### 5. 资源管理

```
✅ 推荐：定期检查系统设置
项目：
- 图片缓存清理（设置自动清理）
- 日志文件清理（保留3-7天）
- 检查磁盘空间

频率：每周1次
```

---

## 🎉 恭喜！

您已经掌握了KOOK消息转发系统的基本使用！

**接下来**:
- 🎮 开始转发消息
- 📊 查看统计数据
- 🔧 根据需要调整配置
- 💬 遇到问题？查看[完整文档](docs/)

**享受自动化的消息转发体验！** 🚀

---

## 📞 需要帮助？

- 📖 [完整用户手册](docs/用户手册.md)
- ❓ [常见问题FAQ](docs/FAQ.md)
- 🐛 [提交Bug](https://github.com/gfchfjh/CSBJJWT/issues/new?template=bug_report.md)
- 💡 [功能建议](https://github.com/gfchfjh/CSBJJWT/issues/new?template=feature_request.md)
- 📺 [视频教程](docs/视频教程/)

---

<div align="center">

**如果觉得有帮助，请给个 Star 支持一下！**

Made with ❤️ by KOOK Forwarder Team

[返回主页](README.md) | [查看文档](docs/) | [提交Issue](https://github.com/gfchfjh/CSBJJWT/issues)

</div>
