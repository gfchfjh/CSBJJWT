# KOOK 消息转发系统 - 傻瓜式安装指南

**适合人群**：完全不懂编程的用户  
**所需时间**：20-30 分钟  
**操作方式**：复制粘贴命令即可

---

## ⚠️ 开始之前

### 必须先安装这3个软件

#### 1. Python（必装）
1. 访问：https://www.python.org/downloads/
2. 点击黄色按钮 "Download Python 3.13.x"
3. 下载后双击安装
4. **⚠️ 重要**：勾选 "Add Python to PATH"（在安装界面底部）
5. 点击 "Install Now"
6. 等待安装完成

#### 2. Node.js（必装）
1. 访问：https://nodejs.org/
2. 下载左边的 "LTS" 版本（推荐版本）
3. 下载后双击安装
4. 一路点击 "下一步"
5. 等待安装完成

#### 3. Git（必装）
1. 访问：https://git-scm.com/download/win
2. 会自动下载，双击安装
3. 一路点击 "下一步"（默认选项即可）
4. 等待安装完成

**⚠️ 安装完成后，必须重启电脑或至少关闭所有命令行窗口！**

---

## 📝 第一步：打开命令行

### 方法1（推荐）：
1. 按键盘上的 `Win + R`
2. 输入 `cmd`
3. 按回车键

### 方法2：
1. 点击开始菜单
2. 搜索 "cmd" 或 "命令提示符"
3. 点击打开

---

## 📥 第二步：下载项目（复制粘贴以下命令）

**在命令行中，一行一行复制粘贴以下命令，每行后按回车：**

```cmd
cd %USERPROFILE%\Desktop
```
*这会切换到您的桌面目录*

```cmd
git clone https://github.com/gfchfjh/CSBJJWT.git
```
*这会下载项目（可能需要1-3分钟）*

```cmd
cd CSBJJWT
```
*进入项目目录*

**✅ 如果看到类似 `C:\Users\你的用户名\Desktop\CSBJJWT>` 就说明成功了**

---

## 🔧 第三步：安装后端（复制粘贴以下命令）

**继续在同一个命令行窗口中，一行一行复制粘贴：**

```cmd
cd backend
```

```cmd
python -m venv venv
```
*创建虚拟环境（可能需要30秒）*

```cmd
venv\Scripts\activate.bat
```
*激活虚拟环境（命令行前面会出现 (venv)）*

```cmd
python -m pip install --upgrade pip
```
*升级 pip 工具*

```cmd
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```
*安装后端依赖（可能需要5-10分钟）*

**⚠️ 如果这步报错，改用这个命令：**
```cmd
pip install -r requirements.txt
```

```cmd
playwright install chromium
```
*安装浏览器（可能需要2-3分钟）*

**✅ 看到 "Chromium ... downloaded" 就说明成功了**

```cmd
cd ..
```
*返回上一级目录*

---

## 🎨 第四步：安装前端（复制粘贴以下命令）

**继续在同一个命令行窗口中：**

```cmd
cd frontend
```

```cmd
npm install --legacy-peer-deps
```
*安装前端依赖（可能需要3-5分钟）*

**⚠️ 如果这步很慢，按 Ctrl+C 停止，然后用这个命令：**
```cmd
npm install --legacy-peer-deps --registry=https://registry.npmmirror.com
```

```cmd
npm run build
```
*编译前端（可能需要2-3分钟）*

**✅ 看到 "build complete" 或类似信息就说明成功了**

```cmd
cd ..
```
*返回到项目根目录*

---

## 🚀 第五步：创建启动脚本

### 方法1：自动创建（推荐）

**在命令行中复制粘贴这个命令：**

```cmd
(echo @echo off && echo title KOOK 消息转发系统 && echo echo ======================================== && echo echo KOOK 消息转发系统正在启动... && echo echo ======================================== && echo echo. && echo cd backend && echo call venv\Scripts\activate.bat && echo echo [1/2] 正在启动后端服务... && echo echo 后端地址: http://127.0.0.1:9527 && echo echo. && echo start /MIN cmd /k "python -m app.main" && echo echo [2/2] 等待后端启动... && echo timeout /t 15 /nobreak ^>nul && echo echo. && echo echo ======================================== && echo echo 启动完成！正在打开浏览器... && echo echo ======================================== && echo echo. && echo start http://127.0.0.1:9527 && echo echo 提示：关闭后端窗口将停止服务 && echo echo 如果浏览器没有自动打开，请手动访问: && echo echo http://127.0.0.1:9527 && echo echo. && echo pause) > 启动KOOK系统.bat
```

**✅ 这会在当前目录创建一个 `启动KOOK系统.bat` 文件**

### 方法2：手动创建

1. 在桌面的 CSBJJWT 文件夹上右键
2. 选择 "新建" → "文本文档"
3. 重命名为 `启动KOOK系统.bat`（注意删除 .txt 后缀）
4. 右键点击这个文件，选择 "编辑"
5. 复制粘贴以下内容：

```batch
@echo off
title KOOK 消息转发系统
echo ========================================
echo KOOK 消息转发系统正在启动...
echo ========================================
echo.

cd backend
call venv\Scripts\activate.bat

echo [1/2] 正在启动后端服务...
echo 后端地址: http://127.0.0.1:9527
echo.

start /MIN cmd /k "python -m app.main"

echo [2/2] 等待后端启动...
timeout /t 15 /nobreak >nul

echo.
echo ========================================
echo 启动完成！正在打开浏览器...
echo ========================================
echo.

start http://127.0.0.1:9527

echo 提示：关闭后端窗口将停止服务
echo 如果浏览器没有自动打开，请手动访问:
echo http://127.0.0.1:9527
echo.
pause
```

6. 保存并关闭

---

## ✅ 第六步：启动使用

### 方法1：双击启动（最简单）

1. 在桌面找到 `CSBJJWT` 文件夹
2. 双击打开
3. 找到 `启动KOOK系统.bat` 文件
4. 双击运行
5. 会自动打开浏览器
6. 开始使用！

### 方法2：用命令启动

在命令行中输入：
```cmd
启动KOOK系统.bat
```

### 使用过程中

1. **后端窗口**（黑色命令行窗口）：
   - ⚠️ **不要关闭**这个窗口！
   - 最小化即可
   - 关闭它会停止服务

2. **浏览器**：
   - 自动打开 http://127.0.0.1:9527
   - 如果没有自动打开，手动打开浏览器，输入这个地址

3. **首次使用**：
   - 设置管理员密码
   - 按照向导配置

---

## 🛑 如何停止服务

### 方法1（推荐）：
1. 找到最小化的黑色命令行窗口
2. 点击进入窗口
3. 按键盘上的 `Ctrl + C`
4. 会提示 "终止批处理操作吗(Y/N)?"
5. 输入 `Y` 并按回车

### 方法2：
直接关闭所有命令行窗口

### 方法3：
```cmd
taskkill /F /IM python.exe
```

---

## 🔄 下次如何使用

**非常简单！只需要：**

1. 找到桌面上的 `CSBJJWT` 文件夹
2. 双击 `启动KOOK系统.bat`
3. 等待浏览器打开
4. 开始使用！

**就这么简单！不需要重新安装任何东西！**

---

## ❌ 常见错误处理

### 错误1："不是内部或外部命令"

**原因**：Python 或 Node.js 没有正确安装

**解决方法**：
1. 重新安装 Python 和 Node.js
2. **一定要**勾选 "Add to PATH"
3. 重启电脑
4. 重新开始

### 错误2："端口被占用"

**完整错误信息**：
```
Address already in use
```

**解决方法（复制粘贴这个命令）**：
```cmd
netstat -ano | findstr :9527
```

会显示类似：
```
TCP    127.0.0.1:9527    0.0.0.0:0    LISTENING    12345
```

记住最后的数字（例如 12345），然后：
```cmd
taskkill /F /PID 12345
```
*把 12345 替换成您看到的数字*

### 错误3："pip 安装失败"

**解决方法（复制粘贴）**：
```cmd
cd %USERPROFILE%\Desktop\CSBJJWT\backend
venv\Scripts\activate.bat
pip install --upgrade pip
pip install fastapi uvicorn playwright redis aioredis sqlalchemy aiosqlite loguru
playwright install chromium
```

### 错误4："npm 安装失败"

**解决方法（复制粘贴）**：
```cmd
cd %USERPROFILE%\Desktop\CSBJJWT\frontend
npm cache clean --force
npm install --legacy-peer-deps --registry=https://registry.npmmirror.com
```

### 错误5："venv\Scripts\activate.bat 不是内部或外部命令"

**原因**：虚拟环境创建失败

**解决方法（复制粘贴）**：
```cmd
cd %USERPROFILE%\Desktop\CSBJJWT\backend
python -m venv venv --clear
venv\Scripts\activate.bat
```

---

## 🆘 完全失败了怎么办？

### 方案A：删除重来

1. 删除桌面上的 `CSBJJWT` 文件夹
2. 从"第一步"重新开始

### 方案B：使用预编译版本

1. 访问：https://github.com/gfchfjh/CSBJJWT/releases
2. 下载最新的 Windows 版本
3. 解压后直接运行（但可能有 bug）

### 方案C：寻求帮助

提交问题到：https://github.com/gfchfjh/CSBJJWT/issues

需要提供：
- Windows 版本
- 错误截图
- 错误信息完整内容

---

## 📞 需要帮助时

### 收集信息（复制粘贴这些命令）

```cmd
echo ===== 系统信息 ===== > 诊断信息.txt
systeminfo | findstr /C:"OS Name" /C:"OS Version" >> 诊断信息.txt
echo. >> 诊断信息.txt
echo ===== Python 版本 ===== >> 诊断信息.txt
python --version >> 诊断信息.txt
echo. >> 诊断信息.txt
echo ===== Node.js 版本 ===== >> 诊断信息.txt
node --version >> 诊断信息.txt
echo. >> 诊断信息.txt
echo ===== npm 版本 ===== >> 诊断信息.txt
npm --version >> 诊断信息.txt
echo. >> 诊断信息.txt
echo ===== 端口占用情况 ===== >> 诊断信息.txt
netstat -ano | findstr :9527 >> 诊断信息.txt
echo 诊断信息已保存到 诊断信息.txt 文件
notepad 诊断信息.txt
```

这会自动生成一个诊断文件并打开，您可以把内容发给技术支持。

---

## ✅ 成功标志

当您完成所有步骤后，应该看到：

1. ✅ 浏览器自动打开
2. ✅ 显示 KOOK 消息转发系统的登录页面
3. ✅ 可以设置管理员密码
4. ✅ 可以看到系统主界面

**恭喜！您已成功安装！** 🎉

---

## 📋 完整命令速查表

**如果您想一次性复制所有命令（不推荐新手）**

```cmd
cd %USERPROFILE%\Desktop
git clone https://github.com/gfchfjh/CSBJJWT.git
cd CSBJJWT
cd backend
python -m venv venv
venv\Scripts\activate.bat
python -m pip install --upgrade pip
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
playwright install chromium
cd ..\frontend
npm install --legacy-peer-deps
npm run build
cd ..
```

**然后创建并运行启动脚本**

---

**记住：慢慢来，一步一步做，看到 ✅ 再进行下一步！**

**祝您使用愉快！** 🎉
