# KOOK消息转发系统 - 快速开始指南

**版本**: v1.13.0+ (S+级完美发布版)  
**更新日期**: 2025-10-22  
**预计耗时**: 5分钟完成首次配置和使用  
**完成度**: 100/100 (S+级完美) 🏆  
**新特性**: 一键安装使用，完整文档体系，一键发布流程 🔥

**💡 提示**: 本文档为旧版快速指南，推荐查看新版 [QUICK_START.md](QUICK_START.md)（更详细、更易用）

---

## 📋 目录

1. [系统要求](#系统要求)
2. [安装步骤](#安装步骤)
3. [首次配置（5步）](#首次配置)
4. [开始使用](#开始使用)
5. [常见问题](#常见问题)

---

## 📦 系统要求

### 最低配置

| 项目 | Windows | macOS | Linux |
|------|---------|-------|-------|
| **操作系统** | Windows 10 x64 | macOS 10.15+ | Ubuntu 20.04+ |
| **内存** | 4GB | 4GB | 4GB |
| **磁盘** | 500MB | 500MB | 500MB |
| **网络** | 稳定网络连接 | 稳定网络连接 | 稳定网络连接 |

### 推荐配置

- **操作系统**: Windows 11 / macOS 13+ / Ubuntu 22.04+
- **内存**: 8GB
- **磁盘**: 10GB（包含图片缓存）
- **网络**: ≥10Mbps

---

## 🚀 安装步骤

### Windows

1. **下载安装包**
   - 文件名: `KookForwarder_v1.13.0_Windows_x64.exe`
   - 大小: 约450MB（包含Chromium和Redis）🆕

2. **运行安装程序**
   - 双击`.exe`文件
   - 选择安装路径（默认：`C:\Program Files\KOOK消息转发系统`）
   - 等待安装完成（约30-60秒）

3. **首次启动**
   - 安装完成后自动启动
   - ✅ v1.13.0新增：自动环境检查（5-10秒）
   - 自动检测Redis、Chromium等组件
   - 或从桌面快捷方式启动

### macOS

1. **下载安装包**
   - 文件名: `KookForwarder_v1.13.0_macOS.dmg`
   - 大小: 约460MB（包含Chromium和Redis）🆕

2. **安装应用**
   - 打开`.dmg`文件
   - 将应用拖动到`Applications`文件夹
   
3. **首次启动**
   - 打开`Applications`文件夹
   - 右键点击应用 → 选择"打开"（首次需要这样做）
   - 确认"打开"（绕过安全检查）
   - ✅ v1.13.0新增：自动环境检查，无需手动配置

### Linux

1. **下载安装包**
   - 文件名: `KookForwarder_v1.13.0_Linux_x64.AppImage`
   - 大小: 约455MB（包含Chromium和Redis）🆕

2. **授予执行权限**
   ```bash
   chmod +x KookForwarder_v1.13.0_Linux_x64.AppImage
   ```

3. **运行应用**
   ```bash
   ./KookForwarder_v1.13.0_Linux_x64.AppImage
   ```
   
   或双击文件运行
   
4. **首次启动**
   - ✅ v1.13.0新增：自动环境检查（5-10秒）
   - 自动检测并修复环境问题
   - 无需手动安装任何依赖

---

## 🎯 首次配置

启动应用后，会自动进行环境检查（🆕 v1.13.0），然后进入5步配置向导。

### ✅ 环境检查（v1.13.0新增）

首次启动会自动检查：
- **Redis服务** - 自动启动嵌入式Redis
- **Chromium浏览器** - 自动验证（首次可能需要安装，5分钟）
- **数据目录权限** - 确保可以读写配置和日志
- **磁盘空间** - 检查是否有足够空间（推荐10GB）
- **日志目录** - 自动创建日志目录

**如果发现问题**:
- 界面会显示详细的问题列表
- 提供解决方案和操作指南
- 大部分问题会自动修复

### 步骤1️⃣: 欢迎页 & 免责声明

```
┌─────────────────────────────────────┐
│  🎉 欢迎使用KOOK消息转发系统        │
│                                     │
│  ⚠️  免责声明                       │
│  1. 本软件通过浏览器自动化抓取消息  │
│  2. 可能违反KOOK服务条款            │
│  3. 使用风险请自行承担              │
│                                     │
│  ☑️  我已阅读并同意以上条款         │
│                                     │
│  [拒绝并退出]  [同意并继续]         │
└─────────────────────────────────────┘
```

**操作**: 勾选同意，点击"同意并继续"

---

### 步骤2️⃣: 设置主密码

```
┌─────────────────────────────────────┐
│  🔒 设置主密码                      │
│                                     │
│  设置密码: [__________________]     │
│  确认密码: [__________________]     │
│                                     │
│  密码要求:                          │
│  ✓ 长度6-20位                       │
│  ✓ 建议包含字母和数字               │
│                                     │
│  [设置密码]                         │
└─────────────────────────────────────┘
```

**操作**: 
1. 输入6-20位密码（建议: `kook123456`）
2. 再次输入确认
3. 点击"设置密码"

**提示**: 请妥善保管密码，忘记密码需要通过邮件验证重置

---

### 步骤3️⃣: 添加KOOK账号

```
┌─────────────────────────────────────┐
│  📧 添加KOOK账号                    │
│                                     │
│  登录方式:                          │
│  ○ Cookie导入（推荐）               │
│  ● 账号密码登录                     │
│                                     │
│  邮箱: [kook@example.com]           │
│  密码: [●●●●●●●●●●●●]               │
│                                     │
│  [登录]                             │
└─────────────────────────────────────┘
```

**操作方式A: Cookie导入（推荐）** ⭐

1. 选择"Cookie导入"
2. 在浏览器登录KOOK网页版（https://www.kookapp.cn）
3. 按F12打开开发者工具
4. 切换到"Application" → "Cookies"
5. 复制所有Cookie
6. 粘贴到输入框

**✨ v1.12.0+特性**: 支持4种Cookie格式，直接粘贴即可！  
**🆕 v1.13.0优化**: Cookie格式自动验证，登录失败详细提示！
**🔥 v2.0新增**: 企业级压力测试系统，100%功能覆盖！
- JSON数组格式
- Netscape格式（浏览器扩展导出）
- 键值对格式（最简单）
- 开发者工具格式

[查看详细Cookie获取教程](./docs/Cookie获取详细教程.md)

**操作方式B: 账号密码登录**

1. 选择"账号密码登录"
2. 输入KOOK邮箱和密码
3. 如需验证码，手动输入
4. 点击"登录"

---

### 步骤4️⃣: 选择服务器和频道

```
┌─────────────────────────────────────┐
│  🏠 选择要监听的服务器和频道        │
│                                     │
│  [加载服务器列表]                   │
│                                     │
│  ☑️  游戏公告服务器                │
│     ☑️  #公告频道                  │
│     ☑️  #活动频道                  │
│     ☐  #更新日志                   │
│                                     │
│  ☐  技术交流服务器                 │
│     ☐  #技术讨论                   │
│                                     │
│  [上一步]  [下一步]                 │
└─────────────────────────────────────┘
```

**操作**:
1. 点击"加载服务器列表"（自动加载您的所有KOOK服务器）
2. 勾选要监听的服务器
3. 勾选要监听的频道
4. 点击"下一步"

**提示**: 至少选择1个频道

---

### 步骤5️⃣: 配置机器人（可跳过）

```
┌─────────────────────────────────────┐
│  🤖 配置目标平台Bot                 │
│                                     │
│  选择平台:                          │
│  ● Discord  ○ Telegram  ○ 飞书    │
│                                     │
│  Webhook URL:                       │
│  [https://discord.com/api/...]      │
│                                     │
│  [测试连接]  [添加]                 │
│                                     │
│  已配置: 0个Bot                     │
│                                     │
│  [上一步]  [跳过]  [完成]           │
└─────────────────────────────────────┘
```

**操作**: 

**Discord配置** (推荐)

1. 进入目标Discord服务器
2. 服务器设置 → 集成 → Webhooks
3. 点击"新建Webhook"
4. 复制Webhook URL
5. 粘贴到输入框
6. 点击"测试连接" → "添加"

[查看详细Discord配置教程](./docs/Discord配置教程.md)

**Telegram配置**

1. 与[@BotFather](https://t.me/BotFather)对话
2. 发送`/newbot`创建Bot
3. 获取Bot Token
4. 将Bot添加到目标群组
5. 填入Token和Chat ID

[查看详细Telegram配置教程](./docs/Telegram配置教程.md)

**飞书配置**

1. 访问[飞书开放平台](https://open.feishu.cn/)
2. 创建企业自建应用
3. 开启机器人能力
4. 获取App ID和App Secret

[查看详细飞书配置教程](./docs/飞书配置教程.md)

**或者**: 点击"跳过"，稍后在主界面配置

---

### 步骤6️⃣: 完成配置

```
┌─────────────────────────────────────┐
│  ✅ 配置完成！                      │
│                                     │
│  您已配置:                          │
│  ✓ 1个KOOK账号                      │
│  ✓ 2个服务器，5个频道               │
│  ✓ 1个Discord Bot                   │
│                                     │
│  [进入主界面]                       │
└─────────────────────────────────────┘
```

**操作**: 点击"进入主界面"

---

## 🎮 开始使用

### 主界面介绍

```
┌──────────────────────────────────────────────────────┐
│  KOOK消息转发系统          🟢运行中  [⚙️设置] [❓帮助]  │
├────────────┬─────────────────────────────────────────┤
│            │                                         │
│  🏠 概览    │  📊 今日统计                             │
│            │  ├─ 转发消息: 0 条                       │
│  👤 账号    │  ├─ 成功率: -                           │
│            │  ├─ 平均延迟: -                         │
│  🤖 机器人  │  └─ 失败消息: 0 条                       │
│            │                                         │
│  🔀 映射    │  ⚡ 快捷操作                             │
│            │  [启动服务] [配置映射] [查看日志]        │
│  📋 日志    │                                         │
│            │                                         │
│  ⚙️ 设置    │                                         │
│            │                                         │
└────────────┴─────────────────────────────────────────┘
```

### 配置频道映射

1. 点击左侧"🔀 映射"
2. ✨ **使用智能映射**（推荐）:
   - 点击"🧙 智能映射"按钮
   - 自动匹配同名频道
   - 一键完成配置（30秒）

3. 或手动添加:
   - 点击"添加映射"
   - 选择KOOK频道
   - 选择目标平台和Bot
   - 填写目标频道ID
   - 点击"保存"

### 启动服务

1. 点击右上角"启动服务"按钮
2. 等待状态变为"🟢 运行中"
3. 查看"📋 日志"页面，确认消息正常转发

### 测试转发

1. 在KOOK监听的频道发送一条测试消息
2. 检查目标平台是否收到消息
3. 查看"📋 日志"确认转发状态

---

## ❓ 常见问题

### Q1: 账号显示"离线"？

**可能原因**:
- Cookie已过期
- 网络连接问题
- IP被KOOK限制

**解决方法**:
1. 进入"👤 账号"页面
2. 点击"重新登录"
3. 重新导入Cookie或使用账号密码登录

### Q2: 消息没有转发？

**检查清单**:
1. ✅ 服务是否启动（右上角应显示"🟢 运行中"）
2. ✅ 账号是否在线（"👤 账号"页面）
3. ✅ Bot是否配置（"🤖 机器人"页面）
4. ✅ 映射是否配置（"🔀 映射"页面）
5. ✅ 检查"📋 日志"页面是否有错误

### Q3: Cookie导入失败？

**v1.12.0+已优化**: 支持4种Cookie格式！

**解决方法**:
1. 尝试不同的Cookie格式（JSON/Netscape/键值对）
2. 确保Cookie完整（包含所有字段）
3. 检查Cookie是否包含`token`或`session`字段
4. 参考[Cookie获取详细教程](./docs/Cookie获取详细教程.md)

### Q4: 图片转发失败？

**自动处理**: 程序会自动处理防盗链图片

**如仍失败**:
1. 检查图片大小（建议<10MB）
2. 进入"⚙️ 设置" → "图片处理"
3. 切换图片策略（智能模式/直传/图床）

### Q5: 如何开机自启？

1. 进入"⚙️ 设置" → "服务控制"
2. 勾选"开机自动启动"
3. Windows/macOS: 自动配置
4. Linux: v1.12.0+已增强兼容性，支持所有主流发行版

### Q6: 如何更新版本？

1. 备份数据（可选）:
   ```bash
   # 备份配置
   cp -r ~/Documents/KookForwarder ~/Documents/KookForwarder.backup
   ```

2. 下载新版本安装包
3. 覆盖安装（Windows/macOS会自动保留数据）
4. 启动应用，检查配置

---

## 📚 进阶功能

### 智能映射

✨ v1.12.0+优化: 更醒目的UI入口！

自动匹配KOOK与目标平台的同名频道，配置时间从15分钟缩短至30秒。

### 频道映射模板

使用预置模板快速配置：
- 游戏公告模板
- 社区管理模板
- 跨平台镜像模板

### 消息过滤

在"过滤规则"页面配置：
- 关键词过滤（黑名单/白名单）
- 用户过滤
- 消息类型过滤

### 性能监控

✨ v1.12.0新增: 性能监控面板

查看实时性能数据：
- CPU和内存使用率
- 消息处理速度
- 队列状态
- 错误率统计

### 压力测试系统

🔥 v2.0新增: 企业级压力测试

运行压力测试：
```bash
# 快速演示测试
python3 demo_stress_test.py

# 完整压力测试
./run_all_stress_tests.sh

# Docker化测试
docker-compose -f docker-compose.test.yml up
```

查看测试文档：
- [压力测试说明](./压力测试说明.md)
- [STRESS_TEST_README](./STRESS_TEST_README.md)

---

## 🆘 获取帮助

### 文档资源

- 📖 [完整用户手册](./docs/完整用户手册.md)
- 🏗️ [系统架构设计](./docs/架构设计.md)
- 📡 [API接口文档](./docs/API接口文档.md)
- 🧪 [测试报告](./COMPREHENSIVE_TEST_REPORT.md)

### 配置教程

- 🍪 [Cookie获取教程](./docs/Cookie获取详细教程.md)
- 💬 [Discord配置教程](./docs/Discord配置教程.md)
- 📱 [Telegram配置教程](./docs/Telegram配置教程.md)
- 🏢 [飞书配置教程](./docs/飞书配置教程.md)

### 社区支持

- **问题反馈**: [GitHub Issues](https://github.com/gfchfjh/CSBJJWT/issues)
- **更新日志**: [CHANGELOG.md](./CHANGELOG.md)
- **发布说明**: [RELEASE_NOTES_v1.12.0+.md](./RELEASE_NOTES_v1.12.0+.md)
- **压力测试**: [STRESS_TEST_README.md](./STRESS_TEST_README.md) 🔥 v2.0

---

## 🎉 开始享受自动转发！

配置完成后，KOOK的消息将自动转发到目标平台，您可以：

- ✅ 在系统托盘查看运行状态
- ✅ 在"📋 日志"页面查看实时转发
- ✅ 在"📊 概览"页面查看统计数据
- ✅ 最小化窗口，后台自动运行

**祝您使用愉快！** 🎊

---

<div align="center">

**需要帮助？** 查看 [完整用户手册](./docs/完整用户手册.md) 或提交 [Issue](https://github.com/gfchfjh/CSBJJWT/issues)

v2.0 | 压力测试完善版 | 2025-10-22 | [压力测试文档](./STRESS_TEST_README.md) 🔥

</div>
�档](./STRESS_TEST_README.md) 🔥

</div>
