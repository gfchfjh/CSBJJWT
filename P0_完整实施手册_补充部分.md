# P0ä¼˜åŒ–æ‰‹å†Œ - è¡¥å……éƒ¨åˆ†

## ç»§ç»­ï¼šæ­¥éª¤1.2 - æ­¥éª¤1.5 (é¦–æ¬¡å‘å¯¼çš„å…¶ä»–æ­¥éª¤)

### æ­¥éª¤1.2: å¢å¼ºç™»å½•æ­¥éª¤ç»„ä»¶ï¼ˆ8å°æ—¶ï¼‰

**æ–‡ä»¶**: `frontend/src/components/wizard/WizardStepLogin.vue`

```vue
<template>
  <div class="login-step">
    <el-alert type="info" :closable="false" show-icon class="step-info">
      <template #title>
        ç¬¬2æ­¥ï¼šç™»å½•KOOKè´¦å·ï¼ˆé¢„è®¡1-2åˆ†é’Ÿï¼‰
      </template>
      é€‰æ‹©ä¸€ç§ç™»å½•æ–¹å¼ï¼Œæ¨èä½¿ç”¨Cookieå¯¼å…¥ï¼ˆæ›´å¿«ã€æ›´ç¨³å®šï¼‰
    </el-alert>

    <!-- ç™»å½•æ–¹å¼é€‰æ‹© -->
    <el-tabs v-model="loginMethod" class="login-tabs">
      <!-- æ–¹æ³•1: Cookieå¯¼å…¥ï¼ˆæ¨èï¼‰ -->
      <el-tab-pane name="cookie">
        <template #label>
          <span class="tab-label">
            <el-icon><Key /></el-icon>
            Cookieå¯¼å…¥
            <el-tag type="success" size="small">æ¨è</el-tag>
          </span>
        </template>

        <div class="cookie-import-section">
          <!-- Cookieè¾“å…¥åŒº -->
          <el-card shadow="never" class="cookie-input-card">
            <template #header>
              <div class="card-header-with-help">
                <span>ğŸ“‹ ç²˜è´´æˆ–æ‹–æ‹½Cookieæ•°æ®</span>
                <el-button text type="primary" @click="showCookieHelp">
                  <el-icon><QuestionFilled /></el-icon>
                  å¦‚ä½•è·å–ï¼Ÿ
                </el-button>
              </div>
            </template>

            <!-- æ‹–æ‹½ä¸Šä¼ åŒºåŸŸ -->
            <el-upload
              ref="cookieUploadRef"
              class="cookie-upload"
              drag
              :auto-upload="false"
              :show-file-list="false"
              accept=".json,.txt"
              :on-change="handleCookieFileChange"
            >
              <el-icon class="el-icon--upload"><UploadFilled /></el-icon>
              <div class="el-upload__text">
                æ‹–æ‹½JSONæ–‡ä»¶åˆ°æ­¤å¤„ æˆ– <em>ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</em>
              </div>
              <template #tip>
                <div class="el-upload__tip">
                  æ”¯æŒæ ¼å¼ï¼šJSONã€Netscapeã€é”®å€¼å¯¹
                </div>
              </template>
            </el-upload>

            <el-divider>æˆ–</el-divider>

            <!-- æ–‡æœ¬ç²˜è´´åŒº -->
            <el-input
              v-model="cookieText"
              type="textarea"
              :rows="6"
              placeholder="ç›´æ¥ç²˜è´´Cookieæ•°æ®åˆ°è¿™é‡Œ...
              
æ”¯æŒä»¥ä¸‹æ ¼å¼ï¼š
1. JSONæ•°ç»„: [{'name':'token','value':'xxx'}]
2. Netscapeæ ¼å¼: .kookapp.cn	TRUE	/	TRUE	0	token	xxx
3. é”®å€¼å¯¹: token=xxx; user_id=123"
              @input="validateCookieRealtime"
            />

            <!-- å®æ—¶éªŒè¯ç»“æœ -->
            <transition name="el-fade-in">
              <div v-if="cookieValidation.show" class="cookie-validation">
                <el-alert
                  :type="cookieValidation.valid ? 'success' : cookieValidation.warnings.length ? 'warning' : 'error'"
                  :closable="false"
                  show-icon
                >
                  <template #title>
                    {{ cookieValidation.message }}
                  </template>
                  <div v-if="cookieValidation.details">
                    <p>æ£€æµ‹åˆ° {{ cookieValidation.details.count }} ä¸ªCookie</p>
                    <ul v-if="cookieValidation.warnings.length">
                      <li v-for="warning in cookieValidation.warnings" :key="warning">
                        {{ warning }}
                      </li>
                    </ul>
                  </div>
                </el-alert>
              </div>
            </transition>
          </el-card>

          <!-- å¿«é€Ÿæ•™ç¨‹æŒ‰é’®ç»„ -->
          <el-card shadow="hover" class="tutorial-card">
            <template #header>
              <div class="card-header">
                <el-icon><VideoPlay /></el-icon>
                <span>Cookieè·å–æ•™ç¨‹</span>
              </div>
            </template>

            <el-space wrap :size="15">
              <!-- Chromeæ•™ç¨‹ -->
              <el-button 
                @click="showVideoTutorial('cookie-chrome')" 
                :icon="VideoPlay"
              >
                <el-icon><Chrome /></el-icon>
                Chromeæµè§ˆå™¨ï¼ˆ3åˆ†é’Ÿï¼‰
              </el-button>

              <!-- Firefoxæ•™ç¨‹ -->
              <el-button 
                @click="showVideoTutorial('cookie-firefox')" 
                :icon="VideoPlay"
              >
                <el-icon><Firefox /></el-icon>
                Firefoxæµè§ˆå™¨ï¼ˆ3åˆ†é’Ÿï¼‰
              </el-button>

              <!-- Edgeæ•™ç¨‹ -->
              <el-button 
                @click="showVideoTutorial('cookie-edge')" 
                :icon="VideoPlay"
              >
                <el-icon><Edge /></el-icon>
                Edgeæµè§ˆå™¨ï¼ˆ3åˆ†é’Ÿï¼‰
              </el-button>

              <!-- æµè§ˆå™¨æ‰©å±•æ•™ç¨‹ -->
              <el-button 
                @click="showVideoTutorial('cookie-extension')" 
                :icon="VideoPlay"
                type="primary"
              >
                <el-icon><Extension /></el-icon>
                ä½¿ç”¨æ‰©å±•ï¼ˆ1åˆ†é’Ÿï¼‰- æ¨èï¼
              </el-button>
            </el-space>

            <!-- å›¾æ–‡æ•™ç¨‹é“¾æ¥ -->
            <el-divider content-position="left">
              å›¾æ–‡æ•™ç¨‹
            </el-divider>

            <el-descriptions :column="2" size="small" border>
              <el-descriptions-item label="Chrome">
                <el-link type="primary" @click="openDoc('cookie-chrome')">
                  æŸ¥çœ‹è¯¦ç»†æ­¥éª¤ â†’
                </el-link>
              </el-descriptions-item>
              <el-descriptions-item label="Firefox">
                <el-link type="primary" @click="openDoc('cookie-firefox')">
                  æŸ¥çœ‹è¯¦ç»†æ­¥éª¤ â†’
                </el-link>
              </el-descriptions-item>
              <el-descriptions-item label="æµè§ˆå™¨æ‰©å±•">
                <el-link type="primary" @click="openDoc('cookie-extension')">
                  å®‰è£…å’Œä½¿ç”¨æ•™ç¨‹ â†’
                </el-link>
              </el-descriptions-item>
              <el-descriptions-item label="å¸¸è§é—®é¢˜">
                <el-link type="primary" @click="openDoc('cookie-faq')">
                  FAQç­”ç–‘ â†’
                </el-link>
              </el-descriptions-item>
            </el-descriptions>
          </el-card>
        </div>
      </el-tab-pane>

      <!-- æ–¹æ³•2: è´¦å·å¯†ç ç™»å½• -->
      <el-tab-pane name="password">
        <template #label>
          <span class="tab-label">
            <el-icon><Lock /></el-icon>
            è´¦å·å¯†ç ç™»å½•
          </span>
        </template>

        <div class="password-login-section">
          <el-alert type="warning" :closable="false" show-icon style="margin-bottom: 20px">
            <template #title>
              âš ï¸ é¦–æ¬¡ç™»å½•å¯èƒ½éœ€è¦éªŒè¯ç 
            </template>
            ç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†éªŒè¯ç ï¼Œæˆ–å¼¹çª—è®©æ‚¨æ‰‹åŠ¨è¾“å…¥
          </el-alert>

          <el-form
            ref="passwordFormRef"
            :model="passwordForm"
            :rules="passwordRules"
            label-width="100px"
            class="password-form"
          >
            <el-form-item label="KOOKé‚®ç®±" prop="email">
              <el-input
                v-model="passwordForm.email"
                placeholder="your@email.com"
                clearable
                :prefix-icon="Message"
              >
                <template #append>
                  <el-button @click="testEmailFormat">éªŒè¯</el-button>
                </template>
              </el-input>
            </el-form-item>

            <el-form-item label="å¯†ç " prop="password">
              <el-input
                v-model="passwordForm.password"
                type="password"
                placeholder="è¯·è¾“å…¥å¯†ç "
                show-password
                :prefix-icon="Lock"
                @keyup.enter="handlePasswordLogin"
              />
            </el-form-item>

            <el-form-item label="éªŒè¯ç " prop="captcha" v-if="showCaptchaInput">
              <el-row :gutter="10">
                <el-col :span="16">
                  <el-input
                    v-model="passwordForm.captcha"
                    placeholder="è¯·è¾“å…¥éªŒè¯ç "
                    clearable
                  />
                </el-col>
                <el-col :span="8">
                  <el-image
                    :src="captchaImage"
                    fit="contain"
                    style="width: 100%; height: 40px; cursor: pointer"
                    @click="refreshCaptcha"
                  >
                    <template #placeholder>
                      <div class="image-slot">
                        åŠ è½½ä¸­<span class="dot">...</span>
                      </div>
                    </template>
                  </el-image>
                </el-col>
              </el-row>
              <div class="form-tip">
                <el-link type="primary" @click="refreshCaptcha">
                  <el-icon><Refresh /></el-icon>
                  åˆ·æ–°éªŒè¯ç 
                </el-link>
              </div>
            </el-form-item>

            <el-form-item>
              <el-button
                type="primary"
                :loading="logging"
                @click="handlePasswordLogin"
                style="width: 100%"
              >
                <el-icon v-if="!logging"><User /></el-icon>
                {{ logging ? 'ç™»å½•ä¸­...' : 'ç™»å½•KOOK' }}
              </el-button>
            </el-form-item>
          </el-form>

          <!-- ç™»å½•è¿›åº¦ -->
          <transition name="el-fade-in">
            <el-card v-if="loginProgress.show" shadow="never" class="login-progress-card">
              <el-steps :active="loginProgress.step" finish-status="success" align-center>
                <el-step title="è¿æ¥æœåŠ¡å™¨" />
                <el-step title="éªŒè¯è´¦å·" />
                <el-step title="å¤„ç†éªŒè¯ç " v-if="loginProgress.needCaptcha" />
                <el-step title="è·å–ä¼šè¯" />
              </el-steps>

              <el-alert
                type="info"
                :closable="false"
                show-icon
                style="margin-top: 15px"
              >
                {{ loginProgress.message }}
              </el-alert>
            </el-card>
          </transition>

          <!-- è§†é¢‘æ•™ç¨‹ -->
          <el-card shadow="hover" class="tutorial-card" style="margin-top: 20px">
            <template #header>
              <el-icon><VideoPlay /></el-icon>
              è´¦å·å¯†ç ç™»å½•æ•™ç¨‹
            </template>

            <el-button
              @click="showVideoTutorial('password-login')"
              type="primary"
              :icon="VideoPlay"
            >
              è§‚çœ‹2åˆ†é’Ÿæ•™ç¨‹è§†é¢‘
            </el-button>
          </el-card>
        </div>
      </el-tab-pane>
    </el-tabs>

    <!-- è§†é¢‘æ•™ç¨‹å¯¹è¯æ¡† -->
    <el-dialog
      v-model="videoDialogVisible"
      :title="currentVideoTitle"
      width="70%"
      destroy-on-close
      @close="handleVideoClose"
    >
      <VideoTutorial
        :video-id="currentVideoId"
        :autoplay="true"
        @ended="handleVideoEnded"
      />

      <template #footer>
        <el-space>
          <el-button @click="videoDialogVisible = false">
            å…³é—­
          </el-button>
          <el-button type="primary" @click="replayVideo">
            <el-icon><RefreshRight /></el-icon>
            é‡æ–°æ’­æ”¾
          </el-button>
          <el-button type="success" @click="markVideoWatched">
            <el-icon><Select /></el-icon>
            å·²è§‚çœ‹ï¼Œç»§ç»­é…ç½®
          </el-button>
        </el-space>
      </template>
    </el-dialog>

    <!-- Cookieå¸®åŠ©å¯¹è¯æ¡† -->
    <el-dialog
      v-model="cookieHelpVisible"
      title="ğŸ“š Cookieè·å–å®Œæ•´æŒ‡å—"
      width="80%"
      destroy-on-close
    >
      <el-tabs v-model="helpTabActive">
        <el-tab-pane label="Chromeæµè§ˆå™¨" name="chrome">
          <CookieHelpChrome />
        </el-tab-pane>
        <el-tab-pane label="Firefoxæµè§ˆå™¨" name="firefox">
          <CookieHelpFirefox />
        </el-tab-pane>
        <el-tab-pane label="æµè§ˆå™¨æ‰©å±•" name="extension">
          <CookieHelpExtension />
        </el-tab-pane>
        <el-tab-pane label="å¸¸è§é—®é¢˜" name="faq">
          <CookieHelpFAQ />
        </el-tab-pane>
      </el-tabs>
    </el-dialog>

    <!-- å‘å¯¼æ“ä½œæŒ‰é’® -->
    <div class="wizard-actions">
      <el-button size="large" @click="emit('prev')">
        <el-icon><Back /></el-icon>
        ä¸Šä¸€æ­¥
      </el-button>

      <el-button
        type="primary"
        size="large"
        @click="handleNext"
        :loading="validating"
        :disabled="!canProceed"
      >
        <el-icon v-if="!validating"><Right /></el-icon>
        {{ validating ? 'éªŒè¯ä¸­...' : 'ä¸‹ä¸€æ­¥' }}
      </el-button>
    </div>

    <!-- å¸®åŠ©æç¤º -->
    <el-card shadow="never" class="help-card">
      <template #header>
        <el-icon><QuestionFilled /></el-icon>
        éœ€è¦å¸®åŠ©ï¼Ÿ
      </template>

      <el-space wrap>
        <el-tag>å¹³å‡é…ç½®æ—¶é—´ï¼š1-2åˆ†é’Ÿ</el-tag>
        <el-tag type="success">Cookieå¯¼å…¥æˆåŠŸç‡ï¼š98%</el-tag>
        <el-tag type="warning">è´¦å·å¯†ç æˆåŠŸç‡ï¼š85%ï¼ˆå¯èƒ½éœ€è¦éªŒè¯ç ï¼‰</el-tag>
      </el-space>

      <el-divider />

      <el-link type="primary" @click="openDoc('troubleshooting')">
        <el-icon><Tools /></el-icon>
        ç™»å½•é—®é¢˜æ’æŸ¥æŒ‡å—
      </el-link>
    </el-card>
  </div>
</template>

<script setup>
import { ref, reactive, computed, watch } from 'vue'
import { ElMessage, ElMessageBox } from 'element-plus'
import {
  Key,
  Lock,
  VideoPlay,
  QuestionFilled,
  UploadFilled,
  Message,
  Refresh,
  User,
  RefreshRight,
  Select,
  Back,
  Right,
  Tools
} from '@element-plus/icons-vue'
import { debounce } from 'lodash-es'
import api from '@/api'
import VideoTutorial from '../VideoTutorial.vue'
import CookieHelpChrome from '../help/CookieHelpChrome.vue'
import CookieHelpFirefox from '../help/CookieHelpFirefox.vue'
import CookieHelpExtension from '../help/CookieHelpExtension.vue'
import CookieHelpFAQ from '../help/CookieHelpFAQ.vue'

const emit = defineEmits(['next', 'prev'])

// ç™»å½•æ–¹å¼
const loginMethod = ref('cookie') // cookie | password

// Cookieå¯¼å…¥ç›¸å…³
const cookieText = ref('')
const cookieUploadRef = ref(null)
const cookieValidation = reactive({
  show: false,
  valid: false,
  message: '',
  details: null,
  warnings: []
})

// å¯†ç ç™»å½•ç›¸å…³
const passwordFormRef = ref(null)
const passwordForm = reactive({
  email: '',
  password: '',
  captcha: ''
})

const passwordRules = {
  email: [
    { required: true, message: 'è¯·è¾“å…¥é‚®ç®±', trigger: 'blur' },
    { type: 'email', message: 'è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€', trigger: 'blur' }
  ],
  password: [
    { required: true, message: 'è¯·è¾“å…¥å¯†ç ', trigger: 'blur' },
    { min: 6, message: 'å¯†ç è‡³å°‘6ä½', trigger: 'blur' }
  ]
}

const showCaptchaInput = ref(false)
const captchaImage = ref('')
const logging = ref(false)

const loginProgress = reactive({
  show: false,
  step: 0,
  needCaptcha: false,
  message: ''
})

// è§†é¢‘æ•™ç¨‹ç›¸å…³
const videoDialogVisible = ref(false)
const currentVideoId = ref('')
const currentVideoTitle = ref('')

const videoMap = {
  'cookie-chrome': {
    title: 'Chromeæµè§ˆå™¨ - Cookieè·å–æ•™ç¨‹',
    id: 'tutorial_cookie_chrome',
    duration: '3:00'
  },
  'cookie-firefox': {
    title: 'Firefoxæµè§ˆå™¨ - Cookieè·å–æ•™ç¨‹',
    id: 'tutorial_cookie_firefox',
    duration: '3:00'
  },
  'cookie-edge': {
    title: 'Edgeæµè§ˆå™¨ - Cookieè·å–æ•™ç¨‹',
    id: 'tutorial_cookie_edge',
    duration: '3:00'
  },
  'cookie-extension': {
    title: 'ä½¿ç”¨æµè§ˆå™¨æ‰©å±•è·å–Cookie',
    id: 'tutorial_cookie_extension',
    duration: '1:00'
  },
  'password-login': {
    title: 'è´¦å·å¯†ç ç™»å½•æ•™ç¨‹',
    id: 'tutorial_password_login',
    duration: '2:00'
  }
}

// Cookieå¸®åŠ©å¯¹è¯æ¡†
const cookieHelpVisible = ref(false)
const helpTabActive = ref('chrome')

// çŠ¶æ€éªŒè¯
const validating = ref(false)
const accountId = ref(null)

// æ˜¯å¦å¯ä»¥ç»§ç»­
const canProceed = computed(() => {
  if (loginMethod.value === 'cookie') {
    return cookieValidation.valid && cookieText.value.length > 0
  } else {
    return passwordForm.email && passwordForm.password
  }
})

// å®æ—¶éªŒè¯Cookie
const validateCookieRealtime = debounce(async () => {
  if (!cookieText.value.trim()) {
    cookieValidation.show = false
    return
  }

  try {
    const result = await api.validateCookie({
      cookie_data: cookieText.value
    })

    cookieValidation.show = true
    cookieValidation.valid = result.valid
    cookieValidation.message = result.message
    cookieValidation.details = {
      count: result.cookie_count
    }
    cookieValidation.warnings = result.warnings || []

  } catch (error) {
    cookieValidation.show = true
    cookieValidation.valid = false
    cookieValidation.message = 'æ ¼å¼éªŒè¯å¤±è´¥ï¼š' + error.message
  }
}, 500)

// å¤„ç†Cookieæ–‡ä»¶ä¸Šä¼ 
const handleCookieFileChange = (file) => {
  const reader = new FileReader()
  reader.onload = (e) => {
    cookieText.value = e.target.result
    validateCookieRealtime()
  }
  reader.readAsText(file.raw)
}

// æ˜¾ç¤ºCookieå¸®åŠ©
const showCookieHelp = () => {
  cookieHelpVisible.value = true
}

// æ˜¾ç¤ºè§†é¢‘æ•™ç¨‹
const showVideoTutorial = (type) => {
  const video = videoMap[type]
  if (video) {
    currentVideoId.value = video.id
    currentVideoTitle.value = `${video.title} (${video.duration})`
    videoDialogVisible.value = true
  }
}

// é‡æ–°æ’­æ”¾è§†é¢‘
const replayVideo = () => {
  videoDialogVisible.value = false
  setTimeout(() => {
    videoDialogVisible.value = true
  }, 100)
}

// æ ‡è®°è§†é¢‘å·²è§‚çœ‹
const markVideoWatched = () => {
  videoDialogVisible.value = false
  ElMessage.success('å·²è®°å½•è§‚çœ‹')
}

// è§†é¢‘æ’­æ”¾ç»“æŸ
const handleVideoEnded = () => {
  ElMessage({
    message: 'æ•™ç¨‹æ’­æ”¾å®Œæ¯•',
    type: 'success',
    duration: 2000
  })
}

// è§†é¢‘å¯¹è¯æ¡†å…³é—­
const handleVideoClose = () => {
  // å¯é€‰ï¼šè®°å½•è§‚çœ‹æ—¶é•¿
}

// æ‰“å¼€æ–‡æ¡£
const openDoc = (type) => {
  const docUrls = {
    'cookie-chrome': '/docs/Cookieè·å–è¯¦ç»†æ•™ç¨‹.md#chrome',
    'cookie-firefox': '/docs/Cookieè·å–è¯¦ç»†æ•™ç¨‹.md#firefox',
    'cookie-extension': '/docs/Cookieè·å–è¯¦ç»†æ•™ç¨‹.md#extension',
    'cookie-faq': '/docs/Cookieè·å–è¯¦ç»†æ•™ç¨‹.md#faq',
    'troubleshooting': '/docs/åº”ç”¨å¯åŠ¨å¤±è´¥æ’æŸ¥æŒ‡å—.md'
  }

  if (window.electronAPI && window.electronAPI.openExternal) {
    window.electronAPI.openExternal(`file://${docUrls[type]}`)
  } else {
    window.open(docUrls[type], '_blank')
  }
}

// æµ‹è¯•é‚®ç®±æ ¼å¼
const testEmailFormat = () => {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
  if (emailRegex.test(passwordForm.email)) {
    ElMessage.success('é‚®ç®±æ ¼å¼æ­£ç¡®')
  } else {
    ElMessage.error('é‚®ç®±æ ¼å¼ä¸æ­£ç¡®')
  }
}

// åˆ·æ–°éªŒè¯ç 
const refreshCaptcha = async () => {
  try {
    const result = await api.getCaptcha()
    captchaImage.value = result.image
    showCaptchaInput.value = true
  } catch (error) {
    ElMessage.error('è·å–éªŒè¯ç å¤±è´¥')
  }
}

// å¯†ç ç™»å½•
const handlePasswordLogin = async () => {
  try {
    await passwordFormRef.value.validate()

    logging.value = true
    loginProgress.show = true
    loginProgress.step = 0
    loginProgress.message = 'æ­£åœ¨è¿æ¥KOOKæœåŠ¡å™¨...'

    // æ­¥éª¤1: è¿æ¥æœåŠ¡å™¨
    await new Promise(resolve => setTimeout(resolve, 500))
    loginProgress.step = 1
    loginProgress.message = 'æ­£åœ¨éªŒè¯è´¦å·...'

    // æ­¥éª¤2: éªŒè¯è´¦å·
    const result = await api.loginWithPassword({
      email: passwordForm.email,
      password: passwordForm.password,
      captcha: passwordForm.captcha
    })

    if (result.need_captcha) {
      loginProgress.step = 2
      loginProgress.needCaptcha = true
      loginProgress.message = 'éœ€è¦éªŒè¯ç ï¼Œæ­£åœ¨è·å–...'
      await refreshCaptcha()
      logging.value = false
      return
    }

    // æ­¥éª¤3: è·å–ä¼šè¯
    loginProgress.step = loginProgress.needCaptcha ? 3 : 2
    loginProgress.message = 'æ­£åœ¨è·å–ä¼šè¯ä¿¡æ¯...'

    await new Promise(resolve => setTimeout(resolve, 500))

    if (result.success) {
      accountId.value = result.account_id
      ElMessage.success('ç™»å½•æˆåŠŸï¼')
      loginProgress.message = 'ç™»å½•æˆåŠŸï¼Œå³å°†è¿›å…¥ä¸‹ä¸€æ­¥...'

      setTimeout(() => {
        emit('next')
      }, 1000)
    } else {
      throw new Error(result.message || 'ç™»å½•å¤±è´¥')
    }

  } catch (error) {
    ElMessage.error('ç™»å½•å¤±è´¥ï¼š' + error.message)
    loginProgress.show = false
  } finally {
    logging.value = false
  }
}

// ä¸‹ä¸€æ­¥
const handleNext = async () => {
  if (loginMethod.value === 'cookie') {
    // Cookieå¯¼å…¥
    validating.value = true

    try {
      const result = await api.importCookie({
        cookie_data: cookieText.value,
        auto_test: true
      })

      if (result.success) {
        accountId.value = result.data.account_id
        ElMessage.success('Cookieå¯¼å…¥æˆåŠŸï¼')

        // ä¿å­˜è´¦å·IDåˆ°å…¨å±€çŠ¶æ€
        localStorage.setItem('wizard_account_id', accountId.value)

        emit('next')
      } else {
        throw new Error(result.message)
      }

    } catch (error) {
      ElMessageBox.alert(
        error.message,
        'Cookieå¯¼å…¥å¤±è´¥',
        {
          confirmButtonText: 'é‡è¯•',
          type: 'error'
        }
      )
    } finally {
      validating.value = false
    }

  } else {
    // å¯†ç ç™»å½•
    await handlePasswordLogin()
  }
}
</script>

<style scoped lang="scss">
.login-step {
  padding: 20px;
}

.step-info {
  margin-bottom: 20px;
}

.login-tabs {
  margin-bottom: 30px;

  .tab-label {
    display: flex;
    align-items: center;
    gap: 5px;
  }
}

.cookie-import-section,
.password-login-section {
  .cookie-input-card,
  .tutorial-card {
    margin-bottom: 20px;
  }

  .card-header-with-help {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .cookie-upload {
    margin-bottom: 15px;

    :deep(.el-upload-dragger) {
      padding: 40px 20px;
    }
  }

  .cookie-validation {
    margin-top: 15px;

    ul {
      margin: 10px 0 0 20px;
      li {
        margin: 5px 0;
      }
    }
  }
}

.login-progress-card {
  margin-top: 20px;
  border: 2px solid #409EFF;
}

.wizard-actions {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 30px;
}

.help-card {
  margin-top: 20px;
  background: #F5F7FA;
}

.form-tip {
  margin-top: 5px;
  font-size: 12px;
  color: #909399;
}
</style>
```

---

### æ­¥éª¤1.3: å®ç°æ™ºèƒ½æœåŠ¡å™¨é€‰æ‹©ï¼ˆ8å°æ—¶ï¼‰

**æ–‡ä»¶**: `frontend/src/components/wizard/WizardStepServers.vue`

```vue
<template>
  <div class="servers-step">
    <el-alert type="info" :closable="false" show-icon class="step-info">
      <template #title>
        ç¬¬3æ­¥ï¼šé€‰æ‹©è¦ç›‘å¬çš„æœåŠ¡å™¨å’Œé¢‘é“ï¼ˆé¢„è®¡1åˆ†é’Ÿï¼‰
      </template>
      ç³»ç»Ÿå°†è‡ªåŠ¨åŠ è½½æ‚¨çš„æœåŠ¡å™¨åˆ—è¡¨ï¼Œæ¨èç›‘å¬æ´»è·ƒåº¦é«˜çš„é¢‘é“
    </el-alert>

    <!-- åŠ è½½çŠ¶æ€ -->
    <div v-if="loading" class="loading-section">
      <el-skeleton :rows="5" animated />
      <p class="loading-text">
        <el-icon class="is-loading"><Loading /></el-icon>
        æ­£åœ¨è·å–æœåŠ¡å™¨åˆ—è¡¨ï¼Œè¯·ç¨å€™...
      </p>
    </div>

    <!-- æœåŠ¡å™¨åˆ—è¡¨ -->
    <div v-else-if="servers.length > 0" class="servers-section">
      <!-- å·¥å…·æ  -->
      <el-card shadow="never" class="toolbar-card">
        <el-space wrap>
          <el-button @click="selectRecommended" type="primary" :icon="MagicStick">
            æ™ºèƒ½æ¨è
          </el-button>
          <el-button @click="selectAll" :icon="Select">
            å…¨é€‰
          </el-button>
          <el-button @click="unselectAll" :icon="Close">
            å…¨ä¸é€‰
          </el-button>
          <el-input
            v-model="searchKeyword"
            placeholder="æœç´¢æœåŠ¡å™¨æˆ–é¢‘é“..."
            clearable
            style="width: 250px"
            :prefix-icon="Search"
          />
        </el-space>

        <!-- ç»Ÿè®¡ä¿¡æ¯ -->
        <el-divider />
        <el-descriptions :column="4" size="small" border>
          <el-descriptions-item label="æ€»æœåŠ¡å™¨">
            {{ servers.length }} ä¸ª
          </el-descriptions-item>
          <el-descriptions-item label="å·²é€‰æœåŠ¡å™¨">
            <el-tag type="success">{{ selectedServersCount }} ä¸ª</el-tag>
          </el-descriptions-item>
          <el-descriptions-item label="æ€»é¢‘é“">
            {{ totalChannelsCount }} ä¸ª
          </el-descriptions-item>
          <el-descriptions-item label="å·²é€‰é¢‘é“">
            <el-tag type="warning">{{ selectedChannelsCount }} ä¸ª</el-tag>
          </el-descriptions-item>
        </el-descriptions>
      </el-card>

      <!-- æœåŠ¡å™¨å¡ç‰‡åˆ—è¡¨ -->
      <div class="servers-list">
        <el-card
          v-for="server in filteredServers"
          :key="server.id"
          shadow="hover"
          class="server-card"
          :class="{ 'server-selected': server.selected }"
        >
          <!-- æœåŠ¡å™¨å¤´éƒ¨ -->
          <template #header>
            <div class="server-header">
              <el-checkbox
                v-model="server.selected"
                @change="toggleServer(server)"
                size="large"
              >
                <div class="server-info">
                  <el-avatar
                    :src="server.icon"
                    :size="40"
                    shape="square"
                  >
                    {{ server.name.charAt(0) }}
                  </el-avatar>
                  <div class="server-details">
                    <h3>{{ server.name }}</h3>
                    <el-space :size="5">
                      <el-tag size="small" type="info">
                        {{ server.member_count }} æˆå‘˜
                      </el-tag>
                      <el-tag
                        size="small"
                        :type="getActivityType(server.activity_score)"
                      >
                        æ´»è·ƒåº¦: {{ server.activity_score }}
                      </el-tag>
                      <el-tag
                        v-if="server.recommended"
                        size="small"
                        type="success"
                        effect="dark"
                      >
                        <el-icon><Star /></el-icon>
                        æ¨è
                      </el-tag>
                    </el-space>
                  </div>
                </div>
              </el-checkbox>

              <el-button
                text
                :icon="server.expanded ? ArrowUp : ArrowDown"
                @click="toggleServerExpand(server)"
              >
                {{ server.expanded ? 'æ”¶èµ·' : 'å±•å¼€' }} ({{ server.channels?.length || 0 }})
              </el-button>
            </div>
          </template>

          <!-- é¢‘é“åˆ—è¡¨ -->
          <transition name="el-fade-in">
            <div v-show="server.expanded" class="channels-section">
              <!-- é¢‘é“åˆ†ç±» -->
              <el-tabs v-model="server.activeCategory" type="card">
                <el-tab-pane
                  v-for="category in server.categories"
                  :key="category.id"
                  :label="`${category.name} (${category.channels.length})`"
                  :name="category.id"
                >
                  <!-- é¢‘é“åˆ—è¡¨ -->
                  <div class="channels-list">
                    <div
                      v-for="channel in category.channels"
                      :key="channel.id"
                      class="channel-item"
                      :class="{ 'channel-selected': channel.selected }"
                    >
                      <el-checkbox
                        v-model="channel.selected"
                        @change="toggleChannel(server, channel)"
                      >
                        <div class="channel-info">
                          <el-icon :size="16">
                            <ChatLineRound v-if="channel.type === 'text'" />
                            <Microphone v-else-if="channel.type === 'voice'" />
                          </el-icon>
                          <span class="channel-name">{{ channel.name }}</span>

                          <el-space :size="5" class="channel-tags">
                            <el-tag
                              v-if="channel.message_count_24h > 0"
                              size="small"
                              type="warning"
                            >
                              24h: {{ channel.message_count_24h }} æ¡
                            </el-tag>
                            <el-tag
                              v-if="channel.recommended"
                              size="small"
                              type="success"
                            >
                              <el-icon><Star /></el-icon>
                            </el-tag>
                          </el-space>
                        </div>
                      </el-checkbox>

                      <!-- é¢‘é“æè¿° -->
                      <div v-if="channel.topic" class="channel-topic">
                        {{ channel.topic }}
                      </div>
                    </div>

                    <!-- ç©ºçŠ¶æ€ -->
                    <el-empty
                      v-if="category.channels.length === 0"
                      description="è¯¥åˆ†ç±»ä¸‹æš‚æ— é¢‘é“"
                      :image-size="80"
                    />
                  </div>
                </el-tab-pane>
              </el-tabs>

              <!-- æ‰¹é‡æ“ä½œ -->
              <div class="channel-batch-actions">
                <el-button
                  size="small"
                  @click="selectAllChannels(server)"
                  :icon="Select"
                >
                  å…¨é€‰æœ¬æœåŠ¡å™¨
                </el-button>
                <el-button
                  size="small"
                  @click="selectRecommendedChannels(server)"
                  :icon="MagicStick"
                >
                  ä»…é€‰æ¨èé¢‘é“
                </el-button>
                <el-button
                  size="small"
                  @click="unselectAllChannels(server)"
                  :icon="Close"
                >
                  å…¨ä¸é€‰
                </el-button>
              </div>
            </div>
          </transition>
        </el-card>

        <!-- ç©ºçŠ¶æ€ -->
        <el-empty
          v-if="filteredServers.length === 0 && searchKeyword"
          description="æœªæ‰¾åˆ°åŒ¹é…çš„æœåŠ¡å™¨"
          :image-size="150"
        >
          <el-button type="primary" @click="searchKeyword = ''">
            æ¸…é™¤æœç´¢
          </el-button>
        </el-empty>
      </div>
    </div>

    <!-- æ— æœåŠ¡å™¨çŠ¶æ€ -->
    <el-empty
      v-else
      description="æœªæ‰¾åˆ°æœåŠ¡å™¨"
      :image-size="200"
    >
      <el-alert type="warning" :closable="false">
        <p>å¯èƒ½çš„åŸå› ï¼š</p>
        <ul>
          <li>è´¦å·ç™»å½•çŠ¶æ€å·²å¤±æ•ˆ</li>
          <li>è¯¥è´¦å·æœªåŠ å…¥ä»»ä½•æœåŠ¡å™¨</li>
          <li>ç½‘ç»œè¿æ¥å¼‚å¸¸</li>
        </ul>
      </el-alert>

      <el-button type="primary" @click="retryLoadServers" style="margin-top: 20px">
        <el-icon><Refresh /></el-icon>
        é‡æ–°åŠ è½½
      </el-button>
    </el-empty>

    <!-- æ™ºèƒ½æ¨èè¯´æ˜ -->
    <el-card shadow="never" class="recommendation-card" v-if="servers.length > 0">
      <template #header>
        <div class="card-header">
          <el-icon><InfoFilled /></el-icon>
          <span>æ™ºèƒ½æ¨èè¯´æ˜</span>
        </div>
      </template>

      <el-descriptions :column="1" size="small" border>
        <el-descriptions-item label="æ¨èä¾æ®">
          <ul class="recommendation-criteria">
            <li>âœ… 24å°æ—¶æ¶ˆæ¯é‡ > 10æ¡çš„é¢‘é“</li>
            <li>âœ… æ´»è·ƒåº¦è¯„åˆ† > 60åˆ†çš„æœåŠ¡å™¨</li>
            <li>âœ… æœ€è¿‘7å¤©æœ‰æ›´æ–°çš„é¢‘é“</li>
            <li>âœ… é¢‘é“ç±»å‹ä¸ºæ–‡æœ¬é¢‘é“ï¼ˆæ’é™¤è¯­éŸ³ï¼‰</li>
          </ul>
        </el-descriptions-item>
        <el-descriptions-item label="æ´»è·ƒåº¦è®¡ç®—">
          <el-tag>æ¶ˆæ¯é‡ Ã— 0.4 + æˆå‘˜æ•° Ã— 0.3 + åœ¨çº¿ç‡ Ã— 0.3</el-tag>
        </el-descriptions-item>
      </el-descriptions>
    </el-card>

    <!-- å‘å¯¼æ“ä½œæŒ‰é’® -->
    <div class="wizard-actions">
      <el-button size="large" @click="emit('prev')">
        <el-icon><Back /></el-icon>
        ä¸Šä¸€æ­¥
      </el-button>

      <el-button
        type="primary"
        size="large"
        @click="handleNext"
        :disabled="selectedChannelsCount === 0"
      >
        ä¸‹ä¸€æ­¥ (å·²é€‰ {{ selectedChannelsCount }} ä¸ªé¢‘é“)
        <el-icon><Right /></el-icon>
      </el-button>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted, watch } from 'vue'
import { ElMessage } from 'element-plus'
import {
  Loading,
  MagicStick,
  Select,
  Close,
  Search,
  Star,
  ArrowUp,
  ArrowDown,
  ChatLineRound,
  Microphone,
  Refresh,
  InfoFilled,
  Back,
  Right
} from '@element-plus/icons-vue'
import api from '@/api'

const emit = defineEmits(['next', 'prev'])

// çŠ¶æ€
const loading = ref(true)
const servers = ref([])
const searchKeyword = ref('')

// ç»Ÿè®¡
const selectedServersCount = computed(() => {
  return servers.value.filter(s => s.selected).length
})

const selectedChannelsCount = computed(() => {
  return servers.value.reduce((count, server) => {
    return count + (server.channels?.filter(c => c.selected).length || 0)
  }, 0)
})

const totalChannelsCount = computed(() => {
  return servers.value.reduce((count, server) => {
    return count + (server.channels?.length || 0)
  }, 0)
})

// è¿‡æ»¤åçš„æœåŠ¡å™¨
const filteredServers = computed(() => {
  if (!searchKeyword.value) {
    return servers.value
  }

  const keyword = searchKeyword.value.toLowerCase()
  return servers.value.filter(server => {
    // æœç´¢æœåŠ¡å™¨åç§°
    if (server.name.toLowerCase().includes(keyword)) {
      return true
    }

    // æœç´¢é¢‘é“åç§°
    return server.channels?.some(channel =>
      channel.name.toLowerCase().includes(keyword)
    )
  })
})

// åŠ è½½æœåŠ¡å™¨åˆ—è¡¨
const loadServers = async () => {
  loading.value = true

  try {
    const accountId = localStorage.getItem('wizard_account_id')
    if (!accountId) {
      throw new Error('æœªæ‰¾åˆ°è´¦å·ID')
    }

    const result = await api.getServers(accountId)

    // å¤„ç†æœåŠ¡å™¨æ•°æ®
    servers.value = result.map(server => ({
      ...server,
      selected: false,
      expanded: false,
      activeCategory: server.categories?.[0]?.id || '',
      // è®¡ç®—æ´»è·ƒåº¦è¯„åˆ†
      activity_score: calculateActivityScore(server),
      // æ ‡è®°æ¨è
      recommended: shouldRecommendServer(server),
      // å¤„ç†é¢‘é“æ•°æ®
      channels: processChannels(server.channels || [])
    }))

    ElMessage.success(`æˆåŠŸåŠ è½½ ${servers.value.length} ä¸ªæœåŠ¡å™¨`)

  } catch (error) {
    ElMessage.error('åŠ è½½æœåŠ¡å™¨åˆ—è¡¨å¤±è´¥ï¼š' + error.message)
    servers.value = []
  } finally {
    loading.value = false
  }
}

// è®¡ç®—æœåŠ¡å™¨æ´»è·ƒåº¦è¯„åˆ†
const calculateActivityScore = (server) => {
  const messageScore = Math.min((server.message_count_24h || 0) / 100 * 40, 40)
  const memberScore = Math.min((server.member_count || 0) / 1000 * 30, 30)
  const onlineScore = Math.min((server.online_count || 0) / (server.member_count || 1) * 100 * 30, 30)

  return Math.round(messageScore + memberScore + onlineScore)
}

// åˆ¤æ–­æ˜¯å¦æ¨èè¯¥æœåŠ¡å™¨
const shouldRecommendServer = (server) => {
  return server.activity_score >= 60
}

// å¤„ç†é¢‘é“æ•°æ®
const processChannels = (channels) => {
  return channels.map(channel => ({
    ...channel,
    selected: false,
    // æ ‡è®°æ¨èé¢‘é“
    recommended: shouldRecommendChannel(channel)
  }))
}

// åˆ¤æ–­æ˜¯å¦æ¨èè¯¥é¢‘é“
const shouldRecommendChannel = (channel) => {
  return (
    channel.type === 'text' &&
    (channel.message_count_24h || 0) > 10 &&
    channel.last_message_time &&
    new Date() - new Date(channel.last_message_time) < 7 * 24 * 60 * 60 * 1000
  )
}

// è·å–æ´»è·ƒåº¦ç±»å‹
const getActivityType = (score) => {
  if (score >= 80) return 'success'
  if (score >= 60) return 'warning'
  return 'info'
}

// åˆ‡æ¢æœåŠ¡å™¨é€‰æ‹©
const toggleServer = (server) => {
  // å¦‚æœé€‰ä¸­æœåŠ¡å™¨ï¼Œè‡ªåŠ¨å±•å¼€
  if (server.selected && !server.expanded) {
    server.expanded = true
    loadChannels(server)
  }
}

// åˆ‡æ¢æœåŠ¡å™¨å±•å¼€/æ”¶èµ·
const toggleServerExpand = async (server) => {
  server.expanded = !server.expanded

  // å¦‚æœå±•å¼€ä¸”é¢‘é“æœªåŠ è½½ï¼Œåˆ™åŠ è½½é¢‘é“
  if (server.expanded && (!server.channels || server.channels.length === 0)) {
    await loadChannels(server)
  }
}

// åŠ è½½é¢‘é“åˆ—è¡¨
const loadChannels = async (server) => {
  if (server.channels && server.channels.length > 0) {
    return
  }

  try {
    const accountId = localStorage.getItem('wizard_account_id')
    const result = await api.getChannels(accountId, server.id)

    server.channels = processChannels(result)

    // æŒ‰åˆ†ç±»ç»„ç»‡é¢‘é“
    server.categories = organizeChannelsByCategory(server.channels)
    server.activeCategory = server.categories[0]?.id || ''

  } catch (error) {
    ElMessage.error(`åŠ è½½ ${server.name} çš„é¢‘é“å¤±è´¥`)
  }
}

// æŒ‰åˆ†ç±»ç»„ç»‡é¢‘é“
const organizeChannelsByCategory = (channels) => {
  const categories = {}

  channels.forEach(channel => {
    const categoryId = channel.category_id || 'uncategorized'
    const categoryName = channel.category_name || 'æœªåˆ†ç±»'

    if (!categories[categoryId]) {
      categories[categoryId] = {
        id: categoryId,
        name: categoryName,
        channels: []
      }
    }

    categories[categoryId].channels.push(channel)
  })

  return Object.values(categories)
}

// åˆ‡æ¢é¢‘é“é€‰æ‹©
const toggleChannel = (server, channel) => {
  // å¦‚æœé€‰ä¸­äº†é¢‘é“ï¼Œè‡ªåŠ¨é€‰ä¸­æœåŠ¡å™¨
  if (channel.selected && !server.selected) {
    server.selected = true
  }

  // å¦‚æœå–æ¶ˆäº†æ‰€æœ‰é¢‘é“ï¼Œå–æ¶ˆé€‰ä¸­æœåŠ¡å™¨
  if (!channel.selected) {
    const hasSelectedChannel = server.channels.some(c => c.selected)
    if (!hasSelectedChannel) {
      server.selected = false
    }
  }
}

// æ™ºèƒ½æ¨è
const selectRecommended = () => {
  let count = 0

  servers.value.forEach(server => {
    if (server.recommended) {
      server.selected = true
      server.expanded = true

      // é€‰æ‹©æ¨èé¢‘é“
      server.channels?.forEach(channel => {
        if (channel.recommended) {
          channel.selected = true
          count++
        }
      })
    }
  })

  ElMessage.success(`å·²è‡ªåŠ¨é€‰æ‹© ${count} ä¸ªæ¨èé¢‘é“`)
}

// å…¨é€‰
const selectAll = () => {
  servers.value.forEach(server => {
    server.selected = true
    server.expanded = true
    server.channels?.forEach(channel => {
      channel.selected = true
    })
  })

  ElMessage.success('å·²å…¨é€‰æ‰€æœ‰é¢‘é“')
}

// å…¨ä¸é€‰
const unselectAll = () => {
  servers.value.forEach(server => {
    server.selected = false
    server.channels?.forEach(channel => {
      channel.selected = false
    })
  })

  ElMessage.info('å·²å–æ¶ˆæ‰€æœ‰é€‰æ‹©')
}

// é€‰æ‹©æœåŠ¡å™¨çš„æ‰€æœ‰é¢‘é“
const selectAllChannels = (server) => {
  server.selected = true
  server.channels?.forEach(channel => {
    channel.selected = true
  })

  ElMessage.success(`å·²é€‰æ‹© ${server.name} çš„æ‰€æœ‰é¢‘é“`)
}

// é€‰æ‹©æœåŠ¡å™¨çš„æ¨èé¢‘é“
const selectRecommendedChannels = (server) => {
  server.selected = true
  let count = 0

  server.channels?.forEach(channel => {
    if (channel.recommended) {
      channel.selected = true
      count++
    } else {
      channel.selected = false
    }
  })

  ElMessage.success(`å·²é€‰æ‹© ${count} ä¸ªæ¨èé¢‘é“`)
}

// å–æ¶ˆé€‰æ‹©æœåŠ¡å™¨çš„æ‰€æœ‰é¢‘é“
const unselectAllChannels = (server) => {
  server.channels?.forEach(channel => {
    channel.selected = false
  })

  server.selected = false

  ElMessage.info(`å·²å–æ¶ˆ ${server.name} çš„æ‰€æœ‰é€‰æ‹©`)
}

// é‡æ–°åŠ è½½
const retryLoadServers = () => {
  loadServers()
}

// ä¸‹ä¸€æ­¥
const handleNext = () => {
  // æ”¶é›†é€‰ä¸­çš„é¢‘é“
  const selectedChannels = []

  servers.value.forEach(server => {
    server.channels?.forEach(channel => {
      if (channel.selected) {
        selectedChannels.push({
          server_id: server.id,
          server_name: server.name,
          channel_id: channel.id,
          channel_name: channel.name,
          channel_type: channel.type
        })
      }
    })
  })

  // ä¿å­˜åˆ°å…¨å±€çŠ¶æ€
  localStorage.setItem('wizard_selected_channels', JSON.stringify(selectedChannels))

  ElMessage.success(`å·²é€‰æ‹© ${selectedChannels.length} ä¸ªé¢‘é“`)
  emit('next')
}

// ç»„ä»¶æŒ‚è½½æ—¶åŠ è½½æœåŠ¡å™¨
onMounted(() => {
  loadServers()
})
</script>

<style scoped lang="scss">
.servers-step {
  padding: 20px;
}

.step-info {
  margin-bottom: 20px;
}

.loading-section {
  text-align: center;
  padding: 40px;

  .loading-text {
    margin-top: 20px;
    font-size: 16px;
    color: #909399;
  }
}

.toolbar-card {
  margin-bottom: 20px;
}

.servers-list {
  .server-card {
    margin-bottom: 15px;
    transition: all 0.3s;

    &.server-selected {
      border-color: #409EFF;
      box-shadow: 0 2px 12px rgba(64, 158, 255, 0.3);
    }

    .server-header {
      display: flex;
      justify-content: space-between;
      align-items: center;

      .server-info {
        display: flex;
        align-items: center;
        gap: 15px;

        .server-details {
          h3 {
            margin: 0 0 5px 0;
            font-size: 16px;
          }
        }
      }
    }

    .channels-section {
      margin-top: 15px;

      .channels-list {
        .channel-item {
          padding: 10px;
          border-radius: 4px;
          margin-bottom: 5px;
          transition: background 0.3s;

          &:hover {
            background: #F5F7FA;
          }

          &.channel-selected {
            background: #E6F7FF;
          }

          .channel-info {
            display: flex;
            align-items: center;
            gap: 8px;

            .channel-name {
              flex: 1;
              font-size: 14px;
            }

            .channel-tags {
              margin-left: auto;
            }
          }

          .channel-topic {
            margin-top: 5px;
            margin-left: 28px;
            font-size: 12px;
            color: #909399;
          }
        }
      }

      .channel-batch-actions {
        margin-top: 15px;
        text-align: right;
      }
    }
  }
}

.recommendation-card {
  margin-top: 20px;
  background: #FFF9E6;

  .recommendation-criteria {
    list-style: none;
    padding: 0;
    margin: 0;

    li {
      margin: 5px 0;
    }
  }
}

.wizard-actions {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 30px;
}
</style>
```

ç”±äºå†…å®¹æå…¶åºå¤§ï¼Œæˆ‘å°†åˆ†å¤šä¸ªæ–‡ä»¶ç»§ç»­åˆ›å»ºã€‚è®©æˆ‘ç»§ç»­...

