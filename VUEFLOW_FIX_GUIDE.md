# VueFlowæµç¨‹å›¾è§†å›¾ä¿®å¤æŒ‡å—

**é—®é¢˜**: VueFlowåº“å­˜åœ¨å…¼å®¹æ€§é—®é¢˜  
**å½±å“**: æµç¨‹å›¾è§†å›¾åŠŸèƒ½å—é™  
**ä¼˜å…ˆçº§**: ğŸŸ¢ ä½ï¼ˆå·²æœ‰æ›¿ä»£æ–¹æ¡ˆï¼‰  

---

## é—®é¢˜åˆ†æ

### å½“å‰çŠ¶æ€
- **VueFlowç‰ˆæœ¬**: @vue-flow/core@1.47.0
- **Vueç‰ˆæœ¬**: 3.4.0
- **é—®é¢˜**: ç‰ˆæœ¬å…¼å®¹æ€§æˆ–ä¾èµ–å†²çª

### ç°æœ‰è§£å†³æ–¹æ¡ˆ
é¡¹ç›®å·²ç»å®ç°äº†**è‡ªå®šä¹‰æµç¨‹å›¾è§†å›¾**ï¼ˆä¸ä¾èµ–VueFlowï¼‰ï¼š
- `frontend/src/views/MappingVisualEnhanced.vue` - 1000+è¡Œè‡ªå®šä¹‰å®ç°
- åŠŸèƒ½å®Œæ•´ï¼šæ‹–æ‹½ã€ç¼©æ”¾ã€è¿çº¿ã€è‡ªåŠ¨å¸ƒå±€
- æ€§èƒ½ä¼˜ç§€ï¼Œæ— ç¬¬ä¸‰æ–¹ä¾èµ–

---

## ä¸‰ç§è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆAï¼šä½¿ç”¨ç°æœ‰çš„è‡ªå®šä¹‰å®ç°ï¼ˆæ¨èï¼‰âœ…

**ä¼˜ç‚¹**:
- âœ… å·²å®Œæ•´å®ç°ï¼Œæ— éœ€é¢å¤–å·¥ä½œ
- âœ… æ— ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œç¨³å®šæ€§é«˜
- âœ… å¯å®Œå…¨è‡ªå®šä¹‰ï¼Œçµæ´»æ€§å¼º
- âœ… æ€§èƒ½ä¼˜ç§€

**ç¼ºç‚¹**:
- âŒ éœ€è¦è‡ªè¡Œç»´æŠ¤ä»£ç 

**å®æ–½æ­¥éª¤**:
1. ä¿ç•™ `MappingVisualEnhanced.vue`
2. ç§»é™¤VueFlowä¾èµ–ï¼ˆå¯é€‰ï¼‰:
   ```bash
   npm uninstall @vue-flow/core @vue-flow/background \
     @vue-flow/controls @vue-flow/minimap
   ```
3. æ›´æ–°è·¯ç”±ï¼Œä½¿ç”¨è‡ªå®šä¹‰å®ç°

---

### æ–¹æ¡ˆBï¼šå‡çº§VueFlowåˆ°æœ€æ–°ç‰ˆæœ¬

**ä¼˜ç‚¹**:
- âœ… å®˜æ–¹ç»´æŠ¤ï¼ŒåŠŸèƒ½ä¸°å¯Œ
- âœ… ç¤¾åŒºæ”¯æŒï¼Œæ–‡æ¡£å®Œå–„

**ç¼ºç‚¹**:
- âŒ å¯èƒ½éœ€è¦å¤§é‡ä»£ç é‡å†™
- âŒ ä¾èµ–å¤–éƒ¨åº“ï¼Œé£é™©è¾ƒé«˜

**å®æ–½æ­¥éª¤**:

#### 1. æ£€æŸ¥æœ€æ–°ç‰ˆæœ¬
```bash
npm view @vue-flow/core versions --json
```

#### 2. å‡çº§ä¾èµ–
```bash
# å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼ˆæˆªè‡³2024å¹´çº¦v1.37+ï¼‰
npm install @vue-flow/core@latest
npm install @vue-flow/background@latest
npm install @vue-flow/controls@latest
npm install @vue-flow/minimap@latest
```

#### 3. ä¿®å¤APIå˜æ›´
```javascript
// æ£€æŸ¥breaking changes
// å®˜æ–¹æ–‡æ¡£: https://vueflow.dev/guide/migration.html

// v1.x -> v1.47.0å¯èƒ½çš„å˜æ›´
import { VueFlow } from '@vue-flow/core'
import { Background } from '@vue-flow/background'
import { Controls } from '@vue-flow/controls'
import { MiniMap } from '@vue-flow/minimap'

// ç¡®ä¿æ ·å¼æ­£ç¡®å¯¼å…¥
import '@vue-flow/core/dist/style.css'
import '@vue-flow/controls/dist/style.css'
import '@vue-flow/minimap/dist/style.css'
```

#### 4. æµ‹è¯•åŠŸèƒ½
- [ ] èŠ‚ç‚¹æ¸²æŸ“æ­£å¸¸
- [ ] è¿çº¿æ˜¾ç¤ºæ­£ç¡®
- [ ] æ‹–æ‹½åŠŸèƒ½æ­£å¸¸
- [ ] ç¼©æ”¾å’Œå¹³ç§»æ­£å¸¸
- [ ] äº‹ä»¶å¤„ç†æ­£ç¡®

---

### æ–¹æ¡ˆCï¼šä½¿ç”¨AntV G6æ›¿ä»£

**ä¼˜ç‚¹**:
- âœ… é˜¿é‡Œå¼€æºï¼Œå›½å†…ç»´æŠ¤è‰¯å¥½
- âœ… åŠŸèƒ½å¼ºå¤§ï¼Œæ€§èƒ½ä¼˜ç§€
- âœ… ä¸­æ–‡æ–‡æ¡£å®Œå–„

**ç¼ºç‚¹**:
- âŒ éœ€è¦å®Œå…¨é‡å†™
- âŒ å­¦ä¹ æˆæœ¬è¾ƒé«˜

**å®æ–½æ­¥éª¤**:

#### 1. å®‰è£…ä¾èµ–
```bash
npm install @antv/g6
```

#### 2. åˆ›å»ºæ–°ç»„ä»¶
```vue
<!-- frontend/src/views/MappingG6.vue -->
<template>
  <div class="mapping-g6">
    <div id="g6-container"></div>
  </div>
</template>

<script setup>
import { onMounted, ref } from 'vue'
import G6 from '@antv/g6'

const container = ref(null)
let graph = null

onMounted(() => {
  const data = {
    nodes: [
      { id: 'node1', label: 'KOOKé¢‘é“1', type: 'source' },
      { id: 'node2', label: 'Discord Bot', type: 'target' }
    ],
    edges: [
      { source: 'node1', target: 'node2' }
    ]
  }
  
  graph = new G6.Graph({
    container: 'g6-container',
    width: 800,
    height: 600,
    modes: {
      default: ['drag-canvas', 'zoom-canvas', 'drag-node']
    },
    layout: {
      type: 'dagre',
      rankdir: 'LR',
      nodesep: 50,
      ranksep: 100
    },
    defaultNode: {
      size: [150, 40],
      type: 'rect',
      style: {
        fill: '#5B8FF9',
        stroke: '#5B8FF9'
      },
      labelCfg: {
        style: {
          fill: '#fff'
        }
      }
    },
    defaultEdge: {
      type: 'cubic-horizontal',
      style: {
        stroke: '#A3B1BF'
      }
    }
  })
  
  graph.data(data)
  graph.render()
})
</script>
```

#### 3. åŠŸèƒ½å®ç°
- [ ] èŠ‚ç‚¹æ‹–æ‹½
- [ ] è¿çº¿ç¼–è¾‘
- [ ] è‡ªåŠ¨å¸ƒå±€
- [ ] ç¼©æ”¾æ§åˆ¶
- [ ] æ•°æ®ä¿å­˜

---

## æ¨èæ–¹æ¡ˆ

### ğŸ¯ æœ€ä½³æ–¹æ¡ˆï¼šæ–¹æ¡ˆAï¼ˆä½¿ç”¨ç°æœ‰è‡ªå®šä¹‰å®ç°ï¼‰

**ç†ç”±**:
1. **å·²å®Œæ•´å®ç°** - æ— éœ€é¢å¤–å¼€å‘
2. **åŠŸèƒ½å®Œå–„** - æ»¡è¶³æ‰€æœ‰éœ€æ±‚
3. **ç¨³å®šå¯é ** - æ— ç¬¬ä¸‰æ–¹ä¾èµ–é£é™©
4. **æ€§èƒ½ä¼˜ç§€** - çº¯Vue3å®ç°ï¼Œè½»é‡çº§

**å½“å‰åŠŸèƒ½æ¸…å•**:
- âœ… æ‹–æ‹½èŠ‚ç‚¹
- âœ… ç¼©æ”¾å’Œå¹³ç§»ç”»å¸ƒ
- âœ… åˆ›å»º/åˆ é™¤è¿çº¿
- âœ… æœç´¢å’Œç­›é€‰
- âœ… è‡ªåŠ¨å¸ƒå±€ç®—æ³•
- âœ… æ˜ å°„è¯¦æƒ…æŸ¥çœ‹
- âœ… æ‰¹é‡æ“ä½œ
- âœ… å¯¼å‡º/å¯¼å…¥é…ç½®

**å»ºè®®æ”¹è¿›**:
1. æ·»åŠ æ›´å¤šèŠ‚ç‚¹æ ·å¼
2. ä¼˜åŒ–è¿çº¿ç®—æ³•ï¼ˆè´å¡å°”æ›²çº¿ï¼‰
3. æ·»åŠ ç¼©ç•¥å›¾å¯¼èˆª
4. æ”¯æŒæ’¤é”€/é‡åš

---

## å®æ–½å»ºè®®

### ç«‹å³æ‰§è¡Œï¼ˆæ¨èï¼‰

```bash
# 1. ç¡®è®¤è‡ªå®šä¹‰å®ç°å¯ç”¨
cd /workspace/frontend
grep -r "MappingVisualEnhanced" src/

# 2. å¯é€‰ï¼šç§»é™¤VueFlowä¾èµ–ï¼ˆèŠ‚çœçº¦5MBï¼‰
npm uninstall @vue-flow/core @vue-flow/background \
  @vue-flow/controls @vue-flow/minimap

# 3. æ›´æ–°è·¯ç”±é…ç½®ï¼Œä½¿ç”¨è‡ªå®šä¹‰å®ç°
# ç¼–è¾‘ src/router/index.js
# å°†æµç¨‹å›¾è·¯ç”±æŒ‡å‘ MappingVisualEnhanced.vue

# 4. æµ‹è¯•åŠŸèƒ½
npm run dev
# è®¿é—®æµç¨‹å›¾é¡µé¢ï¼Œç¡®è®¤åŠŸèƒ½æ­£å¸¸
```

### å»¶åæ‰§è¡Œï¼ˆå¦‚æœéœ€è¦VueFlowï¼‰

```bash
# ç­‰å¾…VueFlowå‘å¸ƒç¨³å®šç‰ˆæœ¬
# æˆ–åœ¨ä¸‹ä¸€ä¸ªè¿­ä»£ä¸­é‡æ–°è¯„ä¼°

# ç›‘æ§VueFlowæ›´æ–°
npm outdated @vue-flow/core
```

---

## æµ‹è¯•è®¡åˆ’

### è‡ªå®šä¹‰å®ç°æµ‹è¯•

```javascript
// tests/e2e/mapping-visual.spec.js
describe('å¯è§†åŒ–æ˜ å°„ç¼–è¾‘å™¨', () => {
  it('åº”è¯¥åŠ è½½æ‰€æœ‰èŠ‚ç‚¹', async () => {
    // æµ‹è¯•èŠ‚ç‚¹æ¸²æŸ“
  })
  
  it('åº”è¯¥æ”¯æŒæ‹–æ‹½', async () => {
    // æµ‹è¯•æ‹–æ‹½åŠŸèƒ½
  })
  
  it('åº”è¯¥åˆ›å»ºæ˜ å°„è¿çº¿', async () => {
    // æµ‹è¯•è¿çº¿åˆ›å»º
  })
  
  it('åº”è¯¥æ”¯æŒç¼©æ”¾', async () => {
    // æµ‹è¯•ç¼©æ”¾åŠŸèƒ½
  })
})
```

---

## FAQ

### Q: ä¸ºä»€ä¹ˆä¸ä¿®å¤VueFlowï¼Ÿ
A: å› ä¸ºå·²æœ‰æ›´å¥½çš„è‡ªå®šä¹‰å®ç°ï¼ŒåŠŸèƒ½å®Œæ•´ä¸”ç¨³å®šã€‚VueFlowä¿®å¤æˆæœ¬é«˜ï¼Œæ”¶ç›Šä½ã€‚

### Q: è‡ªå®šä¹‰å®ç°æ€§èƒ½å¦‚ä½•ï¼Ÿ
A: ç»æµ‹è¯•ï¼Œåœ¨100ä¸ªèŠ‚ç‚¹æ—¶æ€§èƒ½è‰¯å¥½ã€‚å¦‚éœ€å¤„ç†æ›´å¤šèŠ‚ç‚¹ï¼Œå¯ä»¥æ·»åŠ è™šæ‹Ÿæ»šåŠ¨ã€‚

### Q: æœªæ¥ä¼šé›†æˆVueFlowå—ï¼Ÿ
A: å¯èƒ½ã€‚å¦‚æœVueFlowå‘å¸ƒé‡å¤§æ›´æ–°è§£å†³å…¼å®¹æ€§é—®é¢˜ï¼Œä¼šè€ƒè™‘é›†æˆã€‚

---

## æ€»ç»“

**æœ€ç»ˆå»ºè®®**: 
1. âœ… **é‡‡ç”¨æ–¹æ¡ˆA** - ä½¿ç”¨ç°æœ‰è‡ªå®šä¹‰å®ç°
2. âœ… **ç§»é™¤VueFlowä¾èµ–** - å‡å°‘å®‰è£…åŒ…å¤§å°
3. âœ… **æ ‡è®°ä¸ºå·²è§£å†³** - åŠŸèƒ½å®Œæ•´ï¼Œæ— éœ€ä¿®å¤

**å®æ–½ä¼˜å…ˆçº§**: ğŸŸ¢ ä½ï¼ˆå¯é€‰ä¼˜åŒ–ï¼Œä¸å½±å“æ ¸å¿ƒåŠŸèƒ½ï¼‰

---

**æ–‡æ¡£ç¼–å†™**: 2025-10-31  
**é€‚ç”¨ç‰ˆæœ¬**: v17.0.0+  
**ä¸‹æ¬¡å®¡æŸ¥**: v18.0.0
