# ⚡ 快速执行命令手册

> **复制粘贴即可** - 最实用的命令集合

---

## 🚀 立即构建安装包

### GitHub Actions构建（推荐）⭐⭐⭐⭐⭐

```bash
# 在您的本地终端执行：

# 1. 进入项目目录
cd ~/CSBJJWT  # 或您的项目路径

# 2. 拉取最新更新
git pull

# 3. 运行发布脚本
./release_package.sh

# 按提示操作，然后等待15-20分钟
# 访问 https://github.com/gfchfjh/CSBJJWT/releases 下载
```

**产物：**
- KookForwarder_v1.13.2_Windows_x64.exe (450MB)
- KookForwarder_v1.13.2_macOS.dmg (480MB)
- KookForwarder_v1.13.2_Linux_x64.AppImage (420MB)

---

### 本地构建（完全控制）

#### Windows

```powershell
# 完整命令（复制粘贴到PowerShell）

# 1. 安装环境（首次）
choco install python311 nodejs-lts git -y

# 2. 克隆项目
git clone https://github.com/gfchfjh/CSBJJWT.git
cd CSBJJWT

# 3. 生成图标
python build\generate_simple_icon.py
python build\create_platform_icons.py

# 4. 安装依赖
pip install -r backend\requirements.txt
pip install pyinstaller Pillow
playwright install chromium
cd frontend
npm install
cd ..

# 5. 构建后端
cd backend
pyinstaller --clean ..\build\build_backend.spec
cd ..

# 6. 构建前端
cd frontend
npm run build
npm run electron:build:win
cd ..

# 7. 验证
python build\verify_build.py

# 8. 查看输出
dir frontend\dist-electron\*.exe
```

---

#### macOS

```bash
# 完整命令（复制粘贴到终端）

# 1. 安装环境（首次）
brew install python@3.11 node@18 git

# 2. 克隆项目
git clone https://github.com/gfchfjh/CSBJJWT.git
cd CSBJJWT

# 3. 生成图标
python3 build/generate_simple_icon.py
python3 build/create_platform_icons.py

# 创建.icns图标（macOS专用）
mkdir icon.iconset
sips -z 16 16 build/icon-16.png --out icon.iconset/icon_16x16.png
sips -z 32 32 build/icon-32.png --out icon.iconset/icon_16x16@2x.png
sips -z 32 32 build/icon-32.png --out icon.iconset/icon_32x32.png
sips -z 64 64 build/icon-64.png --out icon.iconset/icon_32x32@2x.png
sips -z 128 128 build/icon-128.png --out icon.iconset/icon_128x128.png
sips -z 256 256 build/icon-256.png --out icon.iconset/icon_128x128@2x.png
sips -z 256 256 build/icon-256.png --out icon.iconset/icon_256x256.png
sips -z 512 512 build/icon-512.png --out icon.iconset/icon_256x256@2x.png
sips -z 512 512 build/icon-512.png --out icon.iconset/icon_512x512.png
sips -z 1024 1024 build/icon-1024.png --out icon.iconset/icon_512x512@2x.png
iconutil -c icns icon.iconset -o build/icon.icns
rm -rf icon.iconset

# 4. 安装依赖
pip3 install -r backend/requirements.txt
pip3 install pyinstaller Pillow
playwright install chromium
cd frontend && npm install && cd ..

# 5. 构建后端
cd backend
pyinstaller --clean ../build/build_backend.spec
cd ..

# 6. 构建前端
cd frontend
npm run build
npm run electron:build:mac
cd ..

# 7. 验证
python3 build/verify_build.py

# 8. 查看输出
ls -lh frontend/dist-electron/*.dmg
```

---

#### Linux (Ubuntu/Debian)

```bash
# 完整命令（复制粘贴到终端）

# 1. 安装环境（首次）
sudo apt update
sudo apt install -y python3.11 python3-pip nodejs npm git \
    build-essential libssl-dev libffi-dev libfuse2

# 2. 克隆项目
git clone https://github.com/gfchfjh/CSBJJWT.git
cd CSBJJWT

# 3. 生成图标
python3 build/generate_simple_icon.py
python3 build/create_platform_icons.py

# 4. 安装依赖
pip3 install -r backend/requirements.txt
pip3 install pyinstaller Pillow
playwright install chromium
playwright install-deps chromium
cd frontend && npm install && cd ..

# 5. 构建后端
cd backend
pyinstaller --clean ../build/build_backend.spec
cd ..

# 6. 构建前端
cd frontend
npm run build
npm run electron:build:linux
cd ..

# 7. 验证
python3 build/verify_build.py

# 8. 查看输出
ls -lh frontend/dist-electron/*.AppImage
```

---

## 🔍 验证命令

```bash
# 快速验证所有准备工作
python3 build/verify_build.py

# 或手动检查
ls -lh build/icon.*              # 图标
ls -lh backend/dist/             # 后端
ls -lh frontend/dist/            # 前端
ls -lh frontend/dist-electron/   # 安装包
```

---

## 🛠️ 工具命令

```bash
# 生成图标
python3 build/generate_simple_icon.py
python3 build/create_platform_icons.py

# 准备Redis（可选）
python3 build/prepare_redis.py

# 快速准备（图标+验证）
./BUILD_QUICKSTART.sh
```

---

## 🔧 故障排查命令

### PyInstaller失败

```bash
# 清理缓存
rm -rf backend/build backend/dist

# 重新安装
pip3 install --force-reinstall pyinstaller

# 重新打包
cd backend
pyinstaller --clean ../build/build_backend.spec
```

### Electron打包失败

```bash
# 清理缓存
cd frontend
rm -rf node_modules dist dist-electron

# 重新安装
npm install

# 重新构建
npm run build
npm run electron:build
```

### 网络问题（使用国内镜像）

```bash
# Python镜像
pip3 install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# npm镜像
npm config set registry https://registry.npmmirror.com
npm install
```

---

## 📖 查看文档命令

```bash
# 新手入口
cat START_HERE.md

# 本地构建详细指南（1182行）
cat LOCAL_BUILD_GUIDE.md

# 快速参考
cat QUICK_BUILD_REFERENCE.md

# 文档索引
cat BUILD_INDEX.md

# 完成报告
cat FINAL_COMPLETION_REPORT.md
```

---

## ⏱️ 时间参考

| 方式 | 准备时间 | 构建时间 | 总时间 |
|------|---------|---------|--------|
| GitHub Actions | 5分钟 | 15-20分钟 | 20-25分钟 |
| 本地构建（首次） | 20-30分钟 | 20-30分钟 | 40-60分钟 |
| 本地构建（有环境） | 5分钟 | 20-30分钟 | 25-35分钟 |

---

**保存此文档，随时查阅！**

**最后更新：** 2025-10-23
