# âš¡ å¿«é€Ÿæ‰§è¡Œå‘½ä»¤æ‰‹å†Œ

> **å¤åˆ¶ç²˜è´´å³å¯** - æœ€å®ç”¨çš„å‘½ä»¤é›†åˆ

---

## ğŸš€ ç«‹å³æ„å»ºå®‰è£…åŒ…

### GitHub Actionsæ„å»ºï¼ˆæ¨èï¼‰â­â­â­â­â­

```bash
# åœ¨æ‚¨çš„æœ¬åœ°ç»ˆç«¯æ‰§è¡Œï¼š

# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd ~/CSBJJWT  # æˆ–æ‚¨çš„é¡¹ç›®è·¯å¾„

# 2. æ‹‰å–æœ€æ–°æ›´æ–°
git pull

# 3. è¿è¡Œå‘å¸ƒè„šæœ¬
./release_package.sh

# æŒ‰æç¤ºæ“ä½œï¼Œç„¶åç­‰å¾…15-20åˆ†é’Ÿ
# è®¿é—® https://github.com/gfchfjh/CSBJJWT/releases ä¸‹è½½
```

**äº§ç‰©ï¼š**
- KookForwarder_v1.13.2_Windows_x64.exe (450MB)
- KookForwarder_v1.13.2_macOS.dmg (480MB)
- KookForwarder_v1.13.2_Linux_x64.AppImage (420MB)

---

### æœ¬åœ°æ„å»ºï¼ˆå®Œå…¨æ§åˆ¶ï¼‰

#### Windows

```powershell
# å®Œæ•´å‘½ä»¤ï¼ˆå¤åˆ¶ç²˜è´´åˆ°PowerShellï¼‰

# 1. å®‰è£…ç¯å¢ƒï¼ˆé¦–æ¬¡ï¼‰
choco install python311 nodejs-lts git -y

# 2. å…‹éš†é¡¹ç›®
git clone https://github.com/gfchfjh/CSBJJWT.git
cd CSBJJWT

# 3. ç”Ÿæˆå›¾æ ‡
python build\generate_simple_icon.py
python build\create_platform_icons.py

# 4. å®‰è£…ä¾èµ–
pip install -r backend\requirements.txt
pip install pyinstaller Pillow
playwright install chromium
cd frontend
npm install
cd ..

# 5. æ„å»ºåç«¯
cd backend
pyinstaller --clean ..\build\build_backend.spec
cd ..

# 6. æ„å»ºå‰ç«¯
cd frontend
npm run build
npm run electron:build:win
cd ..

# 7. éªŒè¯
python build\verify_build.py

# 8. æŸ¥çœ‹è¾“å‡º
dir frontend\dist-electron\*.exe
```

---

#### macOS

```bash
# å®Œæ•´å‘½ä»¤ï¼ˆå¤åˆ¶ç²˜è´´åˆ°ç»ˆç«¯ï¼‰

# 1. å®‰è£…ç¯å¢ƒï¼ˆé¦–æ¬¡ï¼‰
brew install python@3.11 node@18 git

# 2. å…‹éš†é¡¹ç›®
git clone https://github.com/gfchfjh/CSBJJWT.git
cd CSBJJWT

# 3. ç”Ÿæˆå›¾æ ‡
python3 build/generate_simple_icon.py
python3 build/create_platform_icons.py

# åˆ›å»º.icnså›¾æ ‡ï¼ˆmacOSä¸“ç”¨ï¼‰
mkdir icon.iconset
sips -z 16 16 build/icon-16.png --out icon.iconset/icon_16x16.png
sips -z 32 32 build/icon-32.png --out icon.iconset/icon_16x16@2x.png
sips -z 32 32 build/icon-32.png --out icon.iconset/icon_32x32.png
sips -z 64 64 build/icon-64.png --out icon.iconset/icon_32x32@2x.png
sips -z 128 128 build/icon-128.png --out icon.iconset/icon_128x128.png
sips -z 256 256 build/icon-256.png --out icon.iconset/icon_128x128@2x.png
sips -z 256 256 build/icon-256.png --out icon.iconset/icon_256x256.png
sips -z 512 512 build/icon-512.png --out icon.iconset/icon_256x256@2x.png
sips -z 512 512 build/icon-512.png --out icon.iconset/icon_512x512.png
sips -z 1024 1024 build/icon-1024.png --out icon.iconset/icon_512x512@2x.png
iconutil -c icns icon.iconset -o build/icon.icns
rm -rf icon.iconset

# 4. å®‰è£…ä¾èµ–
pip3 install -r backend/requirements.txt
pip3 install pyinstaller Pillow
playwright install chromium
cd frontend && npm install && cd ..

# 5. æ„å»ºåç«¯
cd backend
pyinstaller --clean ../build/build_backend.spec
cd ..

# 6. æ„å»ºå‰ç«¯
cd frontend
npm run build
npm run electron:build:mac
cd ..

# 7. éªŒè¯
python3 build/verify_build.py

# 8. æŸ¥çœ‹è¾“å‡º
ls -lh frontend/dist-electron/*.dmg
```

---

#### Linux (Ubuntu/Debian)

```bash
# å®Œæ•´å‘½ä»¤ï¼ˆå¤åˆ¶ç²˜è´´åˆ°ç»ˆç«¯ï¼‰

# 1. å®‰è£…ç¯å¢ƒï¼ˆé¦–æ¬¡ï¼‰
sudo apt update
sudo apt install -y python3.11 python3-pip nodejs npm git \
    build-essential libssl-dev libffi-dev libfuse2

# 2. å…‹éš†é¡¹ç›®
git clone https://github.com/gfchfjh/CSBJJWT.git
cd CSBJJWT

# 3. ç”Ÿæˆå›¾æ ‡
python3 build/generate_simple_icon.py
python3 build/create_platform_icons.py

# 4. å®‰è£…ä¾èµ–
pip3 install -r backend/requirements.txt
pip3 install pyinstaller Pillow
playwright install chromium
playwright install-deps chromium
cd frontend && npm install && cd ..

# 5. æ„å»ºåç«¯
cd backend
pyinstaller --clean ../build/build_backend.spec
cd ..

# 6. æ„å»ºå‰ç«¯
cd frontend
npm run build
npm run electron:build:linux
cd ..

# 7. éªŒè¯
python3 build/verify_build.py

# 8. æŸ¥çœ‹è¾“å‡º
ls -lh frontend/dist-electron/*.AppImage
```

---

## ğŸ” éªŒè¯å‘½ä»¤

```bash
# å¿«é€ŸéªŒè¯æ‰€æœ‰å‡†å¤‡å·¥ä½œ
python3 build/verify_build.py

# æˆ–æ‰‹åŠ¨æ£€æŸ¥
ls -lh build/icon.*              # å›¾æ ‡
ls -lh backend/dist/             # åç«¯
ls -lh frontend/dist/            # å‰ç«¯
ls -lh frontend/dist-electron/   # å®‰è£…åŒ…
```

---

## ğŸ› ï¸ å·¥å…·å‘½ä»¤

```bash
# ç”Ÿæˆå›¾æ ‡
python3 build/generate_simple_icon.py
python3 build/create_platform_icons.py

# å‡†å¤‡Redisï¼ˆå¯é€‰ï¼‰
python3 build/prepare_redis.py

# å¿«é€Ÿå‡†å¤‡ï¼ˆå›¾æ ‡+éªŒè¯ï¼‰
./BUILD_QUICKSTART.sh
```

---

## ğŸ”§ æ•…éšœæ’æŸ¥å‘½ä»¤

### PyInstallerå¤±è´¥

```bash
# æ¸…ç†ç¼“å­˜
rm -rf backend/build backend/dist

# é‡æ–°å®‰è£…
pip3 install --force-reinstall pyinstaller

# é‡æ–°æ‰“åŒ…
cd backend
pyinstaller --clean ../build/build_backend.spec
```

### Electronæ‰“åŒ…å¤±è´¥

```bash
# æ¸…ç†ç¼“å­˜
cd frontend
rm -rf node_modules dist dist-electron

# é‡æ–°å®‰è£…
npm install

# é‡æ–°æ„å»º
npm run build
npm run electron:build
```

### ç½‘ç»œé—®é¢˜ï¼ˆä½¿ç”¨å›½å†…é•œåƒï¼‰

```bash
# Pythoné•œåƒ
pip3 install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# npmé•œåƒ
npm config set registry https://registry.npmmirror.com
npm install
```

---

## ğŸ“– æŸ¥çœ‹æ–‡æ¡£å‘½ä»¤

```bash
# æ–°æ‰‹å…¥å£
cat START_HERE.md

# æœ¬åœ°æ„å»ºè¯¦ç»†æŒ‡å—ï¼ˆ1182è¡Œï¼‰
cat LOCAL_BUILD_GUIDE.md

# å¿«é€Ÿå‚è€ƒ
cat QUICK_BUILD_REFERENCE.md

# æ–‡æ¡£ç´¢å¼•
cat BUILD_INDEX.md

# å®ŒæˆæŠ¥å‘Š
cat FINAL_COMPLETION_REPORT.md
```

---

## â±ï¸ æ—¶é—´å‚è€ƒ

| æ–¹å¼ | å‡†å¤‡æ—¶é—´ | æ„å»ºæ—¶é—´ | æ€»æ—¶é—´ |
|------|---------|---------|--------|
| GitHub Actions | 5åˆ†é’Ÿ | 15-20åˆ†é’Ÿ | 20-25åˆ†é’Ÿ |
| æœ¬åœ°æ„å»ºï¼ˆé¦–æ¬¡ï¼‰ | 20-30åˆ†é’Ÿ | 20-30åˆ†é’Ÿ | 40-60åˆ†é’Ÿ |
| æœ¬åœ°æ„å»ºï¼ˆæœ‰ç¯å¢ƒï¼‰ | 5åˆ†é’Ÿ | 20-30åˆ†é’Ÿ | 25-35åˆ†é’Ÿ |

---

**ä¿å­˜æ­¤æ–‡æ¡£ï¼Œéšæ—¶æŸ¥é˜…ï¼**

**æœ€åæ›´æ–°ï¼š** 2025-10-23
