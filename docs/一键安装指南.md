# 🚀 KOOK消息转发系统 - 真正的一键安装指南

> **更新日期**: 2025-10-23  
> **适用版本**: v1.13.2+  
> **难度等级**: ⭐ 极简单

---

## 📋 安装方式总览

我们提供**4种安装方式**，满足不同用户需求：

| 方式 | 适合人群 | 步骤 | 时间 | 推荐度 |
|------|---------|------|------|--------|
| **方式1: 预编译安装包** | 所有用户 | 1步 | 2分钟 | ⭐⭐⭐⭐⭐ |
| **方式2: Windows增强安装** | Windows用户 | 1步 | 5-10分钟 | ⭐⭐⭐⭐⭐ |
| **方式3: Docker部署** | 服务器用户 | 1行命令 | 3分钟 | ⭐⭐⭐⭐ |
| **方式4: 一键安装脚本** | Linux/macOS用户 | 1行命令 | 5-10分钟 | ⭐⭐⭐⭐ |

---

## 🎯 方式1: 预编译安装包（推荐）

### 适合人群
- ✅ 所有普通用户
- ✅ 零技术背景
- ✅ 追求最简单的安装方式

### 步骤1: 下载安装包

访问 [GitHub Releases](https://github.com/gfchfjh/CSBJJWT/releases/latest) 页面

#### Windows用户
```
下载: KookForwarder-Setup-1.13.2.exe (~450MB)
- 支持 Windows 10/11 x64
- 包含所有依赖（Python、Node.js、Chromium、Redis）
- 双击安装，3步完成
```

#### macOS用户
```
下载: KookForwarder-1.13.2.dmg (~480MB)
- 支持 macOS 10.15+ (Intel/M1/M2)
- 包含所有依赖
- 拖拽安装，即开即用
```

#### Linux用户
```
下载: KookForwarder-1.13.2.AppImage (~420MB)
- 支持 Ubuntu 20.04+、Debian 11+、Fedora 35+
- 包含所有依赖
- 赋予执行权限即可运行
```

### 步骤2: 安装

#### Windows
```
1. 双击 KookForwarder-Setup-1.13.2.exe
2. 如果出现"Windows已保护你的电脑"：
   点击"更多信息" → "仍要运行"
3. 按照向导完成安装（约30秒）
4. 完成！
```

#### macOS
```
1. 打开 KookForwarder-1.13.2.dmg
2. 拖拽应用到"应用程序"文件夹
3. 首次打开：右键 → 打开（绕过安全检查）
4. 完成！
```

#### Linux
```bash
# 赋予执行权限
chmod +x KookForwarder-1.13.2.AppImage

# 运行
./KookForwarder-1.13.2.AppImage

# 完成！
```

### 步骤3: 首次配置

启动应用后，按照5步向导完成配置（约3分钟）：

1. **欢迎页** - 点击"开始配置"
2. **登录KOOK** - 使用Cookie或账号密码
3. **选择服务器** - 勾选要监听的频道
4. **配置Bot** - 设置Discord/Telegram/飞书（可跳过）
5. **完成** - 点击"启动服务"

**恭喜！可以开始使用了！** 🎉

---

## 🪟 方式2: Windows增强安装（全自动）

### 适合人群
- ✅ Windows用户
- ✅ 没有预编译包可用时
- ✅ 愿意等待5-10分钟自动安装

### 特点
- ✅ **自动下载并安装Python 3.11**
- ✅ **自动下载并安装Node.js 18**
- ✅ **自动下载并安装Git**
- ✅ **自动下载并安装Redis（可选）**
- ✅ **自动克隆项目代码**
- ✅ **自动安装所有依赖**
- ✅ **自动下载Chromium浏览器**
- ✅ **自动创建桌面快捷方式**

### 一键安装

**方法A: PowerShell一键安装（推荐）**

```powershell
# 以管理员身份运行PowerShell
# 执行以下命令：

Set-ExecutionPolicy Bypass -Scope Process -Force; `
[System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; `
iex ((New-Object System.Net.WebClient).DownloadString('https://raw.githubusercontent.com/gfchfjh/CSBJJWT/main/install_enhanced.bat'))
```

**方法B: 下载脚本手动运行**

```
1. 下载 install_enhanced.bat
   https://raw.githubusercontent.com/gfchfjh/CSBJJWT/main/install_enhanced.bat
   
2. 右键以管理员身份运行 install_enhanced.bat

3. 按照提示完成安装（约5-10分钟）

4. 双击桌面的"KOOK消息转发"快捷方式启动
```

### 安装过程

脚本将自动完成以下步骤：

```
✅ 检查管理员权限
✅ 检查并安装 Python 3.11（如未安装）
✅ 检查并安装 Node.js 18（如未安装）
✅ 检查并安装 Git（如未安装）
✅ 安装 Redis（可选）
✅ 克隆项目代码
✅ 创建Python虚拟环境
✅ 安装Python依赖（约3分钟）
✅ 安装Node.js依赖（约2分钟）
✅ 下载Chromium浏览器
✅ 创建启动脚本
✅ 创建桌面快捷方式
✅ 创建默认配置文件
```

### 完成后

```
双击桌面的"KOOK消息转发"快捷方式
→ 应用启动
→ 按照配置向导完成设置
→ 开始使用！
```

---

## 🐳 方式3: Docker一键部署

### 适合人群
- ✅ 有Linux/macOS服务器
- ✅ 熟悉Docker
- ✅ 需要后台运行24/7

### 方法A: 使用预构建镜像（推荐）

```bash
# 1. 拉取最新镜像并运行
docker run -d \
  --name kook-forwarder \
  --restart unless-stopped \
  -p 9527:9527 \
  -p 9528:9528 \
  -v $(pwd)/data:/app/data \
  -e TZ=Asia/Shanghai \
  ghcr.io/gfchfjh/csbjjwt:latest

# 2. 查看日志
docker logs -f kook-forwarder

# 3. 访问API
curl http://localhost:9527/health
```

### 方法B: 使用docker-compose

```bash
# 1. 下载并运行安装脚本（全自动）
curl -fsSL https://raw.githubusercontent.com/gfchfjh/CSBJJWT/main/docker-install.sh | bash

# 或手动操作：

# 2. 克隆项目
git clone https://github.com/gfchfjh/CSBJJWT.git
cd CSBJJWT

# 3. 启动服务
docker-compose -f docker-compose.standalone.yml up -d

# 4. 查看状态
docker-compose -f docker-compose.standalone.yml ps

# 5. 查看日志
docker-compose -f docker-compose.standalone.yml logs -f
```

### Docker常用命令

```bash
# 启动服务
docker-compose -f docker-compose.standalone.yml start

# 停止服务
docker-compose -f docker-compose.standalone.yml stop

# 重启服务
docker-compose -f docker-compose.standalone.yml restart

# 查看日志
docker-compose -f docker-compose.standalone.yml logs -f

# 更新到最新版本
docker-compose -f docker-compose.standalone.yml pull
docker-compose -f docker-compose.standalone.yml up -d

# 完全删除
docker-compose -f docker-compose.standalone.yml down -v
```

---

## 🐧 方式4: Linux/macOS一键安装脚本

### 适合人群
- ✅ Linux/macOS用户
- ✅ 愿意使用命令行
- ✅ 需要本地开发环境

### 一键安装

```bash
# 一行命令完成安装
curl -fsSL https://raw.githubusercontent.com/gfchfjh/CSBJJWT/main/install.sh | bash

# 或使用wget
wget -qO- https://raw.githubusercontent.com/gfchfjh/CSBJJWT/main/install.sh | bash
```

### 安装过程

脚本将自动完成：

```
✅ 检测操作系统
✅ 安装Python 3.11+（如未安装）
✅ 安装Node.js 18+（如未安装）
✅ 安装Redis（如未安装）
✅ 克隆项目代码
✅ 安装Python依赖
✅ 安装Node.js依赖
✅ 下载Chromium浏览器
✅ 创建启动脚本
✅ 创建配置文件
```

### 启动服务

```bash
cd CSBJJWT
./start.sh
```

---

## 🔍 验证安装

无论使用哪种方式，安装完成后请验证：

### 1. 检查服务状态

```bash
# 检查API服务
curl http://localhost:9527/health

# 应该返回
{"status": "ok"}
```

### 2. 检查端口

```bash
# Linux/macOS
netstat -an | grep 9527

# Windows (PowerShell)
netstat -an | findstr 9527

# 应该看到端口9527和9528在监听
```

### 3. 查看日志

```bash
# 预编译包/脚本安装
tail -f ~/Documents/KookForwarder/data/logs/app.log

# Docker部署
docker logs -f kook-forwarder
```

---

## 🆘 常见问题

### Q1: 预编译安装包在哪里下载？

**A**: 访问 [GitHub Releases](https://github.com/gfchfjh/CSBJJWT/releases/latest)

如果提示"Not Found"，说明还没有发布预编译包，请使用方式2/3/4。

### Q2: Windows增强安装失败怎么办？

**A**: 常见原因和解决方法：

```
1. 网络问题
   - 使用VPN或更换网络
   - 手动下载安装包到 %TEMP%\kook-forwarder-setup

2. 权限不足
   - 右键以管理员身份运行脚本

3. 杀毒软件拦截
   - 暂时关闭杀毒软件
   - 将安装目录添加到白名单

4. Python/Node.js安装失败
   - 手动安装：
     Python: https://www.python.org/downloads/
     Node.js: https://nodejs.org/
   - 重新运行脚本
```

### Q3: Docker部署启动失败？

**A**: 检查以下几点：

```bash
# 1. 查看日志
docker logs kook-forwarder

# 2. 检查端口占用
netstat -an | grep 9527

# 3. 检查磁盘空间
df -h

# 4. 重新部署
docker-compose -f docker-compose.standalone.yml down
docker-compose -f docker-compose.standalone.yml up -d
```

### Q4: macOS提示"无法打开，因为它来自身份不明的开发者"？

**A**: 绕过安全检查：

```
方法1: 右键打开
1. 右键点击应用图标
2. 选择"打开"
3. 再次点击"打开"确认

方法2: 修改安全设置
1. 系统偏好设置 → 安全性与隐私
2. 点击"仍要打开"

方法3: 使用命令行
xattr -cr /Applications/KOOK消息转发系统.app
```

### Q5: Linux AppImage无法运行？

**A**: 安装依赖：

```bash
# Ubuntu/Debian
sudo apt install libfuse2

# Fedora
sudo dnf install fuse-libs

# Arch Linux
sudo pacman -S fuse2

# 然后重新运行
chmod +x KookForwarder-*.AppImage
./KookForwarder-*.AppImage
```

---

## 📊 安装方式对比

| 特性 | 预编译包 | Windows增强 | Docker | 安装脚本 |
|------|---------|-------------|--------|---------|
| **安装时间** | 2分钟 | 5-10分钟 | 3分钟 | 5-10分钟 |
| **需要网络** | 仅下载包 | 全程需要 | 全程需要 | 全程需要 |
| **需要权限** | 普通用户 | 管理员 | 普通用户 | 管理员 |
| **安装大小** | ~450MB | ~2GB | ~1GB | ~2GB |
| **依赖管理** | 全自动 | 全自动 | 全自动 | 全自动 |
| **更新方式** | 下载新版 | 重新运行脚本 | docker pull | git pull |
| **卸载方式** | 控制面板 | 删除目录 | docker rm | 删除目录 |
| **跨平台** | ✅ | ❌ 仅Windows | ✅ | ✅ |
| **推荐度** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ |

---

## 📚 下一步

安装完成后：

1. 📖 [快速开始指南](../QUICK_START.md) - 5分钟上手
2. 📚 [用户手册](用户手册.md) - 完整功能说明
3. 🎬 [视频教程](视频教程/) - 视频演示
4. ❓ [常见问题](FAQ.md) - 问题解答

---

## 💬 获取帮助

如有问题：

- 📖 查看 [故障排查指南](故障排查指南.md)
- ❓ 搜索 [已有Issues](https://github.com/gfchfjh/CSBJJWT/issues)
- 🐛 提交 [新Issue](https://github.com/gfchfjh/CSBJJWT/issues/new)

---

<div align="center">

**享受真正的一键安装体验！** 🚀

Made with ❤️ by KOOK Forwarder Team

[返回主页](../README.md) | [快速开始](../QUICK_START.md) | [提交Issue](https://github.com/gfchfjh/CSBJJWT/issues)

</div>
