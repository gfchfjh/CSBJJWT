# 📖 KOOK消息转发系统 - 用户手册

**版本**: v11.0.0 Enhanced  
**最后更新**: 2025-10-28

---

## 📋 目录

1. [系统简介](#-系统简介)
2. [安装部署](#-安装部署)
3. [快速配置](#-快速配置)
4. [功能详解](#-功能详解)
5. [高级功能](#-高级功能)
6. [故障排查](#-故障排查)
7. [FAQ](#-faq)

---

## 🎯 系统简介

KOOK消息转发系统是一款**生产级**的跨平台消息转发中间件，支持将KOOK平台的消息实时转发到Discord、Telegram、飞书等多个平台。

### 核心特性

- ⚡ **5分钟安装** - 独立安装包，无需配置环境
- 🎯 **3步配置** - 智能向导，AI推荐映射（90%+准确度）
- 🍪 **一键Cookie** - Chrome扩展，2步完成导出
- 🧠 **AI推荐** - 三重匹配算法，历史学习
- 🔒 **安全可靠** - Token验证，路径防护，AES加密
- 📊 **实时监控** - 系统托盘，5秒刷新
- 🚀 **高性能** - 1000+/小时吞吐量，<500ms延迟

### 适用场景

- 🎮 **游戏社区** - 跨平台社区管理
- 💼 **企业团队** - 内外部沟通桥梁
- 👥 **内容创作** - 多平台消息统一管理

---

## 📦 安装部署

### 方式1: 独立安装包（推荐）⭐

**最简单！零配置！**

1. 下载安装包
   - Windows: `KOOK-Forwarder-v11.0.0-Enhanced-Windows.zip`
   - Linux: `KOOK-Forwarder-v11.0.0-Enhanced-Linux.zip`
   - macOS: `KOOK-Forwarder-v11.0.0-Enhanced-macOS.zip`

2. 解压并启动
   ```bash
   # Windows: 双击 start.bat
   # Linux/macOS: 
   chmod +x start.sh
   ./start.sh
   ```

3. 访问系统
   ```
   http://localhost:9527
   ```

### 方式2: Docker部署

```bash
git clone https://github.com/gfchfjh/CSBJJWT.git
cd CSBJJWT
docker-compose up -d
```

### 方式3: 源码安装

```bash
git clone https://github.com/gfchfjh/CSBJJWT.git
cd CSBJJWT
./install.sh  # Linux/macOS
install.bat   # Windows
./start.sh    # 启动
```

---

## 🎯 快速配置

### 3步配置向导

首次打开会自动进入配置向导：

#### 步骤1: 登录KOOK（1分钟）

**推荐：Chrome扩展**
1. 安装扩展（加载已解压的扩展程序）
2. 访问 www.kookapp.cn 并登录
3. 点击扩展图标 → "一键导出Cookie"
4. 自动导入完成 ✅

**备选：账号密码**
- 输入邮箱和密码
- 如需验证码，按提示输入

#### 步骤2: 配置Bot（2分钟）

**Discord**:
1. 获取Webhook URL
2. 填入系统并测试连接

**Telegram**:
1. 创建Bot（@BotFather）
2. 获取Token和Chat ID
3. 测试连接

**飞书**:
1. 创建自建应用
2. 获取App ID和Secret
3. 测试连接

#### 步骤3: AI智能映射（1分钟）

- 系统自动加载KOOK频道
- AI生成智能推荐（90%+准确度）
- 一键应用或手动调整
- 完成配置 ✅

详见：[快速入门指南](tutorials/01-快速入门指南.md)

---

## 💡 功能详解

### 1. 账号管理

- 支持多账号
- Cookie导入/账号密码登录
- 在线状态监控
- 自动重连

### 2. Bot配置

- Discord Webhook
- Telegram Bot API
- 飞书OpenAPI
- 测试连接功能

### 3. 频道映射

- 手动映射
- AI智能推荐（90%+准确度）
- 批量导入/导出
- 映射模板

### 4. 消息过滤

- 关键词过滤
- 黑白名单
- 正则表达式
- @提及过滤

### 5. 实时监控

- 转发统计
- 成功率分析
- 队列监控
- 系统托盘（5秒刷新）

---

## 🚀 高级功能

### AI映射学习引擎

**三重匹配算法**:
- 完全匹配（40%）
- 相似度匹配（30%）
- 关键词匹配（20%）
- 历史学习（10%）

**中英文互译**:
- "公告" ↔ "announcement"
- "闲聊" ↔ "general", "chat"
- 50+ 映射规则

### 图片处理

- 智能压缩
- 本地图床（Token验证）
- 图片直传（Discord/Telegram）
- 自动清理

### 消息队列

- Redis队列
- 批量处理（10条/次）
- 失败重试
- 消息去重

---

## 🔧 故障排查

### Cookie导入失败

**解决方案**:
1. 确保登录 www.kookapp.cn
2. 使用Chrome浏览器
3. 清除缓存后重试
4. 检查扩展是否正确安装

### 消息没有转发

**检查项**:
1. 服务是否运行（系统托盘）
2. 频道映射是否正确
3. Bot配置是否有效
4. 查看日志错误信息

### 端口被占用

**解决方案**:
修改 `backend/config.json`:
```json
{
  "port": 9528,
  "redis_port": 6380
}
```

### 环境检测

运行环境检测工具：
```bash
python -m backend.app.utils.environment_checker
```

---

## ❓ FAQ

### Q: 支持哪些平台？
A: KOOK → Discord/Telegram/飞书

### Q: 需要什么配置？
A: 独立安装包无需任何配置

### Q: 是否收费？
A: 完全免费开源（MIT License）

### Q: 数据安全吗？
A: 
- ✅ 本地运行，不上传数据
- ✅ AES-256加密
- ✅ Token验证
- ✅ 开源可审计

### Q: 性能如何？
A:
- 吞吐量: 1000+/小时
- 延迟: <500ms
- 成功率: 98%+

---

## 📚 相关文档

- [快速入门指南](tutorials/01-快速入门指南.md)
- [Cookie获取教程](tutorials/02-Cookie获取详细教程.md)
- [Discord配置教程](tutorials/03-Discord配置教程.md)
- [Telegram配置教程](tutorials/04-Telegram配置教程.md)
- [架构设计](架构设计.md)
- [API文档](API接口文档.md)

---

## 🆘 获取帮助

- GitHub Issues: https://github.com/gfchfjh/CSBJJWT/issues
- 完整FAQ: [常见问题FAQ](tutorials/FAQ-常见问题.md)

---

<div align="center">

**用户手册 v11.0.0 Enhanced**

*最后更新: 2025-10-28*

</div>
