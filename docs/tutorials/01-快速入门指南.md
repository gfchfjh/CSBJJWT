# 🎬 KOOK消息转发系统 - 快速入门指南

> **目标**: 10分钟内完成安装和基础配置，成功转发第一条消息
> 
> **版本**: v11.0.0 Enhanced  
> **预计时间**: 10分钟

---

## 📋 准备工作

### 必需条件
- ✅ 一台电脑（Windows/Linux/macOS）
- ✅ KOOK账号（已登录）
- ✅ 目标平台账号（Discord/Telegram/飞书任选其一）

### 可选但推荐
- ✅ Chrome浏览器（用于Cookie导出）
- ✅ 稳定的网络连接

---

## 🚀 第一步：安装系统（2分钟）

### 方式1: 独立安装包（推荐新手）

**最简单！零配置！**

1. **下载安装包**
   
   访问 [Releases页面](https://github.com/gfchfjh/CSBJJWT/releases/latest)
   
   根据您的操作系统选择：
   - Windows: `KOOK-Forwarder-v11.0.0-Enhanced-Windows.zip`
   - Linux: `KOOK-Forwarder-v11.0.0-Enhanced-Linux.zip`
   - macOS: `KOOK-Forwarder-v11.0.0-Enhanced-macOS.zip`

2. **解压文件**
   
   ```bash
   # 解压到任意目录（推荐英文路径）
   # 例如: C:\KOOK-Forwarder 或 /home/user/KOOK-Forwarder
   ```

3. **启动系统**
   
   **Windows**:
   ```batch
   # 双击运行
   start.bat
   ```
   
   **Linux/macOS**:
   ```bash
   chmod +x start.sh
   ./start.sh
   ```

4. **等待启动完成**
   
   ```
   [1/3] 启动Redis... ✅
   [2/3] 启动后端服务... ✅
   [3/3] 启动前端界面... ✅
   
   ✅ 系统已启动！
   📝 访问: http://localhost:9527
   ```

5. **浏览器自动打开**
   
   系统会自动打开浏览器访问 `http://localhost:9527`

---

### 方式2: Docker部署（推荐服务器）🐳

```bash
# 1. 克隆项目
git clone https://github.com/gfchfjh/CSBJJWT.git
cd CSBJJWT

# 2. 一键启动（所有服务）
docker-compose up -d

# 3. 访问系统
# http://localhost:9527
```

---

### 方式3: 源码安装（推荐开发者）💻

```bash
# 1. 克隆项目
git clone https://github.com/gfchfjh/CSBJJWT.git
cd CSBJJWT

# 2. 安装依赖
./install.sh  # Linux/macOS
install.bat   # Windows

# 3. 启动系统
./start.sh    # Linux/macOS
start.bat     # Windows
```

---

## 🎯 第二步：3步配置向导（5分钟）

首次打开系统会自动进入**3步配置向导**，超级简单！

### 步骤1: 登录KOOK（1分钟）🍪

**推荐方式：使用Chrome扩展**

1. **安装Chrome扩展**
   
   ```
   1. 打开 chrome://extensions/
   2. 开启"开发者模式"
   3. 点击"加载已解压的扩展程序"
   4. 选择扩展目录: chrome-extension/
   ```

2. **导出Cookie**
   
   ```
   1. 访问 www.kookapp.cn 并登录
   2. 点击浏览器工具栏的扩展图标
   3. 点击"🍪 一键导出Cookie"
   4. Cookie自动导入到系统 ✅
   ```

**备选方式：账号密码登录**

```
1. 输入KOOK邮箱
2. 输入密码
3. 如需验证码，按提示输入
4. 点击"登录并继续"
```

**提示**: Chrome扩展方式成功率更高（95%+），推荐使用！

---

### 步骤2: 配置Bot（2分钟）🤖

选择一个目标平台并配置Bot：

#### Discord配置

1. **获取Webhook URL**
   
   ```
   1. 打开Discord，进入你的服务器
   2. 右键点击目标频道 → 编辑频道
   3. 点击"整合" → "Webhook" → "创建Webhook"
   4. 点击"复制Webhook URL"
   ```

2. **填写到系统**
   
   ```
   Bot名称: KOOK转发Bot（随意）
   Webhook URL: https://discord.com/api/webhooks/...
   ```

3. **测试连接**
   
   点击"测试连接"按钮，如果看到Discord收到测试消息，说明配置成功！

---

#### Telegram配置

1. **创建Bot**
   
   ```
   1. 在Telegram搜索 @BotFather
   2. 发送 /newbot
   3. 按提示设置Bot名称
   4. 复制Bot Token
   ```

2. **获取Chat ID**
   
   ```
   方式1 (自动检测):
   1. 将Bot添加到目标群组
   2. 在群组中发送任意消息
   3. 点击系统中的"自动获取Chat ID"
   4. 系统会自动检测并填充
   
   方式2 (手动):
   1. 访问 https://api.telegram.org/bot<你的Token>/getUpdates
   2. 找到 "chat":{"id":-1001234567890}
   3. 复制这个ID
   ```

3. **填写到系统**
   
   ```
   Bot名称: KOOK转发Bot
   Bot Token: 1234567890:ABCdefGHI...
   Chat ID: -1001234567890
   ```

4. **测试连接**
   
   点击"测试连接"，Telegram群组会收到测试消息

---

#### 飞书配置

1. **创建自建应用**
   
   ```
   1. 访问 https://open.feishu.cn/
   2. 创建企业自建应用
   3. 获取App ID和App Secret
   ```

2. **添加到群组**
   
   ```
   1. 将机器人添加到飞书群组
   2. 获取群组的Chat ID（在群组设置中）
   ```

3. **填写到系统**
   
   ```
   Bot名称: KOOK转发Bot
   App ID: cli_a1b2c3d4e5f6g7h8
   App Secret: ABCdefGHIjklMNOpqrs
   Chat ID: oc_xxx
   ```

---

### 步骤3: AI智能映射（1分钟）🧠

**最神奇的一步！** AI会自动推荐合适的频道映射

1. **系统自动加载KOOK频道**
   
   ```
   正在加载KOOK频道...
   ✅ 发现 15 个频道
   ```

2. **AI生成智能推荐**
   
   ```
   公告频道 → Discord: #announcements (95%) ✅
   闲聊      → Discord: #general (92%) ✅
   游戏讨论  → Discord: #gaming (90%) ✅
   技术交流  → Discord: #tech (85%) ✅
   ...
   ```
   
   **置信度说明**:
   - 🟢 90%+: 高置信度，推荐直接使用
   - 🟡 80-90%: 中置信度，建议review
   - 🔴 <80%: 低置信度，需要手动调整

3. **一键应用或手动调整**
   
   ```
   ✅ 选择高置信度推荐（≥80%）- 快速完成
   🔧 手动调整个别映射 - 精确控制
   ```

4. **完成配置**
   
   点击"完成配置"，系统会自动保存并启动转发服务

---

## 🎉 第三步：测试转发（2分钟）

1. **在KOOK发送测试消息**
   
   在已映射的KOOK频道发送一条消息：
   ```
   这是一条测试消息 from KOOK
   ```

2. **检查目标平台**
   
   几秒钟后，在Discord/Telegram/飞书查看是否收到消息：
   ```
   KOOK消息转发: 这是一条测试消息 from KOOK
   ```

3. **查看实时日志**
   
   在系统首页可以看到实时日志：
   ```
   [2025-10-28 10:30:15] ✅ 消息转发成功
   来源: KOOK #公告频道
   目标: Discord #announcements
   延迟: 234ms
   ```

---

## 📊 第四步：实时监控（1分钟）

### 主页统计

系统首页显示实时统计：

```
┌─────────────────────────────────┐
│  转发总数: 1,234                 │
│  成功率: 98.5%                   │
│  平均延迟: 320ms                 │
│  队列消息: 5                     │
└─────────────────────────────────┘
```

### 系统托盘

右下角系统托盘会显示实时状态（每5秒刷新）：

```
KOOK消息转发系统
状态: 运行中
转发: 1,234 条
成功率: 98.5%
队列: 5 条
```

右键托盘图标可以：
- ⏸️ 停止/启动服务
- 🔄 重启服务
- 📁 打开主窗口
- 📋 查看日志

---

## ✅ 完成！

恭喜！您已经成功完成了基础配置，现在系统会自动转发KOOK消息到目标平台。

### 下一步可以做什么？

1. **添加更多Bot** - 支持同时转发到多个平台
2. **配置过滤规则** - 只转发特定类型的消息
3. **调整映射关系** - 精细化控制每个频道的转发
4. **查看详细日志** - 分析转发情况

---

## ❓ 常见问题

### Q1: Cookie导入失败怎么办？

**A**: 尝试以下方法：
1. 确保已登录 www.kookapp.cn（注意域名）
2. 清除浏览器缓存后重新登录
3. 使用Chrome浏览器（兼容性强）
4. 检查Chrome扩展是否正确安装

### Q2: 验证码无法通过？

**A**: 
1. 使用Cookie导入方式（推荐）
2. 如必须用账号密码，系统会自动截图验证码
3. 在60秒内输入验证码

### Q3: 消息没有转发？

**A**: 检查以下几点：
1. 服务是否正常运行（查看系统托盘）
2. 频道映射是否正确配置
3. 查看日志是否有错误信息
4. 测试Bot连接是否正常

### Q4: 如何停止系统？

**A**: 
- **Windows**: 双击 `stop.bat`
- **Linux/macOS**: 运行 `./stop.sh`
- **或**: 系统托盘右键 → 停止服务

### Q5: 端口被占用怎么办？

**A**: 
修改配置文件 `backend/config.json`:
```json
{
  "port": 9528,  // 改为其他端口
  "redis_port": 6380  // Redis端口
}
```

---

## 📚 进阶教程

完成基础配置后，可以继续学习：

- [Cookie获取详细教程](02-Cookie获取详细教程.md)
- [Discord配置教程](03-Discord配置教程.md)
- [Telegram配置教程](04-Telegram配置教程.md)
- [飞书配置教程](05-飞书配置教程.md)
- [频道映射详解](06-频道映射详解教程.md)
- [过滤规则使用技巧](07-过滤规则使用技巧.md)

---

## 🆘 获取帮助

遇到问题？

1. **查看FAQ**: [常见问题FAQ](FAQ-常见问题.md)
2. **查看日志**: 系统首页 → 日志页面
3. **环境检测**: 运行环境检测工具
   ```bash
   python -m backend.app.utils.environment_checker
   ```
4. **提交Issue**: [GitHub Issues](https://github.com/gfchfjh/CSBJJWT/issues)

---

<div align="center">

**🎉 享受自动转发的便捷吧！**

如有问题，随时查看 [完整文档](../用户手册.md)

</div>
