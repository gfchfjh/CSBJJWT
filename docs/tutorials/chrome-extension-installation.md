# Chrome扩展安装教程

**KOOK Cookie 一键导出工具**

---

## 📦 什么是Chrome扩展？

KOOK Cookie 一键导出扩展是我们为简化登录流程而开发的浏览器工具。它可以：

- ✅ 一键导出KOOK的Cookie
- ✅ 自动格式化为JSON格式
- ✅ 直接复制到剪贴板或下载文件
- ✅ 简单安全，无需手动操作

---

## 🚀 安装步骤

### 方式一：从Chrome网上应用店安装（推荐）

1. **打开Chrome网上应用店**
   ```
   https://chrome.google.com/webstore/
   ```

2. **搜索"KOOK Cookie Exporter"**
   - 或直接访问扩展页面：`chrome-extension://your-extension-id`

3. **点击"添加至Chrome"**
   - 浏览器会弹出确认对话框
   - 点击"添加扩展程序"

4. **安装完成**
   - 扩展图标会出现在浏览器工具栏
   - 点击图标即可使用

---

### 方式二：手动加载（开发者模式）

适用于以下情况：
- Chrome网上应用店访问受限
- 使用本地开发版本
- 需要自定义修改

#### 步骤详解

##### 1. 获取扩展文件

从项目仓库下载或使用本地文件：

```bash
# 位置：项目根目录/chrome-extension/
KOOK-Forwarder/
└── chrome-extension/
    ├── manifest.json
    ├── background.js
    ├── popup.html
    ├── popup.js
    ├── content.js
    └── icons/
        ├── icon16.png
        ├── icon48.png
        └── icon128.png
```

##### 2. 打开Chrome扩展管理页面

**方法一：通过地址栏**
```
chrome://extensions/
```

**方法二：通过菜单**
1. 点击Chrome右上角的三个点 `⋮`
2. 选择"更多工具" → "扩展程序"

##### 3. 启用开发者模式

在扩展管理页面右上角，找到"开发者模式"开关，**打开它**。

![开发者模式](../images/dev-mode.png)

##### 4. 加载扩展

点击"加载已解压的扩展程序"按钮，选择扩展所在的文件夹：

```
选择文件夹：项目根目录/chrome-extension/
```

##### 5. 确认安装

安装成功后，你会看到：

- ✅ 扩展出现在列表中
- ✅ 扩展图标显示在工具栏
- ✅ 状态显示为"已启用"

---

## 🎯 使用教程

### 1. 登录KOOK

首先在浏览器中登录KOOK：

```
https://www.kookapp.cn/
```

确保登录成功后再使用扩展。

### 2. 打开扩展

点击浏览器工具栏中的扩展图标。

如果图标没有显示，点击工具栏的拼图图标 `🧩`，找到"KOOK Cookie Exporter"并固定。

### 3. 导出Cookie

在弹出的窗口中：

**方法一：复制到剪贴板**
1. 点击"复制Cookie"按钮
2. 提示"已复制到剪贴板"
3. 打开KOOK消息转发系统
4. 在登录页面粘贴（Ctrl+V）

**方法二：下载JSON文件**
1. 点击"下载Cookie文件"按钮
2. 浏览器会自动下载`kook-cookies.json`
3. 在KOOK消息转发系统中上传该文件

### 4. 导入到系统

在KOOK消息转发系统的首次配置向导中：

1. 选择"Cookie 一键导入"
2. 粘贴或上传Cookie文件
3. 点击"验证并登录"
4. 完成！

---

## ❓ 常见问题

### Q1: 扩展图标没有显示？

**A:** 
1. 点击浏览器工具栏的拼图图标 `🧩`
2. 找到"KOOK Cookie Exporter"
3. 点击图钉图标固定到工具栏

### Q2: 点击扩展没有反应？

**A:** 
1. 确认已经登录KOOK网站
2. 刷新KOOK页面后重试
3. 检查扩展是否已启用
4. 查看控制台是否有错误（F12）

### Q3: Cookie导出后登录失败？

**A:** 
可能的原因：
1. Cookie已过期（请重新登录KOOK）
2. Cookie格式不正确（请使用最新版本扩展）
3. KOOK已登出（请确保浏览器保持登录状态）

解决方法：
1. 重新登录KOOK
2. 清除浏览器缓存后重试
3. 使用账号密码登录方式作为备选

### Q4: 扩展加载失败？

**A:** 
检查以下几点：
1. 文件夹路径是否正确
2. `manifest.json`文件是否完整
3. 是否启用了开发者模式
4. Chrome版本是否过旧（需要Chrome 88+）

### Q5: 安全性问题？

**A:** 
本扩展：
- ✅ 完全开源，代码可审查
- ✅ 不上传任何数据到服务器
- ✅ 仅读取本地Cookie，不修改
- ✅ 所有操作在本地完成

您可以查看源代码确认：`chrome-extension/background.js`

---

## 🔒 安全提示

1. **不要将Cookie分享给他人**
   - Cookie相当于登录凭证
   - 泄露Cookie等同于泄露账号

2. **定期更换密码**
   - 建议每月更换一次KOOK密码
   - 密码更换后需要重新导出Cookie

3. **注意设备安全**
   - 在公共电脑上使用后记得退出
   - 不要在不信任的设备上使用

4. **Cookie有效期**
   - Cookie通常有效期为30天
   - 过期后需要重新导出

---

## 🛠️ 故障排查

### 扩展无法安装

**症状：**点击"添加扩展程序"后没有反应

**解决：**
```bash
1. 检查manifest.json格式是否正确
2. 确认所有必需文件都存在
3. 查看Chrome控制台错误信息
4. 尝试重启Chrome浏览器
```

### Cookie导出为空

**症状：**导出的Cookie文件内容为空或只有`[]`

**解决：**
```bash
1. 确认已经登录KOOK网站
2. 刷新KOOK页面
3. 重新打开扩展导出
4. 检查是否被其他扩展冲突
```

### 导入后无法登录

**症状：**提示"Cookie无效"或"登录失败"

**解决：**
```bash
1. 重新登录KOOK网站
2. 清除浏览器缓存（Ctrl+Shift+Delete）
3. 使用无痕模式重新登录KOOK
4. 重新导出Cookie并导入
```

---

## 📞 技术支持

### 方式一：查看文档
- [用户手册](../USER_MANUAL.md)
- [常见问题](../FAQ.md)
- [开发指南](../开发指南.md)

### 方式二：在线支持
- GitHub Issues: https://github.com/gfchfjh/CSBJJWT/issues
- 讨论区: https://github.com/gfchfjh/CSBJJWT/discussions

### 方式三：反馈问题

如果遇到问题，请提供以下信息：

```
1. Chrome版本：chrome://version/
2. 扩展版本：在扩展管理页面查看
3. 操作系统：Windows/macOS/Linux
4. 错误截图：按F12打开控制台截图
5. 详细步骤：描述重现问题的步骤
```

---

## 📋 扩展权限说明

本扩展需要以下权限：

| 权限 | 用途 | 说明 |
|------|------|------|
| `cookies` | 读取Cookie | 用于导出KOOK的登录Cookie |
| `storage` | 本地存储 | 保存扩展设置（可选） |
| `activeTab` | 当前标签页 | 检测是否在KOOK网站 |
| `clipboardWrite` | 写入剪贴板 | 复制Cookie到剪贴板 |

**我们承诺：**
- ✅ 绝不上传任何数据
- ✅ 绝不修改Cookie
- ✅ 绝不追踪用户行为
- ✅ 完全开源透明

---

## 🔄 更新日志

### v1.0.0 (2025-10-30)
- ✅ 初始版本发布
- ✅ 支持一键导出Cookie
- ✅ 支持复制到剪贴板
- ✅ 支持下载JSON文件

### v1.1.0 (计划中)
- 🔜 支持自动格式转换
- 🔜 支持批量导出多个账号
- 🔜 添加Cookie有效期检测
- 🔜 支持更多浏览器（Firefox/Edge）

---

## 📝 开发者信息

### 本地开发

如果您想修改或贡献代码：

```bash
# 1. 克隆仓库
git clone https://github.com/gfchfjh/CSBJJWT.git

# 2. 进入扩展目录
cd CSBJJWT/chrome-extension

# 3. 在Chrome中加载
# chrome://extensions/ → 开发者模式 → 加载已解压的扩展程序

# 4. 修改代码后重新加载
# 点击扩展卡片上的刷新图标
```

### 文件说明

```
chrome-extension/
├── manifest.json       # 扩展清单文件（必需）
├── background.js       # 后台脚本（处理Cookie）
├── popup.html          # 弹窗界面HTML
├── popup.js            # 弹窗界面逻辑
├── content.js          # 内容脚本（注入页面）
└── icons/              # 图标文件夹
    ├── icon16.png      # 16x16图标
    ├── icon48.png      # 48x48图标
    └── icon128.png     # 128x128图标
```

### 调试技巧

1. **查看后台脚本日志**
   ```
   chrome://extensions/ → 扩展详情 → 背景页 → 检查视图
   ```

2. **查看弹窗日志**
   ```
   右键扩展图标 → 检查弹出内容
   ```

3. **查看内容脚本日志**
   ```
   在KOOK页面按F12 → Console标签
   ```

---

## ✅ 总结

通过安装Chrome扩展，您可以：

1. ⚡ **更快速**：3秒完成Cookie导出
2. 🛡️ **更安全**：本地操作，不上传数据
3. 😊 **更简单**：无需手动复制粘贴
4. 🎯 **更准确**：自动格式化，避免错误

现在就安装扩展，享受便捷的登录体验吧！

---

**文档版本**: v1.0  
**更新时间**: 2025-10-30  
**适用扩展版本**: v1.0.0+
