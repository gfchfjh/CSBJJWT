# 如何获取KOOK Cookie

本教程将详细介绍如何从浏览器中获取KOOK的Cookie信息，用于配置消息转发系统。

---

## 📋 目录

1. [方法一：浏览器开发者工具（推荐）](#方法一浏览器开发者工具推荐)
2. [方法二：Chrome扩展一键导出](#方法二chrome扩展一键导出)
3. [常见问题](#常见问题)

---

## 方法一：浏览器开发者工具（推荐）

### 适用浏览器
- ✅ Google Chrome
- ✅ Microsoft Edge
- ✅ Firefox
- ✅ Brave
- ✅ Opera

### 详细步骤

#### 步骤1：登录KOOK网页版

1. 打开浏览器，访问 [https://www.kookapp.cn/app](https://www.kookapp.cn/app)
2. 使用您的邮箱和密码登录账号
3. 确保登录成功，能看到频道列表

> **截图说明**：
> - [ ] 截图：KOOK登录页面
> - [ ] 截图：登录成功后的主界面

---

#### 步骤2：打开开发者工具

**快捷键**：
- Windows/Linux: `F12` 或 `Ctrl + Shift + I`
- macOS: `Cmd + Option + I`

**或者右键菜单**：
1. 在页面任意位置点击右键
2. 选择"检查"（Inspect）或"检查元素"

> **截图说明**：
> - [ ] 截图：右键菜单中的"检查"选项
> - [ ] 截图：开发者工具打开后的界面

---

#### 步骤3：切换到"Network"（网络）标签

1. 在开发者工具顶部，点击 **Network** 标签
2. 确保"Network"面板已激活

> **提示**：如果看不到Network标签，可能需要点击 `>>` 符号展开更多标签

> **截图说明**：
> - [ ] 截图：Network标签的位置（用红框标注）

---

#### 步骤4：刷新页面并查找请求

1. 按 `F5` 或 `Ctrl + R` 刷新页面
2. 等待页面加载完成，Network面板会显示所有网络请求
3. 在左侧的Filter（过滤器）输入框中输入：`api`
4. 找到任意一个发往 `www.kookapp.cn` 的请求

> **推荐查找的请求**：
> - `api/v3/user/me`
> - `api/v3/guild/list`
> - 任何 `api/v3/` 开头的请求

> **截图说明**：
> - [ ] 截图：Network面板显示的请求列表
> - [ ] 截图：过滤器输入"api"后的效果
> - [ ] 截图：点击某个API请求（用红框标注）

---

#### 步骤5：复制Cookie信息

1. 点击选中任意一个API请求
2. 在右侧面板中，切换到 **Headers** 标签
3. 向下滚动，找到 **Request Headers** 部分
4. 找到 `Cookie:` 这一行
5. **点击Cookie后面的值**，全选并复制

**Cookie示例**（仅供参考，每个人的都不同）：
```
_ga=GA1.2.123456789.1234567890; _gid=GA1.2.987654321.0987654321; kook_token=abcdefghijklmnopqrstuvwxyz123456; user_id=123456
```

> **重要提示**：
> - ✅ 复制整行Cookie内容，不要遗漏
> - ✅ Cookie包含 `kook_token` 是关键
> - ⚠️ Cookie是敏感信息，请勿泄露给他人

> **截图说明**：
> - [ ] 截图：Headers标签页
> - [ ] 截图：Request Headers部分（用红框标注）
> - [ ] 截图：Cookie字段（高亮标注）

---

#### 步骤6：保存Cookie到JSON文件

1. 打开文本编辑器（如记事本、VSCode、Notepad++）
2. 将Cookie格式化为JSON格式：

**JSON格式示例**：
```json
{
  "_ga": "GA1.2.123456789.1234567890",
  "_gid": "GA1.2.987654321.0987654321",
  "kook_token": "abcdefghijklmnopqrstuvwxyz123456",
  "user_id": "123456"
}
```

**快速转换方法**：
1. 复制的Cookie是 `key1=value1; key2=value2` 格式
2. 将 `=` 替换为 `: "`
3. 在每个值后添加 `",`
4. 最后一个不加逗号
5. 用 `{ }` 包裹整体

3. 保存为 `kook_cookies.json` 文件

> **截图说明**：
> - [ ] 截图：文本编辑器中的JSON内容
> - [ ] 截图：保存文件对话框

---

#### 步骤7：导入到KOOK转发系统

1. 打开KOOK消息转发系统
2. 在配置向导或账号管理页面，选择 **"Cookie导入"**
3. 点击 **"上传JSON文件"** 或 **"粘贴Cookie文本"**
4. 选择刚才保存的 `kook_cookies.json` 文件
5. 点击 **"验证并添加"**

> **系统会自动验证Cookie是否有效**：
> - ✅ 验证成功：显示账号信息
> - ❌ 验证失败：提示Cookie无效或已过期

> **截图说明**：
> - [ ] 截图：转发系统的Cookie导入界面
> - [ ] 截图：导入成功的提示

---

## 方法二：Chrome扩展一键导出

### 适用场景
- 不想手动复制Cookie
- 需要定期更新Cookie
- 想要更简单的操作

### 使用步骤

#### 步骤1：安装Chrome扩展

1. 打开Chrome浏览器
2. 访问本项目的 `chrome-extension` 目录
3. 或者直接安装打包好的扩展（如果提供）

**安装方法**：
1. 打开 `chrome://extensions/`
2. 开启右上角的 **"开发者模式"**
3. 点击 **"加载已解压的扩展程序"**
4. 选择项目的 `chrome-extension` 文件夹
5. 扩展安装成功，显示在工具栏

> **截图说明**：
> - [ ] 截图：Chrome扩展管理页面
> - [ ] 截图：开发者模式开关（用红框标注）
> - [ ] 截图：加载扩展按钮
> - [ ] 截图：扩展安装成功的图标

---

#### 步骤2：使用扩展导出Cookie

1. 登录 [KOOK网页版](https://www.kookapp.cn/app)
2. 点击浏览器工具栏中的 **KOOK Cookie导出器** 图标
3. 点击 **"导出当前Cookie"** 按钮
4. Cookie会自动复制到剪贴板，或下载为JSON文件

> **功能说明**：
> - ✅ 一键导出：无需手动查找
> - ✅ 自动格式化：JSON格式直接可用
> - ✅ 实时检测：自动识别KOOK页面

> **截图说明**：
> - [ ] 截图：扩展弹窗界面
> - [ ] 截图：点击导出按钮
> - [ ] 截图：导出成功提示

---

#### 步骤3：导入到转发系统

1. 打开KOOK消息转发系统
2. 选择 **"Cookie导入"** → **"粘贴Cookie文本"**
3. 粘贴刚才复制的Cookie（`Ctrl + V`）
4. 点击 **"验证并添加"**

---

## 常见问题

### ❓ 1. Cookie在哪里？找不到

**解决方法**：
1. 确保已经登录KOOK网页版
2. 确保在Network标签中找对了请求（必须是 `www.kookapp.cn` 域名的请求）
3. 如果列表为空，按F5刷新页面
4. 如果还是没有，清空浏览器缓存后重新登录

---

### ❓ 2. Cookie导入后提示"验证失败"

**可能原因**：
1. **Cookie格式错误**：检查JSON格式是否正确（逗号、引号、括号）
2. **Cookie已过期**：重新获取最新的Cookie
3. **缺少关键字段**：确保包含 `kook_token` 字段
4. **账号被封禁**：检查KOOK账号状态

**解决方法**：
- 重新登录KOOK，获取新的Cookie
- 使用JSON格式验证工具检查格式
- 确保复制了完整的Cookie内容

---

### ❓ 3. Cookie多久会过期？

**答案**：
- KOOK的Cookie通常有效期为 **30天**
- 如果长时间不使用，可能会提前失效
- 系统会自动检测Cookie失效，并提示重新登录

**建议**：
- 定期更新Cookie（建议每月更新一次）
- 系统会在Cookie即将过期时发送提醒

---

### ❓ 4. Cookie信息会泄露吗？

**安全说明**：
1. ✅ Cookie **仅存储在本地**，不会上传到任何服务器
2. ✅ 系统使用 **AES-256加密** 保护Cookie
3. ⚠️ 请勿将Cookie分享给任何人
4. ⚠️ 如果怀疑Cookie泄露，立即在KOOK网页版退出登录，所有Cookie会失效

**最佳实践**：
- 仅在受信任的设备上使用
- 定期更换密码
- 使用系统的"界面锁定"功能

---

### ❓ 5. 能否同时使用多个账号的Cookie？

**答案**：
- ✅ **可以！** 系统支持添加多个KOOK账号
- 每个账号的Cookie独立管理
- 可以同时监听不同账号的不同服务器

**操作方法**：
1. 在账号管理页面，点击 **"添加账号"**
2. 重复上述导入流程
3. 系统会自动区分不同账号

---

### ❓ 6. Firefox浏览器如何获取Cookie？

**步骤类似**，但位置略有不同：
1. 按 `F12` 打开开发者工具
2. 切换到 **"网络"** 标签（而非Network）
3. 刷新页面 `F5`
4. 点击任意 `api` 请求
5. 右侧面板选择 **"消息头"** 标签
6. 找到 **"请求头"** → **"Cookie"**
7. 复制Cookie值

> **截图说明**：
> - [ ] 截图：Firefox开发者工具界面
> - [ ] 截图：网络标签
> - [ ] 截图：Cookie位置

---

### ❓ 7. Edge浏览器如何获取Cookie？

**Edge与Chrome完全相同**：
- Edge基于Chromium内核
- 操作步骤与Chrome一致
- 界面几乎相同

---

## 🎉 总结

### 推荐方法

| 方法 | 难度 | 速度 | 推荐指数 |
|------|------|------|---------|
| 开发者工具（F12） | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| Chrome扩展 | ⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |

### 关键要点
1. ✅ Cookie包含 `kook_token` 是关键
2. ✅ 保存为JSON格式方便导入
3. ⚠️ Cookie是敏感信息，请妥善保管
4. 🔄 定期更新Cookie（建议每月一次）

---

## 📞 需要帮助？

如果按照教程操作仍有问题：
1. 查看系统的 **FAQ** 页面
2. 查看 **视频教程**（更直观）
3. 检查系统日志中的错误提示

---

**最后更新时间**：2025-10-31
**适用版本**：v18.0.0+
