# ❓ 常见问题解答（FAQ）

> 快速解决您使用过程中的问题

---

## 📋 目录

- [安装与启动](#安装与启动)
- [账号登录](#账号登录)
- [消息转发](#消息转发)
- [Bot配置](#bot配置)
- [频道映射](#频道映射)
- [图片处理](#图片处理)
- [性能问题](#性能问题)
- [安全相关](#安全相关)
- [其他问题](#其他问题)

---

## 安装与启动

### Q1: 应用无法启动？

**症状**：双击图标后没有反应

**可能原因**：
- 缺少运行库
- 被杀毒软件拦截
- 权限不足

**解决方法**：

**Windows**：
1. 右键应用图标 → 「以管理员身份运行」
2. 检查杀毒软件，添加到白名单
3. 安装 [VC++ Redistributable](https://aka.ms/vs/17/release/vc_redist.x64.exe)

**macOS**：
1. 右键应用 → 「打开」（不要双击）
2. 确认安全警告
3. 如果提示「已损坏」，执行：
   ```bash
   sudo xattr -r -d com.apple.quarantine /Applications/KOOK消息转发系统.app
   ```

**Linux**：
1. 赋予执行权限：`chmod +x *.AppImage`
2. 安装FUSE：`sudo apt install fuse libfuse2`

---

### Q2: 启动后显示「后端服务启动失败」？

**可能原因**：
- 端口被占用（9527）
- Python环境问题
- Redis启动失败

**解决方法**：
1. 检查端口占用：
   ```bash
   # Windows
   netstat -ano | findstr "9527"
   
   # Linux/macOS
   lsof -i :9527
   ```

2. 关闭占用端口的程序，或修改配置文件中的端口

3. 查看日志文件：`用户文档/KookForwarder/data/logs/app.log`

---

### Q3: 首次启动很慢？

**原因**：正在初始化Chromium浏览器

**说明**：
- 首次启动需要1-2分钟
- 正在下载浏览器驱动（~200MB）
- 后续启动会变快

**加速方法**：
1. 等待完成（仅一次）
2. 使用有线网络（WiFi较慢）
3. 关闭杀毒软件实时保护

---

## 账号登录

### Q4: KOOK账号一直显示「离线」？

**可能原因**：
1. Cookie已过期
2. IP被限制
3. 账号被封禁
4. 网络问题

**解决方法**：

**方案1：重新登录**
```
账号页面 → 选择账号 → 🔄 重新登录
```

**方案2：更换Cookie获取方式**
- 如果用密码登录失败，改用Cookie导入
- 如果用Cookie导入失败，改用Chrome扩展

**方案3：检查网络**
- 尝试访问 https://www.kookapp.cn
- 确认可以正常打开

**方案4：更换IP**
- 使用代理或VPN
- 更换网络环境

---

### Q5: 提示「Cookie格式不正确」？

**原因**：复制的Cookie不完整或格式错误

**解决方法**：

1. **使用Chrome扩展**（最可靠）
   - 安装扩展后一键导出
   - 自动格式化为正确格式

2. **检查JSON格式**
   - 使用 [JSON验证工具](https://jsonlint.com/)
   - 确保是有效的JSON

3. **查看支持的格式**
   - 参考 [Cookie获取教程](02-Cookie获取详细教程.md)
   - 系统支持10+种格式

---

### Q6: 账号密码登录需要验证码，如何处理？

**解决方法**：

**方式A：手动输入**（默认）
- 会弹出对话框
- 输入验证码
- 点击确认

**方式B：自动识别**（可选）
1. 获取 [2Captcha](https://2captcha.com/) API Key
2. 在设置中填入API Key
3. 自动后台识别验证码

**方式C：使用Cookie**（推荐）
- 改用Cookie导入方式
- 完全不需要验证码

---

## 消息转发

### Q7: 消息没有转发？

**排查清单**：

1. ✅ 服务是否运行？
   ```
   主界面 → 查看状态 → 应为「🟢 运行中」
   ```

2. ✅ 账号是否在线？
   ```
   账号页面 → 查看状态 → 应为「🟢 在线」
   ```

3. ✅ 是否创建了映射？
   ```
   映射页面 → 检查是否有映射规则
   ```

4. ✅ 映射是否启用？
   ```
   映射页面 → 状态列 → 应为「启用」
   ```

5. ✅ Bot配置是否正确？
   ```
   机器人页面 → 测试连接 → 应显示成功
   ```

---

### Q8: 消息转发延迟很大（>10秒）？

**可能原因**：
1. 消息队列积压
2. 目标平台限流
3. 网络延迟
4. 图片处理慢

**解决方法**：

**检查队列**：
```
主界面 → 队列消息数
如果 > 100，说明积压
```

**减少负载**：
- 临时禁用部分映射
- 减少同时监听的频道数量

**优化图片**：
```
设置 → 图片处理 → 降低压缩质量
或改为「仅直传」模式
```

**检查网络**：
- 使用有线网络
- 检查带宽是否充足

---

### Q9: 部分消息没有转发？

**可能原因**：
1. 触发了过滤规则
2. 消息类型未启用
3. 转发失败（查看日志）

**排查方法**：

**检查过滤规则**：
```
过滤页面 → 查看黑名单关键词
检查消息是否包含黑名单词汇
```

**检查消息类型**：
```
过滤页面 → 消息类型过滤
确保需要的类型已勾选
```

**查看日志**：
```
日志页面 → 筛选「失败」
查看具体错误原因
```

---

### Q10: 消息重复转发？

**原因**：可能的去重机制失效

**解决方法**：
1. 检查Redis连接状态
2. 重启服务
3. 如果持续发生，提交Issue

---

## Bot配置

### Q11: Discord Webhook测试失败？

**检查清单**：
- ✅ URL是否完整？（应包含 `https://discord.com/api/webhooks/`）
- ✅ Webhook是否被删除？
- ✅ 网络是否正常？

**解决方法**：
1. 重新复制Webhook URL
2. 在Discord中确认Webhook存在
3. 尝试访问URL（应返回JSON）
4. 检查防火墙设置

---

### Q12: Telegram Bot无法获取Chat ID？

**原因**：Bot未收到任何消息

**解决方法**：
1. 确认Bot已添加到群组
2. 在群组中发送一条消息（如 `/start`）
3. 等待10秒后重试「自动获取」
4. 如果还是失败，使用手动方法

---

### Q13: 飞书应用审核不通过？

**原因**：企业可能有特殊政策

**解决方法**：
1. 联系企业IT管理员
2. 说明应用用途
3. 提供应用说明文档
4. 申请开通权限

---

## 频道映射

### Q14: 智能映射没有找到匹配？

**可能原因**：
- 频道名称差异太大
- 目标平台频道列表为空

**解决方法**：
1. 检查Bot配置是否正确
2. 确保目标平台有可用频道
3. 使用「手动映射」
4. 调整相似度阈值（在高级设置中）

---

### Q15: 一个KOOK频道可以转发到多个目标吗？

**回答**：✅ 可以！

**配置方法**：
- 为同一个KOOK频道创建多个映射
- 选择不同的目标平台或频道
- 每个映射独立控制

**示例**：
```
KOOK #公告
├─ → Discord #announcements
├─ → Telegram 公告群
└─ → 飞书 运营群
```

---

## 图片处理

### Q16: 图片转发失败？

**可能原因**：
1. 图片被防盗链
2. 图片过大
3. 目标平台限制
4. 网络超时

**解决方法**：

**切换到智能模式**：
```
设置 → 图片处理 → 选择「智能模式」
```

**降低图片大小限制**：
```
设置 → 图片处理 → 最大尺寸改为 5MB
```

**查看详细错误**：
```
日志页面 → 找到失败记录 → 查看详情
```

---

### Q17: 图片加载很慢？

**原因**：使用图床模式，图片存储在本地

**解决方法**：
1. 改用「直传模式」
2. 增加带宽
3. 使用SSD硬盘

---

### Q18: 图片占用空间太大？

**查看占用**：
```
设置 → 图片处理 → 查看当前已用
```

**清理方法**：
1. 点击「立即清理」按钮
2. 设置自动清理天数（默认7天）
3. 降低图片压缩质量
4. 改用「直传模式」（不占用本地空间）

---

## 性能问题

### Q19: 内存占用很高？

**正常范围**：
- 单账号：~200MB
- 多账号：~300-500MB

**如果超过1GB**：

**解决方法**：
1. 关闭不必要的账号
2. 减少映射数量
3. 重启服务
4. 清理图片缓存

---

### Q20: CPU占用很高？

**正常情况**：
- 空闲时：<5%
- 转发时：10-20%

**如果持续>50%**：

**可能原因**：
- 浏览器进程卡死
- 消息处理积压
- 图片处理过多

**解决方法**：
1. 重启服务
2. 降低图片压缩质量
3. 减少并发映射

---

### Q21: 应用响应很慢？

**排查步骤**：

1. **检查系统资源**
   ```
   主界面 → 查看CPU和内存占用
   ```

2. **检查队列大小**
   ```
   如果队列 > 1000，说明积压严重
   ```

3. **查看日志数量**
   ```
   如果日志 > 10000条，清理旧日志
   ```

**解决方法**：
- 清理队列：停止服务 → 清空队列 → 重启
- 清理日志：设置 → 日志 → 清空所有日志
- 重启应用

---

## 安全相关

### Q22: 密码忘记了？

**解决方法**：

**如果启用了邮箱验证**：
1. 登录页面 → 「忘记密码？」
2. 输入邮箱
3. 查收验证码邮件
4. 重置密码

**如果未启用邮箱验证**：
1. 删除配置文件：`用户文档/KookForwarder/data/config.db`
2. 重启应用（将重置所有配置）

⚠️ **警告**：删除配置文件会丢失所有设置！

---

### Q23: 账号会被封禁吗？

**风险说明**：

本软件使用浏览器自动化，**可能违反KOOK服务条款**。

**风险等级**：
- 🟢 低风险：偶尔使用，消息量小
- 🟡 中风险：频繁使用，消息量大
- 🔴 高风险：多账号，大量转发

**降低风险**：
1. ✅ 仅在已授权的场景使用
2. ✅ 控制转发频率
3. ✅ 不要滥用
4. ✅ 遵守KOOK服务条款

---

### Q24: 数据安全吗？

**安全措施**：

1. ✅ **本地存储**
   - 所有数据存储在您的电脑
   - 不上传到任何服务器

2. ✅ **加密保护**
   - 密码使用bcrypt加密
   - Token使用AES-256加密
   - 加密密钥基于设备ID

3. ✅ **权限隔离**
   - 配置文件仅当前用户可读
   - 其他用户无法访问

---

## 其他问题

### Q25: 如何卸载？

**Windows**：
```
控制面板 → 程序和功能 → KOOK消息转发系统 → 卸载
```

**macOS**：
```
应用程序文件夹 → 拖拽应用到废纸篓
```

**清理数据**：
```
手动删除：用户文档/KookForwarder 文件夹
```

---

### Q26: 如何更新到新版本？

**自动更新**（推荐）：
1. 设置 → 其他 → 启用「自动检查更新」
2. 有新版本时会自动提示
3. 点击下载，安装覆盖旧版本

**手动更新**：
1. 访问 [GitHub Releases](https://github.com/gfchfjh/CSBJJWT/releases)
2. 下载最新版本安装包
3. 安装（会自动覆盖）

⚠️ **注意**：更新前建议备份配置！

---

### Q27: 可以同时运行多个实例吗？

**回答**：❌ 不可以

**原因**：
- 应用使用单实例锁
- 避免端口冲突
- 防止重复转发

**如果需要多实例**：
- 使用虚拟机
- 或多个不同的电脑

---

### Q28: 消耗流量大吗？

**正常情况**：

| 场景 | 流量消耗 |
|-----|---------|
| 纯文字消息 | ~1KB/条 |
| 图片消息 | ~500KB-2MB/条 |
| 文件消息 | 取决于文件大小 |

**每天100条消息**（含图片）：
- 预计流量：~50-100MB/天

**节省流量**：
1. 使用「直传模式」（不经过本地）
2. 降低图片质量
3. 启用过滤规则（减少无用消息）

---

### Q29: 支持哪些操作系统？

**完全支持**：
- ✅ Windows 10/11 (x64)
- ✅ macOS 10.15+ (Intel和Apple Silicon)
- ✅ Ubuntu 20.04+ (x64)

**可能支持**：
- ⚠️ Windows 7/8（需要额外配置）
- ⚠️ 其他Linux发行版（Debian、Fedora等）

---

### Q30: 可以在服务器上运行吗？

**回答**：✅ 可以（Linux服务器）

**部署方法**：

1. 使用Docker部署：
   ```bash
   docker-compose up -d
   ```

2. 或使用无头模式：
   ```bash
   export DISPLAY=:99
   Xvfb :99 -screen 0 1280x720x24 &
   ./KOOK-Forwarder.AppImage
   ```

3. 配置反向代理（Nginx）访问Web界面

**详细教程**：[服务器部署指南](../DEPLOYMENT_GUIDE_V6.md)

---

### Q31: 如何备份配置？

**手动备份**：
```
设置 → 备份与恢复 → 立即备份配置
```

**自动备份**：
```
设置 → 备份与恢复 → 启用自动备份
设置备份时间（如每天凌晨2点）
```

**备份内容**：
- 账号配置（加密）
- Bot配置
- 频道映射
- 过滤规则
- 系统设置

**备份位置**：
```
用户文档/KookForwarder/data/backups/
```

---

### Q32: 支持多语言吗？

**当前支持**：
- ✅ 简体中文（完整）
- ⚠️ English（基础，待完善）

**切换语言**：
```
设置 → 其他设置 → 语言 → 选择语言
```

---

### Q33: 可以转发历史消息吗？

**回答**：⚠️ 有限支持

**配置方法**：
```
账号设置 → 同步历史消息 → 选择时间范围（最近N分钟）
```

**限制**：
- 最多同步最近60分钟
- 仅首次启动时同步
- 大量历史消息可能触发限流

**建议**：
- 通常选择「不同步」
- 仅转发新消息

---

### Q34: 如何查看详细日志？

**图形界面**：
```
左侧菜单 → 📋 日志 → 查看所有转发记录
```

**文件日志**：
```
用户文档/KookForwarder/data/logs/app.log
使用任何文本编辑器打开
```

**日志级别**：
```
设置 → 日志设置 → 改为「调试（DEBUG）」
可查看更详细的信息
```

---

### Q35: 遇到BUG如何报告？

**报告步骤**：

1. **收集信息**：
   - 操作系统和版本
   - 应用版本
   - 复现步骤
   - 错误截图
   - 日志文件（最后100行）

2. **提交Issue**：
   - 访问 [GitHub Issues](https://github.com/gfchfjh/CSBJJWT/issues)
   - 点击「New Issue」
   - 选择「Bug Report」模板
   - 填写详细信息
   - 提交

3. **等待回复**：
   - 通常24小时内回复
   - 可能需要补充信息

---

## 🎓 获取更多帮助

### 文档资源

- 📖 [快速入门指南](01-快速入门指南.md)
- 📘 [Cookie获取教程](02-Cookie获取详细教程.md)
- 📗 [Discord配置教程](03-Discord配置教程.md)
- 📕 [Telegram配置教程](04-Telegram配置教程.md)
- 📙 [飞书配置教程](05-飞书配置教程.md)

### 视频教程

- 🎬 [完整配置演示（10分钟）](../../video-tutorials/)
- 🎬 [Chrome扩展使用（3分钟）](../../video-tutorials/)
- 🎬 [常见问题排查（5分钟）](../../video-tutorials/)

### 社区支持

- 💬 [GitHub Discussions](https://github.com/gfchfjh/CSBJJWT/discussions)
- 🐛 [问题反馈](https://github.com/gfchfjh/CSBJJWT/issues)

---

## 🔍 问题没有解决？

如果以上方法都不能解决您的问题：

1. 加入 [用户交流群](https://example.com/group)
2. 联系技术支持（附带详细日志）
3. 提交GitHub Issue

我们会尽快帮您解决！

---

**文档版本**: v10.0.0  
**最后更新**: 2025-10-26  
**问题总数**: 35个  
**持续更新中...**
