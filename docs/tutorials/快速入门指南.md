# KOOK消息转发系统 - 快速入门指南

**适用版本**: v17.0.0  
**预计时间**: 10分钟  
**难度**: ⭐ 简单

---

## 📖 学习目标

完成本教程后，您将能够：
- ✅ 安装并启动应用
- ✅ 配置KOOK账号
- ✅ 添加目标Bot
- ✅ 创建频道映射
- ✅ 实现自动转发

---

## 第一步：安装应用

### Electron桌面应用（推荐）

**Linux用户**:
```bash
# 1. 下载AppImage文件
wget https://github.com/gfchfjh/CSBJJWT/releases/download/v17.0.0/KOOK消息转发系统-17.0.0.AppImage

# 2. 添加执行权限
chmod +x KOOK消息转发系统-17.0.0.AppImage

# 3. 运行应用
./KOOK消息转发系统-17.0.0.AppImage
```

**Windows/Mac用户**:
1. 下载对应的安装包
2. 双击安装
3. 启动应用

### Production Web版（备选）

**所有平台**:
```bash
# 1. 下载并解压
unzip KOOK-Forwarder-v2.0-Production.zip
cd KOOK-Forwarder-v2.0-Production

# 2. 启动（Windows用start.bat，Linux/Mac用start.sh）
./start.sh

# 3. 浏览器打开
http://localhost:9527
```

---

## 第二步：首次配置向导

应用首次启动会自动进入配置向导：

### 2.1 欢迎页

<img src="screenshots/wizard-welcome.png" alt="欢迎页" width="600"/>

- 阅读简介
- 点击"开始配置"

### 2.2 登录KOOK账号

<img src="screenshots/wizard-login.png" alt="登录页" width="600"/>

**方法A: Cookie一键导入（推荐）**

1. 安装Chrome扩展（项目提供）
2. 登录KOOK网页版
3. 点击扩展图标
4. 自动发送到应用 ✨

**方法B: 账号密码登录**

1. 输入KOOK邮箱
2. 输入密码
3. 点击"登录"
4. 如遇验证码，手动输入

**方法C: 手动导入Cookie**

1. 登录 [KOOK网页版](https://www.kookapp.cn/app)
2. F12打开开发者工具
3. Application → Cookies
4. 复制所有Cookie
5. 粘贴到应用中

💡 **提示**: Cookie方式最简单且安全

### 2.3 选择监听服务器

<img src="screenshots/wizard-servers.png" alt="服务器选择" width="600"/>

1. 自动加载您的服务器列表
2. 勾选要监听的服务器
3. 展开服务器，选择频道
4. 点击"下一步"

💡 **建议**: 初次配置先选1-2个服务器测试

### 2.4 配置完成

<img src="screenshots/wizard-complete.png" alt="完成页" width="600"/>

- 显示配置摘要
- 点击"进入主界面"

🎉 **恭喜**: 基础配置已完成！

---

## 第三步：配置目标Bot

现在需要配置消息接收方（Bot）。

### 3.1 进入Bot配置页

导航栏 → 机器人配置 → 点击"添加Bot"

### 3.2 配置Discord Webhook

<img src="screenshots/bot-discord.png" alt="Discord配置" width="600"/>

**步骤**:

1. **创建Webhook**:
   - 打开Discord
   - 右键目标频道 → 编辑频道
   - 集成 → Webhooks → 新建Webhook
   - 复制Webhook URL

2. **填写配置**:
   ```
   Bot名称: 游戏公告Bot
   Webhook URL: https://discord.com/api/webhooks/123456...
   ```

3. **测试连接**:
   - 点击"测试连接"按钮
   - 检查Discord频道是否收到测试消息

✅ **成功标志**: Discord收到测试消息

### 3.3 配置Telegram Bot（可选）

<img src="screenshots/bot-telegram.png" alt="Telegram配置" width="600"/>

**步骤**:

1. **创建Bot**:
   - Telegram搜索 @BotFather
   - 发送 `/newbot`
   - 按提示完成创建
   - 复制Bot Token

2. **获取Chat ID**:
   - 将Bot添加到目标群组
   - 点击应用的"自动获取Chat ID"
   - 或手动: 发消息后访问 
     `https://api.telegram.org/bot<TOKEN>/getUpdates`

3. **填写配置**:
   ```
   Bot名称: 游戏公告TG Bot
   Bot Token: 1234567890:ABCdefGHI...
   Chat ID: -1001234567890
   ```

4. **测试发送**

✅ **成功标志**: Telegram群收到测试消息

### 3.4 配置飞书Bot（可选）

<img src="screenshots/bot-feishu.png" alt="飞书配置" width="600"/>

**步骤**:

1. **创建自建应用**:
   - 访问 [飞书开放平台](https://open.feishu.cn/)
   - 创建企业自建应用
   - 开启机器人能力

2. **获取凭证**:
   - 复制 App ID
   - 复制 App Secret

3. **添加到群组**:
   - 在飞书群中添加机器人
   - 获取群组ID

4. **填写配置** 并测试

📺 **提示**: 应用内提供详细视频教程

---

## 第四步：创建频道映射

映射定义了"哪个KOOK频道转发到哪个Bot"。

### 4.1 进入映射配置页

导航栏 → 频道映射

### 4.2 方式A: 智能映射（推荐）

<img src="screenshots/mapping-smart.png" alt="智能映射" width="600"/>

1. 点击"智能映射"按钮
2. 系统自动匹配同名频道:
   ```
   KOOK #公告    → Discord #announcements
   KOOK #活动    → Telegram 活动群
   KOOK #更新    → 飞书 更新通知群
   ```
3. 手动调整（如需）
4. 点击"应用映射"

⚡ **优势**: 一键完成，省时高效

### 4.3 方式B: 手动映射

<img src="screenshots/mapping-manual.png" alt="手动映射" width="600"/>

**表格视图**:
1. 点击"添加映射"
2. 选择KOOK频道
3. 选择目标Bot
4. 点击"保存"

**流程图视图**（可视化）:
1. 切换到"流程图视图"
2. 点击左侧KOOK频道
3. 点击右侧目标Bot
4. 自动创建连线
5. 点击保存

💡 **提示**: 一个KOOK频道可以同时转发到多个Bot

### 4.4 验证映射

<img src="screenshots/mapping-test.png" alt="测试映射" width="600"/>

1. 映射列表 → 点击"测试"按钮
2. 系统发送测试消息
3. 检查目标平台是否收到

✅ **成功标志**: 所有目标平台都收到测试消息

---

## 第五步：启动转发服务

### 5.1 启动服务

<img src="screenshots/service-start.png" alt="启动服务" width="600"/>

**方式A: 主界面**
- 进入概览页
- 点击"启动服务"按钮
- 等待状态变为"运行中"

**方式B: 设置页**
- 进入系统设置
- 服务控制 → 启动服务

### 5.2 监控运行状态

<img src="screenshots/monitoring.png" alt="监控页面" width="600"/>

**实时日志页**:
- 查看转发日志
- 筛选成功/失败
- 查看详细信息

**主界面统计**:
- 今日转发数
- 成功率
- 平均延迟

**系统托盘**（Electron版）:
- 实时统计
- 快捷操作
- 智能通知

---

## 第六步：测试转发

### 6.1 发送测试消息

1. 在KOOK已映射的频道发送消息:
   ```
   🎉 这是一条测试消息！
   ```

2. 检查目标平台是否收到

### 6.2 验证转发

**检查项**:
- ✅ 消息内容正确
- ✅ 格式保留（粗体、斜体等）
- ✅ 图片正常显示
- ✅ 发送者信息正确
- ✅ 延迟在可接受范围（<5秒）

### 6.3 查看日志

<img src="screenshots/logs.png" alt="日志详情" width="600"/>

1. 进入实时日志页
2. 找到刚才的消息
3. 点击"查看详情"
4. 检查转发过程

---

## 第七步：常用设置

### 7.1 图片处理策略

设置 → 图片处理

**推荐设置**:
- 策略: 智能模式
- 最大空间: 10GB
- 自动清理: 7天

### 7.2 过滤规则

过滤规则页

**示例配置**:
```
关键词黑名单: 广告, 代练, 外挂
用户黑名单: (添加骚扰用户)
消息类型: 全部启用
```

### 7.3 开机自启动

设置 → 服务控制

- ☑️ 开机自动启动
- ☑️ 最小化到系统托盘
- ☐ 启动时最小化

### 7.4 邮件告警（可选）

设置 → 邮件告警

**推荐配置**:
- ☑️ 服务异常时通知
- ☑️ 账号掉线时通知
- ☐ 转发失败通知（会很频繁）

---

## 故障排查

### 问题1: 消息没有转发

**排查清单**:
- [ ] 服务是否运行？
- [ ] 映射是否启用？
- [ ] Bot配置是否正确？
- [ ] KOOK账号是否在线？
- [ ] 过滤规则是否阻止？

### 问题2: 转发延迟大

**解决方案**:
1. 检查队列积压（实时日志页）
2. 减少映射数量
3. 调整限流设置
4. 检查网络连接

### 问题3: 图片转发失败

**解决方案**:
1. 切换图片处理策略
2. 启用自动压缩
3. 检查图床空间

💡 **更多**: 查看 [FAQ文档](../FAQ.md)

---

## 进阶功能

完成基础配置后，您可以探索：

### 🔌 插件系统
- 安装第三方插件
- 扩展功能
- 插件市场

### 📊 数据分析
- 转发统计
- 性能监控
- 自定义报表

### 🔒 安全审计
- 审计日志
- 操作追踪
- 合规管理

### ⚙️ 高级配置
- 自定义模板
- Webhook回调
- API集成

---

## 下一步

### 推荐阅读

- 📖 [完整用户手册](../USER_MANUAL.md)
- 📖 [API接口文档](../API接口文档.md)
- 📖 [FAQ常见问题](../FAQ.md)

### 视频教程

应用内 → 帮助中心 → 视频教程
- 10个精选教程
- 从入门到高级
- HTML5播放器

### 获取帮助

- **GitHub**: [提交Issue](https://github.com/gfchfjh/CSBJJWT/issues)
- **文档**: 查看docs/目录
- **API**: http://localhost:9527/docs

---

## 总结

🎉 **恭喜完成快速入门！**

您已经学会:
- ✅ 安装和启动应用
- ✅ 配置KOOK账号
- ✅ 添加目标Bot
- ✅ 创建频道映射
- ✅ 实现自动转发

**预计用时**: ⏱️ 10-15分钟

现在您可以：
- 🚀 开始使用系统转发消息
- 📚 探索更多高级功能
- 🔧 根据需求优化配置

**祝使用愉快！** 🎊

---

**文档版本**: v17.0.0  
**最后更新**: 2025-10-31  
**反馈**: [GitHub Issues](https://github.com/gfchfjh/CSBJJWT/issues)
