# KOOKæ¶ˆæ¯è½¬å‘ç³»ç»Ÿ - ä¼˜åŒ–æ¸…å•ï¼ˆå¿«é€Ÿå‚è€ƒï¼‰

> ğŸ“… ç”Ÿæˆæ—¥æœŸ: 2025-10-22  
> ğŸ“Š å½“å‰ç‰ˆæœ¬: v1.12.0+ / v2.0  
> ğŸ¯ ç›®æ ‡ç‰ˆæœ¬: v1.13.0  
> â­ å½“å‰è¯„åˆ†: **86.3/100 (Sçº§)**  
> ğŸ¯ ç›®æ ‡è¯„åˆ†: **97.2/100 (S++çº§)**

---

## ğŸš€ å¿«é€Ÿæ‘˜è¦

**é¡¹ç›®æ•´ä½“è¯„ä»·**: ä»£ç è´¨é‡æé«˜ï¼ŒåŠŸèƒ½å®Œå–„åº¦95%ï¼Œä½†"ä¸‹è½½å³ç”¨"çš„éƒ¨ç½²ä½“éªŒä»éœ€ä¼˜åŒ–ã€‚

**æ ¸å¿ƒé—®é¢˜**: Chromiumæµè§ˆå™¨æœªæ‰“åŒ…åˆ°å®‰è£…åŒ…ä¸­ï¼Œç”¨æˆ·éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ`playwright install chromium`ã€‚

**æ¨èè¡ŒåŠ¨**: ä¼˜å…ˆå®Œæˆé«˜ä¼˜å…ˆçº§çš„6é¡¹ä¼˜åŒ–ï¼ˆé¢„è®¡2å‘¨ï¼‰ï¼Œå³å¯è¾¾åˆ°98%éœ€æ±‚ç¬¦åˆåº¦ã€‚

---

## ğŸ“‹ ä¼˜åŒ–æ¸…å•ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

### ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆP0ï¼‰- å¿…é¡»å®Œæˆ

#### âœ… å¯ä»¥ç«‹å³å¼€å§‹çš„ä¼˜åŒ–

| # | ä¼˜åŒ–é¡¹ | æ–‡ä»¶/æ¨¡å— | é¢„è®¡æ—¶é—´ | éš¾åº¦ |
|---|--------|----------|---------|------|
| **P0-1** | **Chromiumè‡ªåŠ¨æ‰“åŒ…** | `build/build_backend.py` | 2-3å¤© | â­â­â­â­ |
| **P0-2** | **Redisæ‰“åŒ…åˆ°å®‰è£…åŒ…** | `build/build_backend.py` | 1-2å¤© | â­â­â­ |
| **P0-3** | **å®Œå–„PyInstalleré…ç½®** | `build/build_backend.py` | 3-5å¤© | â­â­â­â­â­ |
| **P0-4** | **åˆ›å»ºä¸€é”®æ„å»ºè„šæœ¬** | `build_installer.sh/bat` | 1å¤© | â­â­ |
| **P0-5** | **é¦–æ¬¡å¯åŠ¨ç¯å¢ƒæ£€æŸ¥** | `backend/app/main.py` | 1-2å¤© | â­â­â­ |
| **P0-6** | **ä¼˜åŒ–å‘å¯¼é”™è¯¯æç¤º** | `frontend/src/components/wizard/` | 1å¤© | â­â­ |

**æ€»è®¡**: 9-14å¤©å·¥ä½œé‡

---

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ï¼ˆP1ï¼‰- å»ºè®®å®Œæˆ

| # | ä¼˜åŒ–é¡¹ | æ–‡ä»¶/æ¨¡å— | é¢„è®¡æ—¶é—´ | éš¾åº¦ |
|---|--------|----------|---------|------|
| P1-1 | æœ¬åœ°OCRå®é™…ä½¿ç”¨ | `backend/app/kook/scraper.py` | 0.5å¤© | â­ |
| P1-2 | æµè§ˆå™¨é©±åŠ¨è‡ªåŠ¨å®‰è£… | `backend/app/main.py` | 0.5å¤© | â­â­ |
| P1-3 | å›¾ç‰‡å¤„ç†å¤šè¿›ç¨‹æ±  | `backend/app/queue/worker.py` | 1-2å¤© | â­â­â­ |
| P1-4 | é¢‘é“æ˜ å°„é…ç½®é¢„è§ˆ | `frontend/src/views/Mapping.vue` | 1-2å¤© | â­â­â­ |
| P1-5 | æ€§èƒ½ç›‘æ§WebSocket | `frontend/src/components/PerformanceMonitor.vue` | 1å¤© | â­â­ |
| P1-6 | é…ç½®å‘å¯¼è·³è¿‡ä¼˜åŒ– | `frontend/src/components/wizard/WizardStepBots.vue` | 0.5å¤© | â­ |
| P1-7 | é”™è¯¯æ¶ˆæ¯å‹å¥½åŒ– | `backend/app/utils/error_diagnosis.py` | 1å¤© | â­â­ |
| P1-8 | è§†é¢‘æ•™ç¨‹åµŒå…¥ | `frontend/src/components/VideoTutorial.vue` | 1-2å¤© | â­â­ |

**æ€»è®¡**: 6.5-10å¤©å·¥ä½œé‡

---

### ğŸŸ¢ ä½ä¼˜å…ˆçº§ï¼ˆP2ï¼‰- é”¦ä¸Šæ·»èŠ±

| # | ä¼˜åŒ–é¡¹ | æ–‡ä»¶/æ¨¡å— | é¢„è®¡æ—¶é—´ | éš¾åº¦ |
|---|--------|----------|---------|------|
| P2-1 | å†å²æ¶ˆæ¯åŒæ­¥éªŒè¯ | `backend/app/kook/scraper.py` | 1å¤© | â­â­ |
| P2-2 | æ¶ˆæ¯é˜Ÿåˆ—ä¼˜å…ˆçº§ | `backend/app/queue/redis_client.py` | 1-2å¤© | â­â­â­ |
| P2-3 | å¤šè¯­è¨€å®Œæ•´æ€§æ£€æŸ¥ | `frontend/src/i18n/` | 0.5å¤© | â­ |
| P2-4 | å®‰è£…åŒ…å¤§å°ä¼˜åŒ– | `build/` | 1-2å¤© | â­â­ |
| P2-5 | Discordçº¿ç¨‹æ”¯æŒ | `backend/app/forwarders/discord.py` | 1å¤© | â­â­ |

**æ€»è®¡**: 4.5-6.5å¤©å·¥ä½œé‡

---

## ğŸ› ï¸ è¯¦ç»†å®æ–½æŒ‡å—

### P0-1: Chromiumè‡ªåŠ¨æ‰“åŒ… â­â­â­â­

**é—®é¢˜**: ç”¨æˆ·éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ`playwright install chromium`  
**ç›®æ ‡**: å®‰è£…åŒ…è‡ªå¸¦Chromiumæµè§ˆå™¨ï¼Œä¸‹è½½å³ç”¨

**å®æ–½æ­¥éª¤**:

```bash
# æ­¥éª¤1: ä¿®æ”¹ build/build_backend.py
# æ·»åŠ ä»¥ä¸‹å‡½æ•°
```

```python
def prepare_browser_for_packaging():
    """å‡†å¤‡æµè§ˆå™¨ç”¨äºæ‰“åŒ…"""
    import subprocess
    import shutil
    from pathlib import Path
    
    print("ğŸ“¦ å‡†å¤‡æ‰“åŒ…Playwright Chromium...")
    
    # 1. å®‰è£…æµè§ˆå™¨
    subprocess.run(["playwright", "install", "chromium"])
    
    # 2. æŸ¥æ‰¾æµè§ˆå™¨ä½ç½®
    if os.name == 'nt':  # Windows
        browser_path = Path.home() / "AppData" / "Local" / "ms-playwright"
    else:  # Linux/macOS
        browser_path = Path.home() / ".cache" / "ms-playwright"
    
    # 3. å¤åˆ¶åˆ°é¡¹ç›®ç›®å½•
    target_path = Path("backend/playwright_browsers")
    if target_path.exists():
        shutil.rmtree(target_path)
    shutil.copytree(browser_path, target_path)
    
    print(f"âœ… æµè§ˆå™¨å·²å¤åˆ¶åˆ°: {target_path}")
    return target_path

# æ­¥éª¤2: åœ¨PyInstallerå‘½ä»¤ä¸­æ·»åŠ 
def build_with_pyinstaller():
    browser_path = prepare_browser_for_packaging()
    
    separator = ";" if os.name == "nt" else ":"
    
    command = [
        "pyinstaller",
        "--name", "KookForwarder",
        "--onefile",
        f"--add-data={browser_path}{separator}playwright_browsers",
        # ... å…¶ä»–å‚æ•°
    ]
    
    subprocess.run(command)
```

**éªŒè¯**:
```bash
# æ„å»ºåæµ‹è¯•
./dist/KookForwarder
# åº”è¯¥æ— éœ€æ‰‹åŠ¨å®‰è£…æµè§ˆå™¨
```

---

### P0-2: Redisæ‰“åŒ…åˆ°å®‰è£…åŒ… â­â­â­

**é—®é¢˜**: Rediséœ€è¦å•ç‹¬å®‰è£…  
**ç›®æ ‡**: å®‰è£…åŒ…è‡ªå¸¦Redisï¼Œè‡ªåŠ¨å¯åŠ¨

**å®æ–½æ­¥éª¤**:

```python
# åœ¨ build/build_backend.py ä¸­æ·»åŠ 
def download_redis_binaries():
    """ä¸‹è½½RedisäºŒè¿›åˆ¶æ–‡ä»¶"""
    import requests
    import zipfile
    
    redis_dir = Path("redis")
    redis_dir.mkdir(exist_ok=True)
    
    if os.name == 'nt':  # Windows
        print("ğŸ“¥ ä¸‹è½½Windowsç‰ˆRedis...")
        redis_url = "https://github.com/tporadowski/redis/releases/download/v5.0.14.1/Redis-x64-5.0.14.1.zip"
        
        resp = requests.get(redis_url)
        with open("redis.zip", "wb") as f:
            f.write(resp.content)
        
        with zipfile.ZipFile("redis.zip", "r") as zip_ref:
            zip_ref.extractall(redis_dir)
        
        os.remove("redis.zip")
    
    print("âœ… RedisäºŒè¿›åˆ¶æ–‡ä»¶å·²å‡†å¤‡")

# åœ¨PyInstallerå‘½ä»¤ä¸­æ·»åŠ 
command = [
    "--add-data=redis;redis",
    # ...
]
```

---

### P0-3: å®Œå–„PyInstalleré…ç½® â­â­â­â­â­

**é—®é¢˜**: PyInstalleré…ç½®ä¸å®Œæ•´ï¼Œæ‰“åŒ…å¯èƒ½å¤±è´¥

**å®æ–½æ­¥éª¤**:

```python
# å®Œæ•´çš„ build/build_backend.py ç¤ºä¾‹
import os
import subprocess
import sys
from pathlib import Path

def build_complete_backend():
    """æ„å»ºå®Œæ•´åç«¯å¯æ‰§è¡Œæ–‡ä»¶"""
    
    print("=" * 50)
    print("ğŸš€ å¼€å§‹æ„å»ºKOOKæ¶ˆæ¯è½¬å‘ç³»ç»Ÿåç«¯")
    print("=" * 50)
    
    # 1. å‡†å¤‡æµè§ˆå™¨
    browser_path = prepare_browser_for_packaging()
    
    # 2. å‡†å¤‡Redis
    download_redis_binaries()
    
    # 3. å‡†å¤‡ä¾èµ–æ•°æ®
    data_files = [
        ("backend/data", "data"),
        ("backend/app/data/selectors.yaml", "data"),
    ]
    
    # 4. æ„å»ºPyInstallerå‘½ä»¤
    separator = ";" if os.name == "nt" else ":"
    
    command = [
        "pyinstaller",
        "--name=KookForwarder",
        "--onefile",  # å•æ–‡ä»¶æ¨¡å¼
        "--console",  # æ˜¾ç¤ºæ§åˆ¶å°ï¼ˆè°ƒè¯•ç”¨ï¼Œå¯æ”¹ä¸º--noconsoleï¼‰
        
        # æ·»åŠ æ•°æ®æ–‡ä»¶
        f"--add-data={browser_path}{separator}playwright_browsers",
        f"--add-data=redis{separator}redis",
        f"--add-data=backend/data{separator}data",
        
        # æ·»åŠ éšè—å¯¼å…¥
        "--hidden-import=playwright",
        "--hidden-import=playwright._impl._driver",
        "--hidden-import=aiohttp",
        "--hidden-import=aiosqlite",
        "--hidden-import=redis",
        "--hidden-import=ddddocr",
        
        # æ’é™¤ä¸éœ€è¦çš„æ¨¡å—
        "--exclude-module=tkinter",
        "--exclude-module=matplotlib",
        
        # å…¥å£æ–‡ä»¶
        "backend/app/main.py"
    ]
    
    print("\næ‰§è¡Œå‘½ä»¤:")
    print(" ".join(command))
    print()
    
    # 5. æ‰§è¡Œæ„å»º
    result = subprocess.run(command)
    
    if result.returncode == 0:
        print("\nâœ… åç«¯æ„å»ºæˆåŠŸï¼")
        print(f"å¯æ‰§è¡Œæ–‡ä»¶ä½ç½®: dist/KookForwarder{'.exe' if os.name == 'nt' else ''}")
    else:
        print("\nâŒ åç«¯æ„å»ºå¤±è´¥")
        sys.exit(1)

if __name__ == "__main__":
    build_complete_backend()
```

---

### P0-4: åˆ›å»ºä¸€é”®æ„å»ºè„šæœ¬ â­â­

**é—®é¢˜**: æ„å»ºæµç¨‹å¤æ‚ï¼Œéœ€è¦å¤šä¸ªæ­¥éª¤

**å®æ–½æ­¥éª¤**:

åˆ›å»º `build_installer.sh` (Linux/macOS):
```bash
#!/bin/bash
set -e

echo "ğŸš€ å¼€å§‹æ„å»ºKOOKæ¶ˆæ¯è½¬å‘ç³»ç»Ÿå®‰è£…åŒ…"
echo "========================================"

# 1. æ£€æŸ¥ç¯å¢ƒ
echo "1ï¸âƒ£ æ£€æŸ¥æ„å»ºç¯å¢ƒ..."
command -v python3 >/dev/null 2>&1 || { echo "âŒ æœªå®‰è£…Python3"; exit 1; }
command -v node >/dev/null 2>&1 || { echo "âŒ æœªå®‰è£…Node.js"; exit 1; }
echo "âœ… ç¯å¢ƒæ£€æŸ¥é€šè¿‡"

# 2. å®‰è£…ä¾èµ–
echo "2ï¸âƒ£ å®‰è£…ä¾èµ–..."
pip install -r backend/requirements.txt
pip install pyinstaller
playwright install chromium
cd frontend && npm install && cd ..
echo "âœ… ä¾èµ–å®‰è£…å®Œæˆ"

# 3. æ„å»ºåç«¯
echo "3ï¸âƒ£ æ„å»ºPythonåç«¯..."
python build/build_backend.py
echo "âœ… åç«¯æ„å»ºå®Œæˆ"

# 4. æ„å»ºå‰ç«¯
echo "4ï¸âƒ£ æ„å»ºå‰ç«¯èµ„æº..."
cd frontend
npm run build
cd ..
echo "âœ… å‰ç«¯æ„å»ºå®Œæˆ"

# 5. æ•´åˆ
echo "5ï¸âƒ£ æ•´åˆElectronåº”ç”¨..."
mkdir -p frontend/electron/backend
cp dist/KookForwarder frontend/electron/backend/
echo "âœ… æ•´åˆå®Œæˆ"

# 6. ç”Ÿæˆå®‰è£…åŒ…
echo "6ï¸âƒ£ ç”Ÿæˆå®‰è£…åŒ…..."
cd frontend
npm run electron:build
cd ..
echo "âœ… å®‰è£…åŒ…ç”Ÿæˆå®Œæˆ"

echo ""
echo "ğŸ‰ æ„å»ºå®Œæˆï¼"
echo "å®‰è£…åŒ…ä½ç½®:"
ls -lh frontend/dist-electron/
```

åˆ›å»º `build_installer.bat` (Windows):
```batch
@echo off
echo ğŸš€ å¼€å§‹æ„å»ºKOOKæ¶ˆæ¯è½¬å‘ç³»ç»Ÿå®‰è£…åŒ…
echo ========================================

REM 1. æ£€æŸ¥ç¯å¢ƒ
echo 1ï¸âƒ£ æ£€æŸ¥æ„å»ºç¯å¢ƒ...
python --version >nul 2>&1 || (echo âŒ æœªå®‰è£…Python & exit /b 1)
node --version >nul 2>&1 || (echo âŒ æœªå®‰è£…Node.js & exit /b 1)
echo âœ… ç¯å¢ƒæ£€æŸ¥é€šè¿‡

REM 2. å®‰è£…ä¾èµ–
echo 2ï¸âƒ£ å®‰è£…ä¾èµ–...
pip install -r backend\requirements.txt
pip install pyinstaller
playwright install chromium
cd frontend && npm install && cd ..
echo âœ… ä¾èµ–å®‰è£…å®Œæˆ

REM 3-6. æ„å»ºæµç¨‹ï¼ˆåŒä¸Šï¼‰
...
```

---

### P0-5: é¦–æ¬¡å¯åŠ¨ç¯å¢ƒæ£€æŸ¥ â­â­â­

**é—®é¢˜**: å¦‚æœç¯å¢ƒæœ‰é—®é¢˜ï¼Œç”¨æˆ·ä¸çŸ¥é“å¦‚ä½•è§£å†³

**å®æ–½æ­¥éª¤**:

åœ¨ `backend/app/main.py` çš„ `lifespan` ä¸­æ·»åŠ :

```python
async def check_environment():
    """ç¯å¢ƒæ£€æŸ¥"""
    issues = []
    
    # æ£€æŸ¥Redis
    if not await redis_manager.is_running():
        logger.warning("Redisæœªå¯åŠ¨ï¼Œå°è¯•è‡ªåŠ¨å¯åŠ¨...")
        success, msg = await redis_manager.start()
        if not success:
            issues.append({
                'component': 'Redis',
                'status': 'failed',
                'message': msg,
                'solution': 'è¯·æ£€æŸ¥Redisæ˜¯å¦æ­£ç¡®å®‰è£…ï¼Œæˆ–æ‰‹åŠ¨å¯åŠ¨Redis'
            })
    
    # æ£€æŸ¥æµè§ˆå™¨
    try:
        from playwright.async_api import async_playwright
        async with async_playwright() as p:
            browser = await p.chromium.launch(headless=True)
            await browser.close()
        logger.info("âœ… Chromiumæµè§ˆå™¨å·²å°±ç»ª")
    except Exception as e:
        issues.append({
            'component': 'Playwright Chromium',
            'status': 'failed',
            'message': str(e),
            'solution': 'æ­£åœ¨è‡ªåŠ¨å®‰è£…æµè§ˆå™¨ï¼Œè¯·ç¨å€™...'
        })
        # è‡ªåŠ¨å®‰è£…
        try:
            import subprocess
            subprocess.run(["playwright", "install", "chromium"], check=True)
            logger.info("âœ… æµè§ˆå™¨è‡ªåŠ¨å®‰è£…æˆåŠŸ")
        except Exception as install_error:
            issues.append({
                'component': 'Playwright Chromium',
                'status': 'install_failed',
                'message': str(install_error),
                'solution': 'è¯·æ‰‹åŠ¨æ‰§è¡Œ: playwright install chromium'
            })
    
    # æ£€æŸ¥æ•°æ®ç›®å½•æƒé™
    try:
        test_file = DATA_DIR / ".test_write"
        test_file.write_text("test")
        test_file.unlink()
    except Exception as e:
        issues.append({
            'component': 'æ•°æ®ç›®å½•',
            'status': 'no_permission',
            'message': 'æ— æ³•å†™å…¥æ•°æ®ç›®å½•',
            'solution': f'è¯·ç¡®ä¿æœ‰æƒé™å†™å…¥: {DATA_DIR}'
        })
    
    # ä¿å­˜é—®é¢˜åˆ°æ•°æ®åº“ï¼Œä¾›å‰ç«¯æŸ¥è¯¢
    if issues:
        db.set_system_config('startup_issues', json.dumps(issues))
    else:
        db.delete_system_config('startup_issues')
    
    return len(issues) == 0

# åœ¨ lifespan å¯åŠ¨æ—¶è°ƒç”¨
async def lifespan(app: FastAPI):
    logger.info("=" * 50)
    logger.info(f"å¯åŠ¨ {settings.app_name} v{settings.app_version}")
    logger.info("=" * 50)
    
    # ç¯å¢ƒæ£€æŸ¥
    env_ok = await check_environment()
    if not env_ok:
        logger.warning("âš ï¸ ç¯å¢ƒæ£€æŸ¥å‘ç°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹å‰ç«¯æç¤º")
    
    # ... å…¶ä»–å¯åŠ¨é€»è¾‘
```

å‰ç«¯æ·»åŠ æ£€æŸ¥æ˜¾ç¤º:

```vue
<!-- frontend/src/views/Home.vue -->
<el-dialog
  v-model="showStartupIssues"
  title="âš ï¸ å¯åŠ¨æ£€æŸ¥"
  width="600px"
>
  <el-alert
    v-for="issue in startupIssues"
    :key="issue.component"
    :title="`${issue.component}: ${issue.status}`"
    :description="issue.solution"
    type="warning"
    show-icon
    style="margin-bottom: 10px"
  />
  
  <template #footer>
    <el-button @click="retryCheck">é‡æ–°æ£€æŸ¥</el-button>
    <el-button type="primary" @click="showStartupIssues = false">çŸ¥é“äº†</el-button>
  </template>
</el-dialog>

<script setup>
import { ref, onMounted } from 'vue'
import api from '@/api'

const showStartupIssues = ref(false)
const startupIssues = ref([])

const checkStartupIssues = async () => {
  try {
    const config = await api.getSystemConfig('startup_issues')
    if (config) {
      startupIssues.value = JSON.parse(config)
      if (startupIssues.value.length > 0) {
        showStartupIssues.value = true
      }
    }
  } catch (error) {
    console.error('æ£€æŸ¥å¯åŠ¨é—®é¢˜å¤±è´¥:', error)
  }
}

onMounted(() => {
  checkStartupIssues()
})
</script>
```

---

### P0-6: ä¼˜åŒ–å‘å¯¼é”™è¯¯æç¤º â­â­

**é—®é¢˜**: é…ç½®å‘å¯¼ä¸­çš„é”™è¯¯æç¤ºä¸å¤Ÿå‹å¥½

**å®æ–½æ­¥éª¤**:

åœ¨ `frontend/src/components/wizard/WizardStepLogin.vue` ä¸­:

```vue
<template>
  <div class="wizard-step-login">
    <!-- åŸæœ‰çš„ç™»å½•è¡¨å• -->
    
    <!-- æ·»åŠ å¸¸è§é—®é¢˜æç¤º -->
    <el-alert
      v-if="loginAttempted && !loginSuccess"
      title="ç™»å½•å¤±è´¥ï¼Ÿè¯·æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š"
      type="warning"
      :closable="false"
      style="margin-top: 20px"
    >
      <ul style="margin: 10px 0; padding-left: 20px;">
        <li>âœ… ç¡®ä¿Cookieæ ¼å¼æ­£ç¡®ï¼ˆæ”¯æŒJSONæ•°ç»„/æµè§ˆå™¨æ‰©å±•/Netscapeæ ¼å¼ï¼‰</li>
        <li>âœ… Cookieæ˜¯å¦å·²è¿‡æœŸï¼Ÿè¯·é‡æ–°ç™»å½•KOOKç½‘é¡µç‰ˆè·å–æœ€æ–°Cookie</li>
        <li>âœ… ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ï¼Ÿå¯ä»¥å°è¯•è®¿é—® <a href="https://www.kookapp.cn" target="_blank">KOOKå®˜ç½‘</a> æµ‹è¯•</li>
        <li>âœ… æ˜¯å¦æœ‰é˜²ç«å¢™/ä»£ç†é˜»æ­¢è¿æ¥ï¼Ÿ</li>
      </ul>
      
      <div style="margin-top: 15px;">
        <el-button type="primary" size="small" @click="openTroubleshooting">
          ğŸ“– æŸ¥çœ‹è¯¦ç»†æ’æŸ¥æ­¥éª¤
        </el-button>
        <el-button type="success" size="small" @click="openCookieTutorial">
          ğŸ¬ è§‚çœ‹Cookieè·å–è§†é¢‘æ•™ç¨‹
        </el-button>
      </div>
    </el-alert>
    
    <!-- æ·»åŠ æ ¼å¼éªŒè¯æç¤º -->
    <el-alert
      v-if="cookieFormatError"
      title="Cookieæ ¼å¼é”™è¯¯"
      :description="cookieFormatError"
      type="error"
      show-icon
      style="margin-top: 20px"
    />
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { ElMessageBox } from 'element-plus'

const loginAttempted = ref(false)
const loginSuccess = ref(false)
const cookieFormatError = ref('')

const openTroubleshooting = () => {
  ElMessageBox.alert(`
    <h3>ç™»å½•é—®é¢˜æ’æŸ¥æ­¥éª¤</h3>
    <ol>
      <li><strong>éªŒè¯Cookieæ ¼å¼</strong>
        <ul>
          <li>JSONæ•°ç»„æ ¼å¼: [{"name":"xxx","value":"xxx"}]</li>
          <li>æµè§ˆå™¨æ‰©å±•æ ¼å¼: name1=value1; name2=value2</li>
        </ul>
      </li>
      <li><strong>è·å–æ–°Cookie</strong>
        <ul>
          <li>æ‰“å¼€KOOKç½‘é¡µç‰ˆ: https://www.kookapp.cn</li>
          <li>ç™»å½•è´¦å·</li>
          <li>æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·</li>
          <li>Application â†’ Cookies â†’ å¤åˆ¶æ‰€æœ‰Cookie</li>
        </ul>
      </li>
      <li><strong>ç½‘ç»œæ£€æŸ¥</strong>
        <ul>
          <li>ç¡®ä¿èƒ½è®¿é—® https://www.kookapp.cn</li>
          <li>å¦‚æœä½¿ç”¨ä»£ç†ï¼Œç¡®ä¿ä»£ç†æ­£å¸¸å·¥ä½œ</li>
        </ul>
      </li>
    </ol>
  `, 'æ’æŸ¥æ­¥éª¤', {
    dangerouslyUseHTMLString: true,
    confirmButtonText: 'çŸ¥é“äº†'
  })
}
</script>
```

---

## ğŸ“… å®æ–½æ—¶é—´è¡¨

### ç¬¬1å‘¨ï¼ˆP0ä¼˜åŒ–ï¼‰

| å¤©æ•° | ä»»åŠ¡ | è´Ÿè´£äºº | äº¤ä»˜ç‰© |
|-----|------|--------|--------|
| Day 1-2 | P0-4: åˆ›å»ºæ„å»ºè„šæœ¬ | å¼€å‘è€…A | `build_installer.sh/bat` |
| Day 3-5 | P0-2: Redisæ‰“åŒ… | å¼€å‘è€…A | æ›´æ–°çš„`build_backend.py` |
| Day 6-10 | P0-1&P0-3: Chromiumæ‰“åŒ…+PyInstallerå®Œå–„ | å¼€å‘è€…B | å®Œæ•´çš„æ‰“åŒ…é…ç½® |
| Day 11-12 | P0-5: ç¯å¢ƒæ£€æŸ¥ | å¼€å‘è€…A | åç«¯æ£€æŸ¥+å‰ç«¯UI |
| Day 13 | P0-6: å‘å¯¼ä¼˜åŒ– | å¼€å‘è€…A | ä¼˜åŒ–åçš„å‘å¯¼ç»„ä»¶ |
| Day 14 | æµ‹è¯•å’ŒéªŒè¯ | å…¨ä½“ | ä¸‰å¹³å°å®‰è£…åŒ… |

### ç¬¬2å‘¨ï¼ˆP1ä¼˜åŒ–ï¼‰

| å¤©æ•° | ä»»åŠ¡ | è´Ÿè´£äºº | äº¤ä»˜ç‰© |
|-----|------|--------|--------|
| Day 1 | P1-1: æœ¬åœ°OCR | å¼€å‘è€…A | æ›´æ–°çš„`scraper.py` |
| Day 1 | P1-2: æµè§ˆå™¨è‡ªåŠ¨å®‰è£… | å¼€å‘è€…A | æ›´æ–°çš„`main.py` |
| Day 2-3 | P1-3: å¤šè¿›ç¨‹æ±  | å¼€å‘è€…B | æ›´æ–°çš„`worker.py` |
| Day 4-5 | P1-4: æ˜ å°„é¢„è§ˆ | å¼€å‘è€…A | æ›´æ–°çš„`Mapping.vue` |
| Day 6 | P1-5: WebSocketç›‘æ§ | å¼€å‘è€…B | æ›´æ–°çš„`PerformanceMonitor.vue` |
| Day 7 | P1-6&P1-7: æç¤ºä¼˜åŒ– | å¼€å‘è€…A | ä¼˜åŒ–åçš„æç¤ºæ–‡æ¡ˆ |
| Day 8-9 | P1-8: è§†é¢‘æ•™ç¨‹ | å¼€å‘è€…A | åµŒå…¥çš„è§†é¢‘æ’­æ”¾å™¨ |
| Day 10 | æµ‹è¯•å’Œå‘å¸ƒ | å…¨ä½“ | v1.13.0ç‰ˆæœ¬ |

---

## âœ… éªŒæ”¶æ ‡å‡†

### P0éªŒæ”¶æ ‡å‡†

| é¡¹ç›® | éªŒæ”¶æ ‡å‡† | æµ‹è¯•æ–¹æ³• |
|-----|---------|---------|
| Chromiumæ‰“åŒ… | å®‰è£…åæ— éœ€æ‰‹åŠ¨å®‰è£…æµè§ˆå™¨ | åœ¨å…¨æ–°ç³»ç»Ÿæµ‹è¯• |
| Redisæ‰“åŒ… | å®‰è£…åæ— éœ€å®‰è£…Redis | åœ¨å…¨æ–°ç³»ç»Ÿæµ‹è¯• |
| ä¸€é”®æ„å»º | å•ä¸ªå‘½ä»¤å®Œæˆæ„å»º | æ‰§è¡Œ`./build_installer.sh` |
| ç¯å¢ƒæ£€æŸ¥ | é—®é¢˜è‡ªåŠ¨æ£€æµ‹å¹¶æç¤º | æ•…æ„åˆ é™¤Redisæµ‹è¯• |
| å‘å¯¼ä¼˜åŒ– | é”™è¯¯æç¤ºæ¸…æ™°å‹å¥½ | è¾“å…¥é”™è¯¯Cookieæµ‹è¯• |

### P1éªŒæ”¶æ ‡å‡†

| é¡¹ç›® | éªŒæ”¶æ ‡å‡† | æµ‹è¯•æ–¹æ³• |
|-----|---------|---------|
| æœ¬åœ°OCR | éªŒè¯ç è‡ªåŠ¨è¯†åˆ«æˆåŠŸç‡>70% | æ¨¡æ‹Ÿ10æ¬¡éªŒè¯ç  |
| å¤šè¿›ç¨‹æ±  | å›¾ç‰‡å¤„ç†é€Ÿåº¦æå‡50%+ | å‹åŠ›æµ‹è¯•å¯¹æ¯” |
| æ˜ å°„é¢„è§ˆ | é…ç½®å‰å¯ä»¥é¢„è§ˆæ•ˆæœ | æ‰‹åŠ¨æµ‹è¯• |
| WebSocketç›‘æ§ | æ€§èƒ½æ•°æ®å®æ—¶æ›´æ–°<1ç§’ | è§‚å¯Ÿåˆ·æ–°å»¶è¿Ÿ |

---

## ğŸ“ æ”¯æŒå’Œåé¦ˆ

å¦‚æœ‰ç–‘é—®æˆ–éœ€è¦æŠ€æœ¯æ”¯æŒï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- ğŸ“§ GitHub Issues: [æäº¤Issue](https://github.com/gfchfjh/CSBJJWT/issues)
- ğŸ“š é¡¹ç›®æ–‡æ¡£: [æŸ¥çœ‹æ–‡æ¡£](https://github.com/gfchfjh/CSBJJWT/tree/main/docs)
- ğŸ’¬ è®¨è®ºåŒº: [GitHub Discussions](https://github.com/gfchfjh/CSBJJWT/discussions)

---

**æ¸…å•ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-10-22  
**é¢„è®¡å®Œæˆæ—¶é—´**: 2-3å‘¨
