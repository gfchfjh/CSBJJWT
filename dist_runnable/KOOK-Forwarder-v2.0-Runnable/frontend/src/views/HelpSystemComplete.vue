<template>
  <div class="help-system">
    <!-- ğŸš€ P2-3ä¼˜åŒ–: å®Œæ•´çš„å¸®åŠ©ç³»ç»Ÿ -->
    
    <el-page-header @back="goBack" content="å¸®åŠ©ä¸­å¿ƒ" />
    
    <el-row :gutter="20" style="margin-top: 20px">
      <!-- å·¦ä¾§ï¼šæ•™ç¨‹ç›®å½• -->
      <el-col :span="6">
        <el-card class="tutorial-menu">
          <template #header>
            <span>ğŸ“š æ•™ç¨‹ç›®å½•</span>
          </template>
          
          <el-menu
            :default-active="activeTutorial"
            @select="selectTutorial"
          >
            <el-menu-item index="quickstart">
              <el-icon><Promotion /></el-icon>
              <span>å¿«é€Ÿå…¥é—¨ï¼ˆ5åˆ†é’Ÿï¼‰</span>
            </el-menu-item>
            
            <el-menu-item index="cookie">
              <el-icon><Key /></el-icon>
              <span>Cookieè·å–æ•™ç¨‹</span>
            </el-menu-item>
            
            <el-menu-item index="discord">
              <el-icon><Connection /></el-icon>
              <span>Discordé…ç½®æ•™ç¨‹</span>
            </el-menu-item>
            
            <el-menu-item index="telegram">
              <el-icon><ChatDotRound /></el-icon>
              <span>Telegramé…ç½®æ•™ç¨‹</span>
            </el-menu-item>
            
            <el-menu-item index="feishu">
              <el-icon><MessageBox /></el-icon>
              <span>é£ä¹¦é…ç½®æ•™ç¨‹</span>
            </el-menu-item>
            
            <el-menu-item index="mapping">
              <el-icon><Share /></el-icon>
              <span>é¢‘é“æ˜ å°„è¯¦è§£</span>
            </el-menu-item>
            
            <el-menu-item index="filter">
              <el-icon><Filter /></el-icon>
              <span>è¿‡æ»¤è§„åˆ™ä½¿ç”¨æŠ€å·§</span>
            </el-menu-item>
            
            <el-menu-item index="faq">
              <el-icon><QuestionFilled /></el-icon>
              <span>å¸¸è§é—®é¢˜FAQ</span>
            </el-menu-item>
          </el-menu>
        </el-card>
        
        <!-- è§†é¢‘æ•™ç¨‹ -->
        <el-card class="video-tutorials" style="margin-top: 20px">
          <template #header>
            <span>ğŸ“º è§†é¢‘æ•™ç¨‹</span>
          </template>
          
          <el-link 
            v-for="video in videoTutorials"
            :key="video.id"
            :href="video.url"
            target="_blank"
            type="primary"
            class="video-link"
          >
            <el-icon><VideoPlay /></el-icon>
            {{ video.title }}
          </el-link>
        </el-card>
      </el-col>
      
      <!-- å³ä¾§ï¼šæ•™ç¨‹å†…å®¹ -->
      <el-col :span="18">
        <el-card class="tutorial-content">
          <!-- å¿«é€Ÿå…¥é—¨ -->
          <div v-if="activeTutorial === 'quickstart'" class="tutorial">
            <h1>ğŸš€ å¿«é€Ÿå…¥é—¨ï¼ˆ5åˆ†é’Ÿä¸Šæ‰‹ï¼‰</h1>
            
            <el-alert type="success" :closable="false" show-icon>
              <template #title>
                <strong>æ¬¢è¿ä½¿ç”¨KOOKæ¶ˆæ¯è½¬å‘ç³»ç»Ÿï¼</strong>
              </template>
              æœ¬æ•™ç¨‹å°†å¸®åŠ©æ‚¨åœ¨5åˆ†é’Ÿå†…å®ŒæˆåŸºç¡€é…ç½®å¹¶å¼€å§‹ä½¿ç”¨
            </el-alert>
            
            <h2>ç¬¬1æ­¥ï¼šç¯å¢ƒæ£€æµ‹ï¼ˆ1åˆ†é’Ÿï¼‰</h2>
            <ol>
              <li>é¦–æ¬¡å¯åŠ¨ä¼šè‡ªåŠ¨è¿›è¡Œç¯å¢ƒæ£€æµ‹</li>
              <li>å¦‚æœå‘ç°é—®é¢˜ï¼Œç‚¹å‡»"ä¸€é”®ä¿®å¤"è‡ªåŠ¨è§£å†³</li>
              <li>æ‰€æœ‰æ£€æŸ¥é€šè¿‡åï¼Œç‚¹å‡»"ç»§ç»­"</li>
            </ol>
            
            <el-image 
              src="/tutorials/env-check.png" 
              fit="contain"
              style="margin: 20px 0"
            />
            
            <h2>ç¬¬2æ­¥ï¼šç™»å½•KOOKï¼ˆ1åˆ†é’Ÿï¼‰</h2>
            <ol>
              <li>é€‰æ‹©"Chromeæ‰©å±•"æ–¹å¼ï¼ˆæ¨èï¼‰</li>
              <li>å®‰è£…Chromeæ‰©å±•</li>
              <li>è®¿é—®KOOKå¹¶ç™»å½•</li>
              <li>ç‚¹å‡»æ‰©å±•å›¾æ ‡ï¼Œä¸€é”®å¯¼å‡ºCookie</li>
              <li>Cookieä¼šè‡ªåŠ¨å¯¼å…¥åˆ°ç³»ç»Ÿä¸­</li>
            </ol>
            
            <el-image 
              src="/tutorials/login.png" 
              fit="contain"
              style="margin: 20px 0"
            />
            
            <h2>ç¬¬3æ­¥ï¼šé…ç½®Botï¼ˆ2åˆ†é’Ÿï¼‰</h2>
            <ol>
              <li>é€‰æ‹©è¦é…ç½®çš„å¹³å°ï¼ˆDiscord/Telegram/é£ä¹¦ï¼‰</li>
              <li>å¡«å†™Boté…ç½®ä¿¡æ¯ï¼ˆWebhook URLã€Tokenç­‰ï¼‰</li>
              <li>ç‚¹å‡»"æµ‹è¯•è¿æ¥"éªŒè¯é…ç½®</li>
              <li>æµ‹è¯•æˆåŠŸåï¼ŒBotè‡ªåŠ¨ä¿å­˜</li>
            </ol>
            
            <el-image 
              src="/tutorials/bot-config.png" 
              fit="contain"
              style="margin: 20px 0"
            />
            
            <h2>ç¬¬4æ­¥ï¼šæ™ºèƒ½æ˜ å°„ï¼ˆ1åˆ†é’Ÿï¼‰</h2>
            <ol>
              <li>é€‰æ‹©KOOKé¢‘é“</li>
              <li>æŸ¥çœ‹AIæ¨èçš„æ˜ å°„ï¼ˆæŒ‰ç½®ä¿¡åº¦æ’åºï¼‰</li>
              <li>ç‚¹å‡»"ä¸€é”®åº”ç”¨é«˜ç½®ä¿¡åº¦æ¨è"</li>
              <li>å®Œæˆé…ç½®ï¼</li>
            </ol>
            
            <el-image 
              src="/tutorials/mapping.png" 
              fit="contain"
              style="margin: 20px 0"
            />
            
            <h2>ç¬¬5æ­¥ï¼šå¯åŠ¨æœåŠ¡</h2>
            <ol>
              <li>ç‚¹å‡»"å®Œæˆé…ç½®"</li>
              <li>åœ¨ä¸»ç•Œé¢ç‚¹å‡»"å¯åŠ¨æœåŠ¡"</li>
              <li>æœåŠ¡å¯åŠ¨åï¼Œæ‰€æœ‰KOOKæ¶ˆæ¯ä¼šè‡ªåŠ¨è½¬å‘</li>
              <li>åœ¨æ—¥å¿—é¡µé¢å¯ä»¥æŸ¥çœ‹è½¬å‘è®°å½•</li>
            </ol>
            
            <el-result
              icon="success"
              title="é…ç½®å®Œæˆï¼"
              sub-title="ç°åœ¨æ‚¨å¯ä»¥å¼€å§‹ä½¿ç”¨KOOKæ¶ˆæ¯è½¬å‘ç³»ç»Ÿäº†"
            >
              <template #extra>
                <el-button type="primary" @click="startInteractiveTour">
                  ğŸ¯ å¼€å§‹äº¤äº’å¼å¯¼è§ˆ
                </el-button>
              </template>
            </el-result>
          </div>
          
          <!-- Cookieè·å–æ•™ç¨‹ -->
          <div v-else-if="activeTutorial === 'cookie'" class="tutorial">
            <h1>ğŸª Cookieè·å–è¯¦ç»†æ•™ç¨‹</h1>
            
            <h2>æ–¹æ³•1ï¼šChromeæ‰©å±•ï¼ˆæ¨èï¼‰â­</h2>
            <el-steps :active="3" finish-status="success" direction="vertical">
              <el-step title="å®‰è£…æ‰©å±•">
                <template #description>
                  <p>åœ¨é…ç½®å‘å¯¼ä¸­ç‚¹å‡»"å®‰è£…Chromeæ‰©å±•"</p>
                  <p>æˆ–æ‰‹åŠ¨åŠ è½½chrome-extensionç›®å½•</p>
                </template>
              </el-step>
              
              <el-step title="è®¿é—®KOOK">
                <template #description>
                  <p>è®¿é—® <el-link href="https://www.kookapp.cn" target="_blank">https://www.kookapp.cn</el-link></p>
                  <p>ä½¿ç”¨æ‚¨çš„è´¦å·ç™»å½•</p>
                </template>
              </el-step>
              
              <el-step title="å¯¼å‡ºCookie">
                <template #description>
                  <p>ç‚¹å‡»Chromeæ‰©å±•å›¾æ ‡</p>
                  <p>æˆ–æŒ‰å¿«æ·é”® <kbd>Ctrl+Shift+K</kbd></p>
                  <p>ç‚¹å‡»"ä¸€é”®å¯¼å‡ºCookie"</p>
                  <p>Cookieå·²è‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿</p>
                </template>
              </el-step>
            </el-steps>
            
            <el-divider />
            
            <h2>æ–¹æ³•2ï¼šæµè§ˆå™¨å¼€å‘è€…å·¥å…·</h2>
            <el-tabs type="border-card">
              <el-tab-pane label="Chrome">
                <ol>
                  <li>è®¿é—®KOOKå¹¶ç™»å½•</li>
                  <li>æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·</li>
                  <li>åˆ‡æ¢åˆ°"Application"æ ‡ç­¾</li>
                  <li>å·¦ä¾§é€‰æ‹©"Cookies" > "https://www.kookapp.cn"</li>
                  <li>å¤åˆ¶æ‰€æœ‰Cookieï¼ˆå³é”® > Copyï¼‰</li>
                  <li>ç²˜è´´åˆ°é…ç½®å‘å¯¼çš„Cookieè¾“å…¥æ¡†</li>
                </ol>
              </el-tab-pane>
              
              <el-tab-pane label="Firefox">
                <ol>
                  <li>è®¿é—®KOOKå¹¶ç™»å½•</li>
                  <li>æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·</li>
                  <li>åˆ‡æ¢åˆ°"å­˜å‚¨"æ ‡ç­¾</li>
                  <li>å·¦ä¾§é€‰æ‹©"Cookie" > "https://www.kookapp.cn"</li>
                  <li>å¤åˆ¶æ‰€æœ‰Cookie</li>
                  <li>ç²˜è´´åˆ°é…ç½®å‘å¯¼çš„Cookieè¾“å…¥æ¡†</li>
                </ol>
              </el-tab-pane>
            </el-tabs>
            
            <el-divider />
            
            <h2>å¸¸è§é—®é¢˜</h2>
            <el-collapse>
              <el-collapse-item title="Q: Cookieå¤šä¹…ä¼šè¿‡æœŸï¼Ÿ" name="expire">
                <p>KOOKçš„Cookieé€šå¸¸æœ‰æ•ˆæœŸä¸º7-30å¤©</p>
                <p>è¿‡æœŸåéœ€è¦é‡æ–°è·å–</p>
                <p>ç³»ç»Ÿä¼šåœ¨Cookieå³å°†è¿‡æœŸæ—¶æé†’æ‚¨</p>
              </el-collapse-item>
              
              <el-collapse-item title="Q: Cookieå®‰å…¨å—ï¼Ÿ" name="security">
                <p>Cookieä»…å­˜å‚¨åœ¨æ‚¨çš„æœ¬åœ°è®¾å¤‡</p>
                <p>ä½¿ç”¨AES-256åŠ å¯†å­˜å‚¨</p>
                <p>ä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨</p>
              </el-collapse-item>
              
              <el-collapse-item title="Q: å¯ä»¥åœ¨å¤šå°è®¾å¤‡ä½¿ç”¨åŒä¸€ä¸ªCookieå—ï¼Ÿ" name="multi-device">
                <p>ä¸å»ºè®®</p>
                <p>KOOKå¯èƒ½æ£€æµ‹åˆ°å¼‚å¸¸ç™»å½•</p>
                <p>å»ºè®®æ¯å°è®¾å¤‡ä½¿ç”¨ç‹¬ç«‹çš„KOOKè´¦å·</p>
              </el-collapse-item>
            </el-collapse>
          </div>
          
          <!-- å…¶ä»–æ•™ç¨‹å†…å®¹... -->
          <div v-else-if="activeTutorial === 'faq'" class="tutorial">
            <h1>â“ å¸¸è§é—®é¢˜FAQ</h1>
            
            <el-collapse v-model="activeQuestions" accordion>
              <el-collapse-item title="Q: KOOKè´¦å·ä¸€ç›´æ˜¾ç¤º'ç¦»çº¿'ï¼Ÿ" name="offline">
                <el-alert type="warning" :closable="false">
                  <strong>å¯èƒ½åŸå› ï¼š</strong>
                </el-alert>
                <ol>
                  <li>
                    <strong>Cookieå·²è¿‡æœŸ</strong>
                    <p>â†’ è§£å†³ï¼šé‡æ–°ç™»å½•æˆ–é‡æ–°å¯¼å‡ºCookie</p>
                  </li>
                  <li>
                    <strong>IPè¢«é™åˆ¶</strong>
                    <p>â†’ è§£å†³ï¼šæ›´æ¢ç½‘ç»œæˆ–ä½¿ç”¨ä»£ç†</p>
                  </li>
                  <li>
                    <strong>è´¦å·è¢«å°ç¦</strong>
                    <p>â†’ è§£å†³ï¼šè”ç³»KOOKå®¢æœ</p>
                  </li>
                </ol>
              </el-collapse-item>
              
              <el-collapse-item title="Q: æ¶ˆæ¯è½¬å‘å»¶è¿Ÿå¾ˆå¤§ï¼ˆè¶…è¿‡10ç§’ï¼‰ï¼Ÿ" name="delay">
                <el-alert type="warning" :closable="false">
                  <strong>å¯èƒ½åŸå› ï¼š</strong>
                </el-alert>
                <ol>
                  <li>
                    <strong>æ¶ˆæ¯é˜Ÿåˆ—ç§¯å‹</strong>
                    <p>â†’ è§£å†³ï¼šæŸ¥çœ‹é˜Ÿåˆ—çŠ¶æ€ï¼Œç­‰å¾…æ¶ˆåŒ–æˆ–æ¸…ç©ºé˜Ÿåˆ—</p>
                  </li>
                  <li>
                    <strong>ç›®æ ‡å¹³å°é™æµ</strong>
                    <p>â†’ è§£å†³ï¼šé™ä½é¢‘é“æ˜ å°„æ•°é‡</p>
                  </li>
                  <li>
                    <strong>ç½‘ç»œä¸ç¨³å®š</strong>
                    <p>â†’ è§£å†³ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥</p>
                  </li>
                </ol>
              </el-collapse-item>
              
              <el-collapse-item title="Q: å›¾ç‰‡è½¬å‘å¤±è´¥ï¼Ÿ" name="image">
                <el-alert type="warning" :closable="false">
                  <strong>å¯èƒ½åŸå› ï¼š</strong>
                </el-alert>
                <ol>
                  <li>
                    <strong>å›¾ç‰‡è¢«é˜²ç›—é“¾</strong>
                    <p>â†’ è§£å†³ï¼šç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†ï¼Œç¨åé‡è¯•</p>
                  </li>
                  <li>
                    <strong>å›¾ç‰‡è¿‡å¤§</strong>
                    <p>â†’ è§£å†³ï¼šç¨‹åºä¼šè‡ªåŠ¨å‹ç¼©</p>
                  </li>
                  <li>
                    <strong>ç›®æ ‡å¹³å°é™åˆ¶</strong>
                    <p>â†’ è§£å†³ï¼šä½¿ç”¨å›¾åºŠæ¨¡å¼ï¼ˆåœ¨è®¾ç½®ä¸­è°ƒæ•´ï¼‰</p>
                  </li>
                </ol>
              </el-collapse-item>
              
              <el-collapse-item title="Q: å¦‚ä½•å¸è½½è½¯ä»¶ï¼Ÿ" name="uninstall">
                <el-descriptions :column="1" border>
                  <el-descriptions-item label="Windows">
                    æ§åˆ¶é¢æ¿ â†’ ç¨‹åº â†’ å¸è½½
                  </el-descriptions-item>
                  <el-descriptions-item label="macOS">
                    ç›´æ¥åˆ é™¤åº”ç”¨åˆ°åºŸçº¸ç¯“
                  </el-descriptions-item>
                  <el-descriptions-item label="Linux">
                    ç›´æ¥åˆ é™¤AppImageæ–‡ä»¶
                  </el-descriptions-item>
                </el-descriptions>
                
                <el-alert type="info" style="margin-top: 10px">
                  æ•°æ®ä¼šä¿ç•™åœ¨ç”¨æˆ·æ–‡æ¡£ç›®å½•ï¼ˆDocuments/KookForwarderï¼‰ï¼Œå¯æ‰‹åŠ¨åˆ é™¤
                </el-alert>
              </el-collapse-item>
              
              <el-collapse-item title="Q: å¦‚ä½•å¤‡ä»½é…ç½®ï¼Ÿ" name="backup">
                <ol>
                  <li>è¿›å…¥"è®¾ç½®"é¡µé¢</li>
                  <li>æ‰¾åˆ°"å¤‡ä»½ä¸æ¢å¤"éƒ¨åˆ†</li>
                  <li>ç‚¹å‡»"ç«‹å³å¤‡ä»½é…ç½®"</li>
                  <li>å¤‡ä»½æ–‡ä»¶ä¼šä¿å­˜åˆ°Documents/KookForwarder/backups/</li>
                </ol>
              </el-collapse-item>
              
              <el-collapse-item title="Q: æ”¯æŒå“ªäº›å¹³å°ï¼Ÿ" name="platforms">
                <el-tag v-for="platform in supportedPlatforms" :key="platform" style="margin: 5px">
                  {{ platform }}
                </el-tag>
              </el-collapse-item>
            </el-collapse>
          </div>
        </el-card>
      </el-col>
    </el-row>
    
    <!-- åº•éƒ¨ï¼šå¿«æ·å…¥å£ -->
    <el-card class="quick-links" style="margin-top: 20px">
      <template #header>
        <span>âš¡ å¿«æ·å…¥å£</span>
      </template>
      
      <el-row :gutter="10">
        <el-col :span="6">
          <el-button class="quick-link-btn" @click="startWizard">
            <el-icon><Guide /></el-icon>
            <span>é‡æ–°è¿è¡Œé…ç½®å‘å¯¼</span>
          </el-button>
        </el-col>
        
        <el-col :span="6">
          <el-button class="quick-link-btn" @click="checkEnvironment">
            <el-icon><Setting /></el-icon>
            <span>ç¯å¢ƒæ£€æµ‹</span>
          </el-button>
        </el-col>
        
        <el-col :span="6">
          <el-button class="quick-link-btn" @click="viewLogs">
            <el-icon><Document /></el-icon>
            <span>æŸ¥çœ‹æ—¥å¿—</span>
          </el-button>
        </el-col>
        
        <el-col :span="6">
          <el-button class="quick-link-btn" @click="contactSupport">
            <el-icon><Service /></el-icon>
            <span>è”ç³»æ”¯æŒ</span>
          </el-button>
        </el-col>
      </el-row>
    </el-card>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'
import { useRouter } from 'vue-router'
import {
  Promotion, Key, Connection, ChatDotRound, MessageBox,
  Share, Filter, QuestionFilled, VideoPlay, Guide,
  Setting, Document, Service, Folder
} from '@element-plus/icons-vue'

const router = useRouter()

const activeTutorial = ref('quickstart')
const activeQuestions = ref([])

const videoTutorials = ref([
  {
    id: 1,
    title: 'å®Œæ•´é…ç½®æ¼”ç¤ºï¼ˆ10åˆ†é’Ÿï¼‰',
    url: 'https://www.youtube.com/watch?v=xxx'
  },
  {
    id: 2,
    title: 'Cookieè·å–æ•™ç¨‹ï¼ˆ3åˆ†é’Ÿï¼‰',
    url: 'https://www.youtube.com/watch?v=xxx'
  },
  {
    id: 3,
    title: 'Discord Webhooké…ç½®ï¼ˆ2åˆ†é’Ÿï¼‰',
    url: 'https://www.youtube.com/watch?v=xxx'
  },
  {
    id: 4,
    title: 'Telegram Boté…ç½®ï¼ˆ4åˆ†é’Ÿï¼‰',
    url: 'https://www.youtube.com/watch?v=xxx'
  }
])

const supportedPlatforms = ['Discord', 'Telegram', 'é£ä¹¦', 'QQ', 'ä¼ä¸šå¾®ä¿¡ï¼ˆè®¡åˆ’ä¸­ï¼‰']

function selectTutorial(index) {
  activeTutorial.value = index
}

function goBack() {
  router.back()
}

function startWizard() {
  router.push('/wizard')
}

function checkEnvironment() {
  router.push('/environment-check')
}

function viewLogs() {
  router.push('/logs')
}

function contactSupport() {
  window.open('https://github.com/gfchfjh/CSBJJWT/issues', '_blank')
}

function startInteractiveTour() {
  // å¯åŠ¨äº¤äº’å¼å¯¼è§ˆï¼ˆä½¿ç”¨driver.jsï¼‰
  // TODO: å®ç°äº¤äº’å¼å¯¼è§ˆ
}
</script>

<style scoped>
.help-system {
  padding: 20px;
}

.tutorial-menu {
  position: sticky;
  top: 20px;
}

.video-link {
  display: block;
  margin: 10px 0;
  padding: 10px;
  border-radius: 4px;
  transition: background 0.3s;
}

.video-link:hover {
  background: #f5f7fa;
}

.tutorial-content {
  min-height: 600px;
}

.tutorial h1 {
  font-size: 28px;
  margin-bottom: 20px;
  color: #303133;
}

.tutorial h2 {
  font-size: 20px;
  margin: 30px 0 15px;
  color: #409EFF;
  border-left: 4px solid #409EFF;
  padding-left: 10px;
}

.tutorial ol {
  padding-left: 20px;
  line-height: 1.8;
}

.tutorial li {
  margin: 10px 0;
}

kbd {
  padding: 2px 6px;
  background: #303133;
  color: white;
  border-radius: 4px;
  font-size: 12px;
  font-family: monospace;
}

.quick-links {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.quick-link-btn {
  width: 100%;
  height: 80px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.quick-link-btn .el-icon {
  font-size: 32px;
}
</style>
