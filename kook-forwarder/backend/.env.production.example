# ============================================================================
# KOOK消息转发系统 - 生产环境配置示例
# ============================================================================
# 复制此文件为 .env 并根据实际情况修改
# 警告：不要将包含敏感信息的 .env 文件提交到Git仓库
# ============================================================================

# ============================================================================
# 1. 应用基础配置
# ============================================================================

# 应用名称
APP_NAME="KOOK消息转发系统"

# 应用版本
APP_VERSION="1.14.0"

# 运行模式（development/production）
DEBUG=false

# ============================================================================
# 2. API服务配置
# ============================================================================

# API监听地址（生产环境建议仅监听本地）
API_HOST=127.0.0.1

# API端口
API_PORT=9527

# API认证Token（强烈建议设置！）
# 生成方法: openssl rand -hex 32
API_TOKEN=your_api_token_here_change_me

# ============================================================================
# 3. Redis配置
# ============================================================================

# Redis主机
REDIS_HOST=127.0.0.1

# Redis端口
REDIS_PORT=6379

# Redis数据库编号
REDIS_DB=0

# Redis密码（如果设置了密码）
REDIS_PASSWORD=

# 是否使用嵌入式Redis
REDIS_EMBEDDED=true

# 是否自动启动Redis
REDIS_AUTO_START=true

# ============================================================================
# 4. 数据库配置
# ============================================================================

# SQLite数据库路径（自动创建）
# 默认: ~/Documents/KookForwarder/data/config.db
# DATABASE_URL=sqlite:////path/to/custom/database.db

# ============================================================================
# 5. 日志配置
# ============================================================================

# 日志级别（DEBUG/INFO/WARNING/ERROR）
LOG_LEVEL=INFO

# 日志保留天数
LOG_RETENTION_DAYS=7

# 日志目录（自动创建）
# LOG_DIR=/path/to/logs

# ============================================================================
# 6. 图片处理配置
# ============================================================================

# 图片服务器端口
IMAGE_SERVER_PORT=9528

# 图片存储最大容量（GB）
IMAGE_MAX_SIZE_GB=10

# 图片自动清理天数
IMAGE_CLEANUP_DAYS=7

# 图片处理策略（smart/direct/imgbed）
IMAGE_STRATEGY=smart

# 单张图片最大大小（MB）
IMAGE_MAX_SIZE_MB=10

# 图片压缩质量（1-100）
IMAGE_COMPRESSION_QUALITY=85

# ============================================================================
# 7. 限流配置
# ============================================================================

# Discord限流（每N秒最多M条消息）
DISCORD_RATE_LIMIT_CALLS=5
DISCORD_RATE_LIMIT_PERIOD=5

# Telegram限流
TELEGRAM_RATE_LIMIT_CALLS=30
TELEGRAM_RATE_LIMIT_PERIOD=1

# 飞书限流
FEISHU_RATE_LIMIT_CALLS=20
FEISHU_RATE_LIMIT_PERIOD=1

# ============================================================================
# 8. 消息重试配置
# ============================================================================

# 最大重试次数
MESSAGE_RETRY_MAX=3

# 重试间隔（秒）
MESSAGE_RETRY_INTERVAL=30

# ============================================================================
# 9. 验证码识别配置（可选）
# ============================================================================

# 2Captcha API Key（留空则使用本地OCR）
# 注册地址: https://2captcha.com
CAPTCHA_2CAPTCHA_API_KEY=

# 验证码超时时间（秒）
CAPTCHA_TIMEOUT=120

# ============================================================================
# 10. 安全配置
# ============================================================================

# 加密密钥（自动生成，不要手动修改）
# ENCRYPTION_KEY=

# 是否启用主密码保护
REQUIRE_PASSWORD=true

# ============================================================================
# 11. 健康检查配置
# ============================================================================

# 是否启用健康检查
HEALTH_CHECK_ENABLED=true

# 健康检查间隔（秒）
HEALTH_CHECK_INTERVAL=300

# ============================================================================
# 12. 更新检查配置
# ============================================================================

# 是否启用自动更新检查
AUTO_UPDATE_ENABLED=true

# 更新检查间隔（秒，默认24小时）
UPDATE_CHECK_INTERVAL=86400

# ============================================================================
# 13. 邮件告警配置（可选）
# ============================================================================

# SMTP服务器
# SMTP_HOST=smtp.gmail.com

# SMTP端口
# SMTP_PORT=587

# SMTP用户名
# SMTP_USER=your_email@gmail.com

# SMTP密码（应用专用密码）
# SMTP_PASSWORD=your_app_password

# 发件人邮箱
# SMTP_FROM=your_email@gmail.com

# 收件人邮箱（多个用逗号分隔）
# ALERT_EMAIL=admin@example.com,dev@example.com

# ============================================================================
# 14. 性能优化配置
# ============================================================================

# Worker并发数
WORKER_CONCURRENCY=3

# 消息队列最大长度
QUEUE_MAX_LENGTH=10000

# 浏览器共享上下文（节省内存）
BROWSER_SHARED_CONTEXT=true

# ============================================================================
# 15. 高级配置（谨慎修改）
# ============================================================================

# Playwright浏览器路径（留空自动检测）
# PLAYWRIGHT_BROWSER_PATH=/path/to/chromium

# 消息去重缓存大小
DEDUP_CACHE_SIZE=10000

# 图片Token过期时间（秒，2小时）
IMAGE_TOKEN_EXPIRY=7200

# ============================================================================
# 环境变量说明
# ============================================================================
# 1. 修改配置后需要重启服务才能生效
# 2. 敏感信息（Token、密码等）会自动加密存储
# 3. 路径支持相对路径和绝对路径
# 4. 布尔值使用 true/false（小写）
# 5. 数字不要加引号
# ============================================================================
